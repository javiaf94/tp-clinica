import{$ as Vh,$a as ne,A as Dh,Aa as dy,Ab as Os,B as Wt,Ba as Uh,Bb as Ry,C as kh,Ca as hy,Cb as Py,D as Z_,Da as da,Db as Pt,E as Oh,Ea as B,Eb as Hh,F as ey,Fa as Y,Fb as Nl,G as Br,Ga as Bh,Gb as Ml,H as Rs,Ha as fy,Hb as xy,I as Pi,Ia as Pl,Ib as Dy,J as Nh,Ja as qr,Jb as Pn,K as Ps,Ka as py,Kb as un,L as ty,La as jh,Lb as ky,M as xs,Ma as ha,Mb as Vl,N as jr,Na as Jt,Nb as Fl,O as Mh,Oa as my,P as ny,Pa as gy,Q as ry,Qa as _y,R as iy,Ra as K,S as Kt,Sa as xl,T as sy,Ta as $,U as st,Ua as $h,V as Ne,Va as A,W as Qn,Wa as b,X as _e,Xa as oe,Y as xi,Ya as fa,Z as oy,Za as pa,_ as me,_a as Yt,a as H,aa as Ce,ab as te,b as ke,ba as Z,bb as yy,ca as ot,cb as vy,d as pT,da as ua,db as wy,e as ca,ea as ut,eb as O,f as Fr,fa as Di,fb as ma,g as E,ga as He,gb as by,h as W_,ha as Ct,hb as Ey,i as K_,ia as ay,ib as Iy,j as Lr,ja as Ds,jb as Ty,k as Ah,ka as cn,kb as Zn,l as Sh,la as Jn,lb as dt,m as Rn,ma as Ae,mb as qh,n as Ht,na as Se,nb as ga,o as Q_,oa as Yn,ob as Cy,p as J_,pa as cy,pb as Dl,q as Ur,qa as ln,qb as kl,r as Rh,ra as Rl,rb as zh,s as Ph,sa as Qt,sb as Ol,t as xh,ta as Ye,tb as Gh,u as gt,ua as Fh,ub as Ay,v as ae,va as $r,vb as ks,w as la,wa as ly,wb as Sy,x as Y_,xa as Lh,xb as ki,y as X_,ya as uy,yb as _a,z as he,za as Xn,zb as zr}from"./chunk-ARXV77UD.js";var No=pT((Hn,V_)=>{"use strict";(function(n,e){typeof Hn=="object"&&typeof V_<"u"?V_.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self,n.Sweetalert2=e())})(Hn,function(){"use strict";function n(u,d,m){if(typeof u=="function"?u===d:u.has(d))return arguments.length<3?d:m;throw new TypeError("Private element is not present on this object")}function e(u,d){if(d.has(u))throw new TypeError("Cannot initialize the same private elements twice on an object")}function t(u,d){return u.get(n(u,d))}function r(u,d,m){e(u,d),d.set(u,m)}function i(u,d,m){return u.set(n(u,d),m),m}let s=100,o={},c=()=>{o.previousActiveElement instanceof HTMLElement?(o.previousActiveElement.focus(),o.previousActiveElement=null):document.body&&document.body.focus()},l=u=>new Promise(d=>{if(!u)return d();let m=window.scrollX,v=window.scrollY;o.restoreFocusTimeout=setTimeout(()=>{c(),d()},s),window.scrollTo(m,v)}),f="swal2-",g=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce((u,d)=>(u[d]=f+d,u),{}),k=["success","warning","info","question","error"].reduce((u,d)=>(u[d]=f+d,u),{}),F="SweetAlert2:",U=u=>u.charAt(0).toUpperCase()+u.slice(1),M=u=>{console.warn(`${F} ${typeof u=="object"?u.join(" "):u}`)},J=u=>{console.error(`${F} ${u}`)},ee=[],W=u=>{ee.includes(u)||(ee.push(u),M(u))},se=function(u){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;W(`"${u}" is deprecated and will be removed in the next major release.${d?` Use "${d}" instead.`:""}`)},Ie=u=>typeof u=="function"?u():u,ue=u=>u&&typeof u.toPromise=="function",P=u=>ue(u)?u.toPromise():Promise.resolve(u),w=u=>u&&Promise.resolve(u)===u,I=()=>document.body.querySelector(`.${g.container}`),S=u=>{let d=I();return d?d.querySelector(u):null},R=u=>S(`.${u}`),x=()=>R(g.popup),T=()=>R(g.icon),en=()=>R(g["icon-content"]),vr=()=>R(g.title),Mo=()=>R(g["html-container"]),wr=()=>R(g.image),Wn=()=>R(g["progress-steps"]),br=()=>R(g["validation-message"]),Nt=()=>S(`.${g.actions} .${g.confirm}`),Er=()=>S(`.${g.actions} .${g.cancel}`),wt=()=>S(`.${g.actions} .${g.deny}`),at=()=>R(g["input-label"]),Ir=()=>S(`.${g.loader}`),tn=()=>R(g.actions),Vc=()=>R(g.footer),vn=()=>R(g["timer-progress-bar"]),Vo=()=>R(g.close),ah=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Tr=()=>{let u=x();if(!u)return[];let d=u.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),m=Array.from(d).sort((G,pe)=>{let be=parseInt(G.getAttribute("tabindex")||"0"),Be=parseInt(pe.getAttribute("tabindex")||"0");return be>Be?1:be<Be?-1:0}),v=u.querySelectorAll(ah),N=Array.from(v).filter(G=>G.getAttribute("tabindex")!=="-1");return[...new Set(m.concat(N))].filter(G=>mt(G))},Cr=()=>Mt(document.body,g.shown)&&!Mt(document.body,g["toast-shown"])&&!Mt(document.body,g["no-backdrop"]),Ar=()=>{let u=x();return u?Mt(u,g.toast):!1},Fo=()=>{let u=x();return u?u.hasAttribute("data-loading"):!1},pt=(u,d)=>{if(u.textContent="",d){let v=new DOMParser().parseFromString(d,"text/html"),N=v.querySelector("head");N&&Array.from(N.childNodes).forEach(pe=>{u.appendChild(pe)});let G=v.querySelector("body");G&&Array.from(G.childNodes).forEach(pe=>{pe instanceof HTMLVideoElement||pe instanceof HTMLAudioElement?u.appendChild(pe.cloneNode(!0)):u.appendChild(pe)})}},Mt=(u,d)=>{if(!d)return!1;let m=d.split(/\s+/);for(let v=0;v<m.length;v++)if(!u.classList.contains(m[v]))return!1;return!0},Fc=(u,d)=>{Array.from(u.classList).forEach(m=>{!Object.values(g).includes(m)&&!Object.values(k).includes(m)&&!Object.values(d.showClass||{}).includes(m)&&u.classList.remove(m)})},bt=(u,d,m)=>{if(Fc(u,d),!d.customClass)return;let v=d.customClass[m];if(v){if(typeof v!="string"&&!v.forEach){M(`Invalid type of customClass.${m}! Expected string or iterable object, got "${typeof v}"`);return}ge(u,v)}},ps=(u,d)=>{if(!d)return null;switch(d){case"select":case"textarea":case"file":return u.querySelector(`.${g.popup} > .${g[d]}`);case"checkbox":return u.querySelector(`.${g.popup} > .${g.checkbox} input`);case"radio":return u.querySelector(`.${g.popup} > .${g.radio} input:checked`)||u.querySelector(`.${g.popup} > .${g.radio} input:first-child`);case"range":return u.querySelector(`.${g.popup} > .${g.range} input`);default:return u.querySelector(`.${g.popup} > .${g.input}`)}},Lo=u=>{if(u.focus(),u.type!=="file"){let d=u.value;u.value="",u.value=d}},Uo=(u,d,m)=>{!u||!d||(typeof d=="string"&&(d=d.split(/\s+/).filter(Boolean)),d.forEach(v=>{Array.isArray(u)?u.forEach(N=>{m?N.classList.add(v):N.classList.remove(v)}):m?u.classList.add(v):u.classList.remove(v)}))},ge=(u,d)=>{Uo(u,d,!0)},Vt=(u,d)=>{Uo(u,d,!1)},wn=(u,d)=>{let m=Array.from(u.children);for(let v=0;v<m.length;v++){let N=m[v];if(N instanceof HTMLElement&&Mt(N,d))return N}},nn=(u,d,m)=>{m===`${parseInt(m)}`&&(m=parseInt(m)),m||parseInt(m)===0?u.style.setProperty(d,typeof m=="number"?`${m}px`:m):u.style.removeProperty(d)},$e=function(u){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";u&&(u.style.display=d)},Ke=u=>{u&&(u.style.display="none")},Qe=function(u){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";u&&new MutationObserver(()=>{bn(u,u.innerHTML,d)}).observe(u,{childList:!0,subtree:!0})},ct=(u,d,m,v)=>{let N=u.querySelector(d);N&&N.style.setProperty(m,v)},bn=function(u,d){let m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";d?$e(u,m):Ke(u)},mt=u=>!!(u&&(u.offsetWidth||u.offsetHeight||u.getClientRects().length)),Lc=()=>!mt(Nt())&&!mt(wt())&&!mt(Er()),Uc=u=>u.scrollHeight>u.clientHeight,Sr=u=>{let d=window.getComputedStyle(u),m=parseFloat(d.getPropertyValue("animation-duration")||"0"),v=parseFloat(d.getPropertyValue("transition-duration")||"0");return m>0||v>0},ms=function(u){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,m=vn();m&&mt(m)&&(d&&(m.style.transition="none",m.style.width="100%"),setTimeout(()=>{m.style.transition=`width ${u/1e3}s linear`,m.style.width="0%"},10))},Bc=()=>{let u=vn();if(!u)return;let d=parseInt(window.getComputedStyle(u).width);u.style.removeProperty("transition"),u.style.width="100%";let m=parseInt(window.getComputedStyle(u).width),v=d/m*100;u.style.width=`${v}%`},Bo=()=>typeof window>"u"||typeof document>"u",ch=`
 <div aria-labelledby="${g.title}" aria-describedby="${g["html-container"]}" class="${g.popup}" tabindex="-1">
   <button type="button" class="${g.close}"></button>
   <ul class="${g["progress-steps"]}"></ul>
   <div class="${g.icon}"></div>
   <img class="${g.image}" />
   <h2 class="${g.title}" id="${g.title}"></h2>
   <div class="${g["html-container"]}" id="${g["html-container"]}"></div>
   <input class="${g.input}" id="${g.input}" />
   <input type="file" class="${g.file}" />
   <div class="${g.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${g.select}" id="${g.select}"></select>
   <div class="${g.radio}"></div>
   <label class="${g.checkbox}">
     <input type="checkbox" id="${g.checkbox}" />
     <span class="${g.label}"></span>
   </label>
   <textarea class="${g.textarea}" id="${g.textarea}"></textarea>
   <div class="${g["validation-message"]}" id="${g["validation-message"]}"></div>
   <div class="${g.actions}">
     <div class="${g.loader}"></div>
     <button type="button" class="${g.confirm}"></button>
     <button type="button" class="${g.deny}"></button>
     <button type="button" class="${g.cancel}"></button>
   </div>
   <div class="${g.footer}"></div>
   <div class="${g["timer-progress-bar-container"]}">
     <div class="${g["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),lh=()=>{let u=I();return u?(u.remove(),Vt([document.documentElement,document.body],[g["no-backdrop"],g["toast-shown"],g["has-column"]]),!0):!1},rn=()=>{o.currentInstance.resetValidationMessage()},jc=()=>{let u=x(),d=wn(u,g.input),m=wn(u,g.file),v=u.querySelector(`.${g.range} input`),N=u.querySelector(`.${g.range} output`),G=wn(u,g.select),pe=u.querySelector(`.${g.checkbox} input`),be=wn(u,g.textarea);d.oninput=rn,m.onchange=rn,G.onchange=rn,pe.onchange=rn,be.oninput=rn,v.oninput=()=>{rn(),N.value=v.value},v.onchange=()=>{rn(),N.value=v.value}},$c=u=>typeof u=="string"?document.querySelector(u):u,fi=u=>{let d=x();d.setAttribute("role",u.toast?"alert":"dialog"),d.setAttribute("aria-live",u.toast?"polite":"assertive"),u.toast||d.setAttribute("aria-modal","true")},jo=u=>{window.getComputedStyle(u).direction==="rtl"&&ge(I(),g.rtl)},$o=u=>{let d=lh();if(Bo()){J("SweetAlert2 requires document to initialize");return}let m=document.createElement("div");m.className=g.container,d&&ge(m,g["no-transition"]),pt(m,ch);let v=$c(u.target);v.appendChild(m),fi(u),jo(v),jc()},sn=(u,d)=>{u instanceof HTMLElement?d.appendChild(u):typeof u=="object"?qc(u,d):u&&pt(d,u)},qc=(u,d)=>{u.jquery?gs(d,u):pt(d,u.toString())},gs=(u,d)=>{if(u.textContent="",0 in d)for(let m=0;m in d;m++)u.appendChild(d[m].cloneNode(!0));else u.appendChild(d.cloneNode(!0))},zc=(u,d)=>{let m=tn(),v=Ir();!m||!v||(!d.showConfirmButton&&!d.showDenyButton&&!d.showCancelButton?Ke(m):$e(m),bt(m,d,"actions"),pi(m,v,d),pt(v,d.loaderHtml||""),bt(v,d,"loader"))};function pi(u,d,m){let v=Nt(),N=wt(),G=Er();!v||!N||!G||(nt(v,"confirm",m),nt(N,"deny",m),nt(G,"cancel",m),Gc(v,N,G,m),m.reverseButtons&&(m.toast?(u.insertBefore(G,v),u.insertBefore(N,v)):(u.insertBefore(G,d),u.insertBefore(N,d),u.insertBefore(v,d))))}function Gc(u,d,m,v){if(!v.buttonsStyling){Vt([u,d,m],g.styled);return}ge([u,d,m],g.styled),v.confirmButtonColor&&(u.style.backgroundColor=v.confirmButtonColor,ge(u,g["default-outline"])),v.denyButtonColor&&(d.style.backgroundColor=v.denyButtonColor,ge(d,g["default-outline"])),v.cancelButtonColor&&(m.style.backgroundColor=v.cancelButtonColor,ge(m,g["default-outline"]))}function nt(u,d,m){let v=U(d);bn(u,m[`show${v}Button`],"inline-block"),pt(u,m[`${d}ButtonText`]||""),u.setAttribute("aria-label",m[`${d}ButtonAriaLabel`]||""),u.className=g[d],bt(u,m,`${d}Button`)}let Hc=(u,d)=>{let m=Vo();m&&(pt(m,d.closeButtonHtml||""),bt(m,d,"closeButton"),bn(m,d.showCloseButton),m.setAttribute("aria-label",d.closeButtonAriaLabel||""))},mi=(u,d)=>{let m=I();m&&(gi(m,d.backdrop),uh(m,d.position),dh(m,d.grow),bt(m,d,"container"))};function gi(u,d){typeof d=="string"?u.style.background=d:d||ge([document.documentElement,document.body],g["no-backdrop"])}function uh(u,d){d&&(d in g?ge(u,g[d]):(M('The "position" parameter is not valid, defaulting to "center"'),ge(u,g.center)))}function dh(u,d){d&&ge(u,g[`grow-${d}`])}var Te={innerParams:new WeakMap,domCache:new WeakMap};let hh=["input","file","range","select","radio","checkbox","textarea"],fh=(u,d)=>{let m=x();if(!m)return;let v=Te.innerParams.get(u),N=!v||d.input!==v.input;hh.forEach(G=>{let pe=wn(m,g[G]);pe&&(qo(G,d.inputAttributes),pe.className=g[G],N&&Ke(pe))}),d.input&&(N&&_s(d),ys(d))},_s=u=>{if(!u.input)return;if(!Ve[u.input]){J(`Unexpected type of input! Expected ${Object.keys(Ve).join(" | ")}, got "${u.input}"`);return}let d=zo(u.input);if(!d)return;let m=Ve[u.input](d,u);$e(d),u.inputAutoFocus&&setTimeout(()=>{Lo(m)})},Wc=u=>{for(let d=0;d<u.attributes.length;d++){let m=u.attributes[d].name;["id","type","value","style"].includes(m)||u.removeAttribute(m)}},qo=(u,d)=>{let m=x();if(!m)return;let v=ps(m,u);if(v){Wc(v);for(let N in d)v.setAttribute(N,d[N])}},ys=u=>{if(!u.input)return;let d=zo(u.input);d&&bt(d,u,"input")},zt=(u,d)=>{!u.placeholder&&d.inputPlaceholder&&(u.placeholder=d.inputPlaceholder)},Rr=(u,d,m)=>{if(m.inputLabel){let v=document.createElement("label"),N=g["input-label"];v.setAttribute("for",u.id),v.className=N,typeof m.customClass=="object"&&ge(v,m.customClass.inputLabel),v.innerText=m.inputLabel,d.insertAdjacentElement("beforebegin",v)}},zo=u=>{let d=x();if(d)return wn(d,g[u]||g.input)},Pr=(u,d)=>{["string","number"].includes(typeof d)?u.value=`${d}`:w(d)||M(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof d}"`)},Ve={};Ve.text=Ve.email=Ve.password=Ve.number=Ve.tel=Ve.url=Ve.search=Ve.date=Ve["datetime-local"]=Ve.time=Ve.week=Ve.month=(u,d)=>(Pr(u,d.inputValue),Rr(u,u,d),zt(u,d),u.type=d.input,u),Ve.file=(u,d)=>(Rr(u,u,d),zt(u,d),u),Ve.range=(u,d)=>{let m=u.querySelector("input"),v=u.querySelector("output");return Pr(m,d.inputValue),m.type=d.input,Pr(v,d.inputValue),Rr(m,u,d),u},Ve.select=(u,d)=>{if(u.textContent="",d.inputPlaceholder){let m=document.createElement("option");pt(m,d.inputPlaceholder),m.value="",m.disabled=!0,m.selected=!0,u.appendChild(m)}return Rr(u,u,d),u},Ve.radio=u=>(u.textContent="",u),Ve.checkbox=(u,d)=>{let m=ps(x(),"checkbox");m.value="1",m.checked=!!d.inputValue;let v=u.querySelector("span");return pt(v,d.inputPlaceholder||d.inputLabel),m},Ve.textarea=(u,d)=>{Pr(u,d.inputValue),zt(u,d),Rr(u,u,d);let m=v=>parseInt(window.getComputedStyle(v).marginLeft)+parseInt(window.getComputedStyle(v).marginRight);return setTimeout(()=>{if("MutationObserver"in window){let v=parseInt(window.getComputedStyle(x()).width),N=()=>{if(!document.body.contains(u))return;let G=u.offsetWidth+m(u);G>v?x().style.width=`${G}px`:nn(x(),"width",d.width)};new MutationObserver(N).observe(u,{attributes:!0,attributeFilter:["style"]})}}),u};let Kc=(u,d)=>{let m=Mo();m&&(Qe(m),bt(m,d,"htmlContainer"),d.html?(sn(d.html,m),$e(m,"block")):d.text?(m.textContent=d.text,$e(m,"block")):Ke(m),fh(u,d))},Qc=(u,d)=>{let m=Vc();m&&(Qe(m),bn(m,d.footer,"block"),d.footer&&sn(d.footer,m),bt(m,d,"footer"))},ph=(u,d)=>{let m=Te.innerParams.get(u),v=T();if(v){if(m&&d.icon===m.icon){En(v,d),_i(v,d);return}if(!d.icon&&!d.iconHtml){Ke(v);return}if(d.icon&&Object.keys(k).indexOf(d.icon)===-1){J(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${d.icon}"`),Ke(v);return}$e(v),En(v,d),_i(v,d),ge(v,d.showClass&&d.showClass.icon)}},_i=(u,d)=>{for(let[m,v]of Object.entries(k))d.icon!==m&&Vt(u,v);ge(u,d.icon&&k[d.icon]),Ho(u,d),Jc(),bt(u,d,"icon")},Jc=()=>{let u=x();if(!u)return;let d=window.getComputedStyle(u).getPropertyValue("background-color"),m=u.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let v=0;v<m.length;v++)m[v].style.backgroundColor=d},Go=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,yi=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,En=(u,d)=>{if(!d.icon&&!d.iconHtml)return;let m=u.innerHTML,v="";d.iconHtml?v=Yc(d.iconHtml):d.icon==="success"?(v=Go,m=m.replace(/ style=".*?"/g,"")):d.icon==="error"?v=yi:d.icon&&(v=Yc({question:"?",warning:"!",info:"i"}[d.icon])),m.trim()!==v.trim()&&pt(u,v)},Ho=(u,d)=>{if(d.iconColor){u.style.color=d.iconColor,u.style.borderColor=d.iconColor;for(let m of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])ct(u,m,"background-color",d.iconColor);ct(u,".swal2-success-ring","border-color",d.iconColor)}},Yc=u=>`<div class="${g["icon-content"]}">${u}</div>`,Xc=(u,d)=>{let m=wr();if(m){if(!d.imageUrl){Ke(m);return}$e(m,""),m.setAttribute("src",d.imageUrl),m.setAttribute("alt",d.imageAlt||""),nn(m,"width",d.imageWidth),nn(m,"height",d.imageHeight),m.className=g.image,bt(m,d,"image")}},Zc=(u,d)=>{let m=I(),v=x();if(!(!m||!v)){if(d.toast){nn(m,"width",d.width),v.style.width="100%";let N=Ir();N&&v.insertBefore(N,T())}else nn(v,"width",d.width);nn(v,"padding",d.padding),d.color&&(v.style.color=d.color),d.background&&(v.style.background=d.background),Ke(br()),el(v,d)}},el=(u,d)=>{let m=d.showClass||{};u.className=`${g.popup} ${mt(u)?m.popup:""}`,d.toast?(ge([document.documentElement,document.body],g["toast-shown"]),ge(u,g.toast)):ge(u,g.modal),bt(u,d,"popup"),typeof d.customClass=="string"&&ge(u,d.customClass),d.icon&&ge(u,g[`icon-${d.icon}`])},Wo=(u,d)=>{let m=Wn();if(!m)return;let{progressSteps:v,currentProgressStep:N}=d;if(!v||v.length===0||N===void 0){Ke(m);return}$e(m),m.textContent="",N>=v.length&&M("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),v.forEach((G,pe)=>{let be=Ko(G);if(m.appendChild(be),pe===N&&ge(be,g["active-progress-step"]),pe!==v.length-1){let Be=tl(d);m.appendChild(Be)}})},Ko=u=>{let d=document.createElement("li");return ge(d,g["progress-step"]),pt(d,u),d},tl=u=>{let d=document.createElement("li");return ge(d,g["progress-step-line"]),u.progressStepsDistance&&nn(d,"width",u.progressStepsDistance),d},nl=(u,d)=>{let m=vr();m&&(Qe(m),bn(m,d.title||d.titleText,"block"),d.title&&sn(d.title,m),d.titleText&&(m.innerText=d.titleText),bt(m,d,"title"))},rl=(u,d)=>{Zc(u,d),mi(u,d),Wo(u,d),ph(u,d),Xc(u,d),nl(u,d),Hc(u,d),Kc(u,d),zc(u,d),Qc(u,d);let m=x();typeof d.didRender=="function"&&m&&d.didRender(m),o.eventEmitter.emit("didRender",m)},mh=()=>mt(x()),Qo=()=>{var u;return(u=Nt())===null||u===void 0?void 0:u.click()},il=()=>{var u;return(u=wt())===null||u===void 0?void 0:u.click()},gh=()=>{var u;return(u=Er())===null||u===void 0?void 0:u.click()},St=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Gt=u=>{u.keydownTarget&&u.keydownHandlerAdded&&(u.keydownTarget.removeEventListener("keydown",u.keydownHandler,{capture:u.keydownListenerCapture}),u.keydownHandlerAdded=!1)},vs=(u,d,m)=>{Gt(u),d.toast||(u.keydownHandler=v=>ws(d,v,m),u.keydownTarget=d.keydownListenerCapture?window:x(),u.keydownListenerCapture=d.keydownListenerCapture,u.keydownTarget.addEventListener("keydown",u.keydownHandler,{capture:u.keydownListenerCapture}),u.keydownHandlerAdded=!0)},xr=(u,d)=>{var m;let v=Tr();if(v.length){u=u+d,u===v.length?u=0:u===-1&&(u=v.length-1),v[u].focus();return}(m=x())===null||m===void 0||m.focus()},Jo=["ArrowRight","ArrowDown"],Oe=["ArrowLeft","ArrowUp"],ws=(u,d,m)=>{u&&(d.isComposing||d.keyCode===229||(u.stopKeydownPropagation&&d.stopPropagation(),d.key==="Enter"?vi(d,u):d.key==="Tab"?wi(d):[...Jo,...Oe].includes(d.key)?_h(d.key):d.key==="Escape"&&sl(d,u,m)))},vi=(u,d)=>{if(!Ie(d.allowEnterKey))return;let m=ps(x(),d.input);if(u.target&&m&&u.target instanceof HTMLElement&&u.target.outerHTML===m.outerHTML){if(["textarea","file"].includes(d.input))return;Qo(),u.preventDefault()}},wi=u=>{let d=u.target,m=Tr(),v=-1;for(let N=0;N<m.length;N++)if(d===m[N]){v=N;break}u.shiftKey?xr(v,-1):xr(v,1),u.stopPropagation(),u.preventDefault()},_h=u=>{let d=tn(),m=Nt(),v=wt(),N=Er();if(!d||!m||!v||!N)return;let G=[m,v,N];if(document.activeElement instanceof HTMLElement&&!G.includes(document.activeElement))return;let pe=Jo.includes(u)?"nextElementSibling":"previousElementSibling",be=document.activeElement;if(be){for(let Be=0;Be<d.children.length;Be++){if(be=be[pe],!be)return;if(be instanceof HTMLButtonElement&&mt(be))break}be instanceof HTMLButtonElement&&be.focus()}},sl=(u,d,m)=>{Ie(d.allowEscapeKey)&&(u.preventDefault(),m(St.esc))};var Dr={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};let yh=()=>{let u=I();Array.from(document.body.children).forEach(m=>{m.contains(u)||(m.hasAttribute("aria-hidden")&&m.setAttribute("data-previous-aria-hidden",m.getAttribute("aria-hidden")||""),m.setAttribute("aria-hidden","true"))})},ol=()=>{Array.from(document.body.children).forEach(d=>{d.hasAttribute("data-previous-aria-hidden")?(d.setAttribute("aria-hidden",d.getAttribute("data-previous-aria-hidden")||""),d.removeAttribute("data-previous-aria-hidden")):d.removeAttribute("aria-hidden")})},al=typeof window<"u"&&!!window.GestureEvent,bi=()=>{if(al&&!Mt(document.body,g.iosfix)){let u=document.body.scrollTop;document.body.style.top=`${u*-1}px`,ge(document.body,g.iosfix),In()}},In=()=>{let u=I();if(!u)return;let d;u.ontouchstart=m=>{d=cl(m)},u.ontouchmove=m=>{d&&(m.preventDefault(),m.stopPropagation())}},cl=u=>{let d=u.target,m=I(),v=Mo();return!m||!v||ll(u)||ul(u)?!1:d===m||!Uc(m)&&d instanceof HTMLElement&&d.tagName!=="INPUT"&&d.tagName!=="TEXTAREA"&&!(Uc(v)&&v.contains(d))},ll=u=>u.touches&&u.touches.length&&u.touches[0].touchType==="stylus",ul=u=>u.touches&&u.touches.length>1,kr=()=>{if(Mt(document.body,g.iosfix)){let u=parseInt(document.body.style.top,10);Vt(document.body,g.iosfix),document.body.style.top="",document.body.scrollTop=u*-1}},vh=()=>{let u=document.createElement("div");u.className=g["scrollbar-measure"],document.body.appendChild(u);let d=u.getBoundingClientRect().width-u.clientWidth;return document.body.removeChild(u),d},Or=null,wh=u=>{Or===null&&(document.body.scrollHeight>window.innerHeight||u==="scroll")&&(Or=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Or+vh()}px`)},Tn=()=>{Or!==null&&(document.body.style.paddingRight=`${Or}px`,Or=null)};function dl(u,d,m,v){Ar()?Fe(u,v):(l(m).then(()=>Fe(u,v)),Gt(o)),al?(d.setAttribute("style","display:none !important"),d.removeAttribute("class"),d.innerHTML=""):d.remove(),Cr()&&(Tn(),kr(),ol()),bh()}function bh(){Vt([document.documentElement,document.body],[g.shown,g["height-auto"],g["no-backdrop"],g["toast-shown"]])}function Rt(u){u=Ei(u);let d=Dr.swalPromiseResolve.get(this),m=bs(this);this.isAwaitingPromise?u.isDismissed||(on(this),d(u)):m&&d(u)}let bs=u=>{let d=x();if(!d)return!1;let m=Te.innerParams.get(u);if(!m||Mt(d,m.hideClass.popup))return!1;Vt(d,m.showClass.popup),ge(d,m.hideClass.popup);let v=I();return Vt(v,m.showClass.backdrop),ge(v,m.hideClass.backdrop),hl(u,d,m),!0};function Yo(u){let d=Dr.swalPromiseReject.get(this);on(this),d&&d(u)}let on=u=>{u.isAwaitingPromise&&(delete u.isAwaitingPromise,Te.innerParams.get(u)||u._destroy())},Ei=u=>typeof u>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},u),hl=(u,d,m)=>{var v;let N=I(),G=Sr(d);typeof m.willClose=="function"&&m.willClose(d),(v=o.eventEmitter)===null||v===void 0||v.emit("willClose",d),G?Xo(u,d,N,m.returnFocus,m.didClose):dl(u,N,m.returnFocus,m.didClose)},Xo=(u,d,m,v,N)=>{o.swalCloseEventFinishedCallback=dl.bind(null,u,m,v,N);let G=function(pe){if(pe.target===d){var be;(be=o.swalCloseEventFinishedCallback)===null||be===void 0||be.call(o),delete o.swalCloseEventFinishedCallback,d.removeEventListener("animationend",G),d.removeEventListener("transitionend",G)}};d.addEventListener("animationend",G),d.addEventListener("transitionend",G)},Fe=(u,d)=>{setTimeout(()=>{var m;typeof d=="function"&&d.bind(u.params)(),(m=o.eventEmitter)===null||m===void 0||m.emit("didClose"),u._destroy&&u._destroy()})},Nr=u=>{let d=x();if(d||new Sl,d=x(),!d)return;let m=Ir();Ar()?Ke(T()):Eh(d,u),$e(m),d.setAttribute("data-loading","true"),d.setAttribute("aria-busy","true"),d.focus()},Eh=(u,d)=>{let m=tn(),v=Ir();!m||!v||(!d&&mt(Nt())&&(d=Nt()),$e(m),d&&(Ke(d),v.setAttribute("data-button-to-replace",d.className),m.insertBefore(v,d)),ge([u,m],g.loading))},fl=(u,d)=>{d.input==="select"||d.input==="radio"?an(u,d):["text","email","number","tel","textarea"].some(m=>m===d.input)&&(ue(d.inputValue)||w(d.inputValue))&&(Nr(Nt()),_l(u,d))},pl=(u,d)=>{let m=u.getInput();if(!m)return null;switch(d.input){case"checkbox":return ml(m);case"radio":return Es(m);case"file":return gl(m);default:return d.inputAutoTrim?m.value.trim():m.value}},ml=u=>u.checked?1:0,Es=u=>u.checked?u.value:null,gl=u=>u.files&&u.files.length?u.getAttribute("multiple")!==null?u.files:u.files[0]:null,an=(u,d)=>{let m=x();if(!m)return;let v=N=>{d.input==="select"?Ih(m,Ti(N),d):d.input==="radio"&&Ii(m,Ti(N),d)};ue(d.inputOptions)||w(d.inputOptions)?(Nr(Nt()),P(d.inputOptions).then(N=>{u.hideLoading(),v(N)})):typeof d.inputOptions=="object"?v(d.inputOptions):J(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof d.inputOptions}`)},_l=(u,d)=>{let m=u.getInput();m&&(Ke(m),P(d.inputValue).then(v=>{m.value=d.input==="number"?`${parseFloat(v)||0}`:`${v}`,$e(m),m.focus(),u.hideLoading()}).catch(v=>{J(`Error in inputValue promise: ${v}`),m.value="",$e(m),m.focus(),u.hideLoading()}))};function Ih(u,d,m){let v=wn(u,g.select);if(!v)return;let N=(G,pe,be)=>{let Be=document.createElement("option");Be.value=be,pt(Be,pe),Be.selected=Is(be,m.inputValue),G.appendChild(Be)};d.forEach(G=>{let pe=G[0],be=G[1];if(Array.isArray(be)){let Be=document.createElement("optgroup");Be.label=pe,Be.disabled=!1,v.appendChild(Be),be.forEach(Ss=>N(Be,Ss[1],Ss[0]))}else N(v,be,pe)}),v.focus()}function Ii(u,d,m){let v=wn(u,g.radio);if(!v)return;d.forEach(G=>{let pe=G[0],be=G[1],Be=document.createElement("input"),Ss=document.createElement("label");Be.type="radio",Be.name=g.radio,Be.value=pe,Is(pe,m.inputValue)&&(Be.checked=!0);let Ch=document.createElement("span");pt(Ch,be),Ch.className=g.label,Ss.appendChild(Be),Ss.appendChild(Ch),v.appendChild(Ss)});let N=v.querySelectorAll("input");N.length&&N[0].focus()}let Ti=u=>{let d=[];return u instanceof Map?u.forEach((m,v)=>{let N=m;typeof N=="object"&&(N=Ti(N)),d.push([v,N])}):Object.keys(u).forEach(m=>{let v=u[m];typeof v=="object"&&(v=Ti(v)),d.push([m,v])}),d},Is=(u,d)=>!!d&&d.toString()===u.toString(),Ts=u=>{let d=Te.innerParams.get(u);u.disableButtons(),d.input?vl(u,"confirm"):Ci(u,!0)},yl=u=>{let d=Te.innerParams.get(u);u.disableButtons(),d.returnInputValueOnDeny?vl(u,"deny"):Kn(u,!1)},Cs=(u,d)=>{u.disableButtons(),d(St.cancel)},vl=(u,d)=>{let m=Te.innerParams.get(u);if(!m.input){J(`The "input" parameter is needed to be set when using returnInputValueOn${U(d)}`);return}let v=u.getInput(),N=pl(u,m);m.inputValidator?wl(u,N,d):v&&!v.checkValidity()?(u.enableButtons(),u.showValidationMessage(m.validationMessage||v.validationMessage)):d==="deny"?Kn(u,N):Ci(u,N)},wl=(u,d,m)=>{let v=Te.innerParams.get(u);u.disableInput(),Promise.resolve().then(()=>P(v.inputValidator(d,v.validationMessage))).then(G=>{u.enableButtons(),u.enableInput(),G?u.showValidationMessage(G):m==="deny"?Kn(u,d):Ci(u,d)})},Kn=(u,d)=>{let m=Te.innerParams.get(u||void 0);m.showLoaderOnDeny&&Nr(wt()),m.preDeny?(u.isAwaitingPromise=!0,Promise.resolve().then(()=>P(m.preDeny(d,m.validationMessage))).then(N=>{N===!1?(u.hideLoading(),on(u)):u.close({isDenied:!0,value:typeof N>"u"?d:N})}).catch(N=>ea(u||void 0,N))):u.close({isDenied:!0,value:d})},Zo=(u,d)=>{u.close({isConfirmed:!0,value:d})},ea=(u,d)=>{u.rejectPromise(d)},Ci=(u,d)=>{let m=Te.innerParams.get(u||void 0);m.showLoaderOnConfirm&&Nr(),m.preConfirm?(u.resetValidationMessage(),u.isAwaitingPromise=!0,Promise.resolve().then(()=>P(m.preConfirm(d,m.validationMessage))).then(N=>{mt(br())||N===!1?(u.hideLoading(),on(u)):Zo(u,typeof N>"u"?d:N)}).catch(N=>ea(u||void 0,N))):Zo(u,d)};function Mr(){let u=Te.innerParams.get(this);if(!u)return;let d=Te.domCache.get(this);Ke(d.loader),Ar()?u.icon&&$e(T()):bl(d),Vt([d.popup,d.actions],g.loading),d.popup.removeAttribute("aria-busy"),d.popup.removeAttribute("data-loading"),d.confirmButton.disabled=!1,d.denyButton.disabled=!1,d.cancelButton.disabled=!1}let bl=u=>{let d=u.popup.getElementsByClassName(u.loader.getAttribute("data-button-to-replace"));d.length?$e(d[0],"inline-block"):Lc()&&Ke(u.actions)};function Ai(){let u=Te.innerParams.get(this),d=Te.domCache.get(this);return d?ps(d.popup,u.input):null}function ta(u,d,m){let v=Te.domCache.get(u);d.forEach(N=>{v[N].disabled=m})}function na(u,d){let m=x();if(!(!m||!u))if(u.type==="radio"){let v=m.querySelectorAll(`[name="${g.radio}"]`);for(let N=0;N<v.length;N++)v[N].disabled=d}else u.disabled=d}function Cn(){ta(this,["confirmButton","denyButton","cancelButton"],!1)}function ra(){ta(this,["confirmButton","denyButton","cancelButton"],!0)}function ia(){na(this.getInput(),!1)}function sa(){na(this.getInput(),!0)}function oa(u){let d=Te.domCache.get(this),m=Te.innerParams.get(this);pt(d.validationMessage,u),d.validationMessage.className=g["validation-message"],m.customClass&&m.customClass.validationMessage&&ge(d.validationMessage,m.customClass.validationMessage),$e(d.validationMessage);let v=this.getInput();v&&(v.setAttribute("aria-invalid","true"),v.setAttribute("aria-describedby",g["validation-message"]),Lo(v),ge(v,g.inputerror))}function Si(){let u=Te.domCache.get(this);u.validationMessage&&Ke(u.validationMessage);let d=this.getInput();d&&(d.removeAttribute("aria-invalid"),d.removeAttribute("aria-describedby"),Vt(d,g.inputerror))}let Je={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},El=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Il={allowEnterKey:void 0},Vr=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],a=u=>Object.prototype.hasOwnProperty.call(Je,u),h=u=>El.indexOf(u)!==-1,p=u=>Il[u],y=u=>{a(u)||M(`Unknown parameter "${u}"`)},D=u=>{Vr.includes(u)&&M(`The parameter "${u}" is incompatible with toasts`)},V=u=>{let d=p(u);d&&se(u,d)},z=u=>{u.backdrop===!1&&u.allowOutsideClick&&M('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(let d in u)y(d),u.toast&&D(d),V(d)};function Pe(u){let d=x(),m=Te.innerParams.get(this);if(!d||Mt(d,m.hideClass.popup)){M("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}let v=rt(u),N=Object.assign({},m,v);rl(this,N),Te.innerParams.set(this,N),Object.defineProperties(this,{params:{value:Object.assign({},this.params,u),writable:!1,enumerable:!0}})}let rt=u=>{let d={};return Object.keys(u).forEach(m=>{h(m)?d[m]=u[m]:M(`Invalid parameter to update: ${m}`)}),d};function we(){let u=Te.domCache.get(this),d=Te.innerParams.get(this);if(!d){it(this);return}u.popup&&o.swalCloseEventFinishedCallback&&(o.swalCloseEventFinishedCallback(),delete o.swalCloseEventFinishedCallback),typeof d.didDestroy=="function"&&d.didDestroy(),o.eventEmitter.emit("didDestroy"),lt(this)}let lt=u=>{it(u),delete u.params,delete o.keydownHandler,delete o.keydownTarget,delete o.currentInstance},it=u=>{u.isAwaitingPromise?(An(Te,u),u.isAwaitingPromise=!0):(An(Dr,u),An(Te,u),delete u.isAwaitingPromise,delete u.disableButtons,delete u.enableButtons,delete u.getInput,delete u.disableInput,delete u.enableInput,delete u.hideLoading,delete u.disableLoading,delete u.showValidationMessage,delete u.resetValidationMessage,delete u.close,delete u.closePopup,delete u.closeModal,delete u.closeToast,delete u.rejectPromise,delete u.update,delete u._destroy)},An=(u,d)=>{for(let m in u)u[m].delete(d)};var Ft=Object.freeze({__proto__:null,_destroy:we,close:Rt,closeModal:Rt,closePopup:Rt,closeToast:Rt,disableButtons:ra,disableInput:sa,disableLoading:Mr,enableButtons:Cn,enableInput:ia,getInput:Ai,handleAwaitingPromise:on,hideLoading:Mr,rejectPromise:Yo,resetValidationMessage:Si,showValidationMessage:oa,update:Pe});let As=(u,d,m)=>{u.toast?aa(u,d,m):(RI(d),PI(d),xI(u,d,m))},aa=(u,d,m)=>{d.popup.onclick=()=>{u&&(SI(u)||u.timer||u.input)||m(St.close)}},SI=u=>!!(u.showConfirmButton||u.showDenyButton||u.showCancelButton||u.showCloseButton),Tl=!1,RI=u=>{u.popup.onmousedown=()=>{u.container.onmouseup=function(d){u.container.onmouseup=()=>{},d.target===u.container&&(Tl=!0)}}},PI=u=>{u.container.onmousedown=d=>{d.target===u.container&&d.preventDefault(),u.popup.onmouseup=function(m){u.popup.onmouseup=()=>{},(m.target===u.popup||m.target instanceof HTMLElement&&u.popup.contains(m.target))&&(Tl=!0)}}},xI=(u,d,m)=>{d.container.onclick=v=>{if(Tl){Tl=!1;return}v.target===d.container&&Ie(u.allowOutsideClick)&&m(St.backdrop)}},DI=u=>typeof u=="object"&&u.jquery,B_=u=>u instanceof Element||DI(u),kI=u=>{let d={};return typeof u[0]=="object"&&!B_(u[0])?Object.assign(d,u[0]):["title","html","icon"].forEach((m,v)=>{let N=u[v];typeof N=="string"||B_(N)?d[m]=N:N!==void 0&&J(`Unexpected type of ${m}! Expected "string" or "Element", got ${typeof N}`)}),d};function OI(){for(var u=arguments.length,d=new Array(u),m=0;m<u;m++)d[m]=arguments[m];return new this(...d)}function NI(u){class d extends this{_main(v,N){return super._main(v,Object.assign({},u,N))}}return d}let MI=()=>o.timeout&&o.timeout.getTimerLeft(),j_=()=>{if(o.timeout)return Bc(),o.timeout.stop()},$_=()=>{if(o.timeout){let u=o.timeout.start();return ms(u),u}},VI=()=>{let u=o.timeout;return u&&(u.running?j_():$_())},FI=u=>{if(o.timeout){let d=o.timeout.increase(u);return ms(d,!0),d}},LI=()=>!!(o.timeout&&o.timeout.isRunning()),q_=!1,Th={};function UI(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";Th[u]=this,q_||(document.body.addEventListener("click",BI),q_=!0)}let BI=u=>{for(let d=u.target;d&&d!==document;d=d.parentNode)for(let m in Th){let v=d.getAttribute(m);if(v){Th[m].fire({template:v});return}}};class jI{constructor(){this.events={}}_getHandlersByEventName(d){return typeof this.events[d]>"u"&&(this.events[d]=[]),this.events[d]}on(d,m){let v=this._getHandlersByEventName(d);v.includes(m)||v.push(m)}once(d,m){var v=this;let N=function(){v.removeListener(d,N);for(var G=arguments.length,pe=new Array(G),be=0;be<G;be++)pe[be]=arguments[be];m.apply(v,pe)};this.on(d,N)}emit(d){for(var m=arguments.length,v=new Array(m>1?m-1:0),N=1;N<m;N++)v[N-1]=arguments[N];this._getHandlersByEventName(d).forEach(G=>{try{G.apply(this,v)}catch(pe){console.error(pe)}})}removeListener(d,m){let v=this._getHandlersByEventName(d),N=v.indexOf(m);N>-1&&v.splice(N,1)}removeAllListeners(d){this.events[d]!==void 0&&(this.events[d].length=0)}reset(){this.events={}}}o.eventEmitter=new jI;var $I=Object.freeze({__proto__:null,argsToParams:kI,bindClickHandler:UI,clickCancel:gh,clickConfirm:Qo,clickDeny:il,enableLoading:Nr,fire:OI,getActions:tn,getCancelButton:Er,getCloseButton:Vo,getConfirmButton:Nt,getContainer:I,getDenyButton:wt,getFocusableElements:Tr,getFooter:Vc,getHtmlContainer:Mo,getIcon:T,getIconContent:en,getImage:wr,getInputLabel:at,getLoader:Ir,getPopup:x,getProgressSteps:Wn,getTimerLeft:MI,getTimerProgressBar:vn,getTitle:vr,getValidationMessage:br,increaseTimer:FI,isDeprecatedParameter:p,isLoading:Fo,isTimerRunning:LI,isUpdatableParameter:h,isValidParameter:a,isVisible:mh,mixin:NI,off:(u,d)=>{if(!u){o.eventEmitter.reset();return}d?o.eventEmitter.removeListener(u,d):o.eventEmitter.removeAllListeners(u)},on:(u,d)=>{o.eventEmitter.on(u,d)},once:(u,d)=>{o.eventEmitter.once(u,d)},resumeTimer:$_,showLoading:Nr,stopTimer:j_,toggleTimer:VI});class qI{constructor(d,m){this.callback=d,this.remaining=m,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(d){let m=this.running;return m&&this.stop(),this.remaining+=d,m&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}let z_=["swal-title","swal-html","swal-footer"],zI=u=>{let d=typeof u.template=="string"?document.querySelector(u.template):u.template;if(!d)return{};let m=d.content;return XI(m),Object.assign(GI(m),HI(m),WI(m),KI(m),QI(m),JI(m),YI(m,z_))},GI=u=>{let d={};return Array.from(u.querySelectorAll("swal-param")).forEach(v=>{Ri(v,["name","value"]);let N=v.getAttribute("name"),G=v.getAttribute("value");!N||!G||(typeof Je[N]=="boolean"?d[N]=G!=="false":typeof Je[N]=="object"?d[N]=JSON.parse(G):d[N]=G)}),d},HI=u=>{let d={};return Array.from(u.querySelectorAll("swal-function-param")).forEach(v=>{let N=v.getAttribute("name"),G=v.getAttribute("value");!N||!G||(d[N]=new Function(`return ${G}`)())}),d},WI=u=>{let d={};return Array.from(u.querySelectorAll("swal-button")).forEach(v=>{Ri(v,["type","color","aria-label"]);let N=v.getAttribute("type");!N||!["confirm","cancel","deny"].includes(N)||(d[`${N}ButtonText`]=v.innerHTML,d[`show${U(N)}Button`]=!0,v.hasAttribute("color")&&(d[`${N}ButtonColor`]=v.getAttribute("color")),v.hasAttribute("aria-label")&&(d[`${N}ButtonAriaLabel`]=v.getAttribute("aria-label")))}),d},KI=u=>{let d={},m=u.querySelector("swal-image");return m&&(Ri(m,["src","width","height","alt"]),m.hasAttribute("src")&&(d.imageUrl=m.getAttribute("src")||void 0),m.hasAttribute("width")&&(d.imageWidth=m.getAttribute("width")||void 0),m.hasAttribute("height")&&(d.imageHeight=m.getAttribute("height")||void 0),m.hasAttribute("alt")&&(d.imageAlt=m.getAttribute("alt")||void 0)),d},QI=u=>{let d={},m=u.querySelector("swal-icon");return m&&(Ri(m,["type","color"]),m.hasAttribute("type")&&(d.icon=m.getAttribute("type")),m.hasAttribute("color")&&(d.iconColor=m.getAttribute("color")),d.iconHtml=m.innerHTML),d},JI=u=>{let d={},m=u.querySelector("swal-input");m&&(Ri(m,["type","label","placeholder","value"]),d.input=m.getAttribute("type")||"text",m.hasAttribute("label")&&(d.inputLabel=m.getAttribute("label")),m.hasAttribute("placeholder")&&(d.inputPlaceholder=m.getAttribute("placeholder")),m.hasAttribute("value")&&(d.inputValue=m.getAttribute("value")));let v=Array.from(u.querySelectorAll("swal-input-option"));return v.length&&(d.inputOptions={},v.forEach(N=>{Ri(N,["value"]);let G=N.getAttribute("value");if(!G)return;let pe=N.innerHTML;d.inputOptions[G]=pe})),d},YI=(u,d)=>{let m={};for(let v in d){let N=d[v],G=u.querySelector(N);G&&(Ri(G,[]),m[N.replace(/^swal-/,"")]=G.innerHTML.trim())}return m},XI=u=>{let d=z_.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(u.children).forEach(m=>{let v=m.tagName.toLowerCase();d.includes(v)||M(`Unrecognized element <${v}>`)})},Ri=(u,d)=>{Array.from(u.attributes).forEach(m=>{d.indexOf(m.name)===-1&&M([`Unrecognized attribute "${m.name}" on <${u.tagName.toLowerCase()}>.`,`${d.length?`Allowed attributes are: ${d.join(", ")}`:"To set the value, use HTML within the element."}`])})},G_=10,ZI=u=>{let d=I(),m=x();typeof u.willOpen=="function"&&u.willOpen(m),o.eventEmitter.emit("willOpen",m);let N=window.getComputedStyle(document.body).overflowY;nT(d,m,u),setTimeout(()=>{eT(d,m)},G_),Cr()&&(tT(d,u.scrollbarPadding,N),yh()),!Ar()&&!o.previousActiveElement&&(o.previousActiveElement=document.activeElement),typeof u.didOpen=="function"&&setTimeout(()=>u.didOpen(m)),o.eventEmitter.emit("didOpen",m),Vt(d,g["no-transition"])},Cl=u=>{let d=x();if(u.target!==d)return;let m=I();d.removeEventListener("animationend",Cl),d.removeEventListener("transitionend",Cl),m.style.overflowY="auto"},eT=(u,d)=>{Sr(d)?(u.style.overflowY="hidden",d.addEventListener("animationend",Cl),d.addEventListener("transitionend",Cl)):u.style.overflowY="auto"},tT=(u,d,m)=>{bi(),d&&m!=="hidden"&&wh(m),setTimeout(()=>{u.scrollTop=0})},nT=(u,d,m)=>{ge(u,m.showClass.backdrop),m.animation?(d.style.setProperty("opacity","0","important"),$e(d,"grid"),setTimeout(()=>{ge(d,m.showClass.popup),d.style.removeProperty("opacity")},G_)):$e(d,"grid"),ge([document.documentElement,document.body],g.shown),m.heightAuto&&m.backdrop&&!m.toast&&ge([document.documentElement,document.body],g["height-auto"])};var H_={email:(u,d)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(u)?Promise.resolve():Promise.resolve(d||"Invalid email address"),url:(u,d)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(u)?Promise.resolve():Promise.resolve(d||"Invalid URL")};function rT(u){u.inputValidator||(u.input==="email"&&(u.inputValidator=H_.email),u.input==="url"&&(u.inputValidator=H_.url))}function iT(u){(!u.target||typeof u.target=="string"&&!document.querySelector(u.target)||typeof u.target!="string"&&!u.target.appendChild)&&(M('Target parameter is not valid, defaulting to "body"'),u.target="body")}function sT(u){rT(u),u.showLoaderOnConfirm&&!u.preConfirm&&M(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),iT(u),typeof u.title=="string"&&(u.title=u.title.split(`
`).join("<br />")),$o(u)}let Sn;var Al=new WeakMap;class Ge{constructor(){if(r(this,Al,void 0),typeof window>"u")return;Sn=this;for(var d=arguments.length,m=new Array(d),v=0;v<d;v++)m[v]=arguments[v];let N=Object.freeze(this.constructor.argsToParams(m));this.params=N,this.isAwaitingPromise=!1,i(Al,this,this._main(Sn.params))}_main(d){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(z(Object.assign({},m,d)),o.currentInstance){let G=Dr.swalPromiseResolve.get(o.currentInstance),{isAwaitingPromise:pe}=o.currentInstance;o.currentInstance._destroy(),pe||G({isDismissed:!0}),Cr()&&ol()}o.currentInstance=Sn;let v=aT(d,m);sT(v),Object.freeze(v),o.timeout&&(o.timeout.stop(),delete o.timeout),clearTimeout(o.restoreFocusTimeout);let N=cT(Sn);return rl(Sn,v),Te.innerParams.set(Sn,v),oT(Sn,N,v)}then(d){return t(Al,this).then(d)}finally(d){return t(Al,this).finally(d)}}let oT=(u,d,m)=>new Promise((v,N)=>{let G=pe=>{u.close({isDismissed:!0,dismiss:pe})};Dr.swalPromiseResolve.set(u,v),Dr.swalPromiseReject.set(u,N),d.confirmButton.onclick=()=>{Ts(u)},d.denyButton.onclick=()=>{yl(u)},d.cancelButton.onclick=()=>{Cs(u,G)},d.closeButton.onclick=()=>{G(St.close)},As(m,d,G),vs(o,m,G),fl(u,m),ZI(m),lT(o,m,G),uT(d,m),setTimeout(()=>{d.container.scrollTop=0})}),aT=(u,d)=>{let m=zI(u),v=Object.assign({},Je,d,m,u);return v.showClass=Object.assign({},Je.showClass,v.showClass),v.hideClass=Object.assign({},Je.hideClass,v.hideClass),v.animation===!1&&(v.showClass={backdrop:"swal2-noanimation"},v.hideClass={}),v},cT=u=>{let d={popup:x(),container:I(),actions:tn(),confirmButton:Nt(),denyButton:wt(),cancelButton:Er(),loader:Ir(),closeButton:Vo(),validationMessage:br(),progressSteps:Wn()};return Te.domCache.set(u,d),d},lT=(u,d,m)=>{let v=vn();Ke(v),d.timer&&(u.timeout=new qI(()=>{m("timer"),delete u.timeout},d.timer),d.timerProgressBar&&($e(v),bt(v,d,"timerProgressBar"),setTimeout(()=>{u.timeout&&u.timeout.running&&ms(d.timer)})))},uT=(u,d)=>{if(!d.toast){if(!Ie(d.allowEnterKey)){se("allowEnterKey"),fT();return}dT(u)||hT(u,d)||xr(-1,1)}},dT=u=>{let d=Array.from(u.popup.querySelectorAll("[autofocus]"));for(let m of d)if(m instanceof HTMLElement&&mt(m))return m.focus(),!0;return!1},hT=(u,d)=>d.focusDeny&&mt(u.denyButton)?(u.denyButton.focus(),!0):d.focusCancel&&mt(u.cancelButton)?(u.cancelButton.focus(),!0):d.focusConfirm&&mt(u.confirmButton)?(u.confirmButton.focus(),!0):!1,fT=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){let u=new Date,d=localStorage.getItem("swal-initiation");d?(u.getTime()-Date.parse(d))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";let m=document.createElement("audio");m.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",m.loop=!0,document.body.appendChild(m),setTimeout(()=>{m.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${u}`)}Ge.prototype.disableButtons=ra,Ge.prototype.enableButtons=Cn,Ge.prototype.getInput=Ai,Ge.prototype.disableInput=sa,Ge.prototype.enableInput=ia,Ge.prototype.hideLoading=Mr,Ge.prototype.disableLoading=Mr,Ge.prototype.showValidationMessage=oa,Ge.prototype.resetValidationMessage=Si,Ge.prototype.close=Rt,Ge.prototype.closePopup=Rt,Ge.prototype.closeModal=Rt,Ge.prototype.closeToast=Rt,Ge.prototype.rejectPromise=Yo,Ge.prototype.update=Pe,Ge.prototype._destroy=we,Object.assign(Ge,$I),Object.keys(Ft).forEach(u=>{Ge[u]=function(){return Sn&&Sn[u]?Sn[u](...arguments):null}}),Ge.DismissReason=St,Ge.version="11.14.5";let Sl=Ge;return Sl.default=Sl,Sl});typeof Hn<"u"&&Hn.Sweetalert2&&(Hn.swal=Hn.sweetAlert=Hn.Swal=Hn.SweetAlert=Hn.Sweetalert2);typeof document<"u"&&function(n,e){var t=n.createElement("style");if(n.getElementsByTagName("head")[0].appendChild(t),t.styleSheet)t.styleSheet.disabled||(t.styleSheet.cssText=e);else try{t.innerHTML=e}catch{t.innerText=e}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:hsl(0,0%,33%);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid hsl(0,0%,85%);border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:hsl(0,0%,94%);color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:rgb(249.95234375,205.965625,167.74765625);color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:rgb(156.7033492823,224.2822966507,246.2966507177);color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:rgb(200.8064516129,217.9677419355,225.1935483871);color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')});var va=class{},Ul=class{},er=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(c=>s.indexOf(c)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Kh=class{encodeKey(e){return Oy(e)}encodeValue(e){return Oy(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function gT(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,c]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],l=t.get(o)||[];l.push(c),t.set(o,l)}),t}var _T=/%(\d[a-f0-9])/gi,yT={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Oy(n){return encodeURIComponent(n).replace(_T,(e,t)=>yT[t]??e)}function Ll(n){return`${n}`}var Hr=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Kh,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=gT(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Ll):[Ll(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Ll(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Ll(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Qh=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function vT(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Ny(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function My(n){return typeof Blob<"u"&&n instanceof Blob}function Vy(n){return typeof FormData<"u"&&n instanceof FormData}function wT(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var ya=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(vT(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new er,this.context??=new Qh,!this.params)this.params=new Hr,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let c=t.indexOf("?"),l=c===-1?"?":c<t.length-1?"&":"";this.urlWithParams=t+l+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Ny(this.body)||My(this.body)||Vy(this.body)||wT(this.body)?this.body:this.body instanceof Hr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Vy(this.body)?null:My(this.body)?this.body.type||null:Ny(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Hr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,c=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,f=e.headers||this.headers,_=e.params||this.params,g=e.context??this.context;return e.setHeaders!==void 0&&(f=Object.keys(e.setHeaders).reduce((C,k)=>C.set(k,e.setHeaders[k]),f)),e.setParams&&(_=Object.keys(e.setParams).reduce((C,k)=>C.set(k,e.setParams[k]),_)),new n(t,r,o,{params:_,headers:f,context:g,reportProgress:l,responseType:i,withCredentials:c,transferCache:s})}},Wr=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Wr||{}),wa=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new er,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Bl=class n extends wa{constructor(e={}){super(e),this.type=Wr.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ba=class n extends wa{constructor(e={}){super(e),this.type=Wr.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Gr=class extends wa{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},By=200,bT=204;function Wh(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var ET=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof ya)s=t;else{let l;i.headers instanceof er?l=i.headers:l=new er(i.headers);let f;i.params&&(i.params instanceof Hr?f=i.params:f=new Hr({fromObject:i.params})),s=new ya(t,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:f,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let o=ae(s).pipe(Pi(l=>this.handler.handle(l)));if(t instanceof ya||i.observe==="events")return o;let c=o.pipe(Br(l=>l instanceof ba));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(he(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(he(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(he(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(he(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Hr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Wh(i,r))}post(t,r,i={}){return this.request("POST",t,Wh(i,r))}put(t,r,i={}){return this.request("PUT",t,Wh(i,r))}static{this.\u0275fac=function(r){return new(r||n)(Ce(va))}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac})}}return n})(),IT=/^\)\]\}',?\n/,TT="X-Request-URL";function Fy(n){if(n.url)return n.url;let e=TT.toLocaleLowerCase();return n.headers.get(e)}var CT=(()=>{class n{constructor(){this.fetchImpl=Z(Jh,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=Z(Ye)}handle(t){return new Lr(r=>{let i=new AbortController;return this.doRequest(t,i.signal,r).then(Yh,s=>r.error(new Gr({error:s}))),()=>i.abort()})}doRequest(t,r,i){return E(this,null,function*(){let s=this.createRequestInit(t),o;try{let k=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,H({signal:r},s)));AT(k),i.next({type:Wr.Sent}),o=yield k}catch(k){i.error(new Gr({error:k,status:k.status??0,statusText:k.statusText,url:t.urlWithParams,headers:k.headers}));return}let c=new er(o.headers),l=o.statusText,f=Fy(o)??t.urlWithParams,_=o.status,g=null;if(t.reportProgress&&i.next(new Bl({headers:c,status:_,statusText:l,url:f})),o.body){let k=o.headers.get("content-length"),F=[],U=o.body.getReader(),M=0,J,ee,W=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>E(this,null,function*(){for(;;){let{done:Ie,value:ue}=yield U.read();if(Ie)break;if(F.push(ue),M+=ue.length,t.reportProgress){ee=t.responseType==="text"?(ee??"")+(J??=new TextDecoder).decode(ue,{stream:!0}):void 0;let P=()=>i.next({type:Wr.DownloadProgress,total:k?+k:void 0,loaded:M,partialText:ee});W?W.run(P):P()}}}));let se=this.concatChunks(F,M);try{let Ie=o.headers.get("Content-Type")??"";g=this.parseBody(t,se,Ie)}catch(Ie){i.error(new Gr({error:Ie,headers:new er(o.headers),status:o.status,statusText:o.statusText,url:Fy(o)??t.urlWithParams}));return}}_===0&&(_=g?By:0),_>=200&&_<300?(i.next(new ba({body:g,headers:c,status:_,statusText:l,url:f})),i.complete()):i.error(new Gr({error:g,headers:c,status:_,statusText:l,url:f}))})}parseBody(t,r,i){switch(t.responseType){case"json":let s=new TextDecoder().decode(r).replace(IT,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){let r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((s,o)=>r[s]=o.join(",")),t.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let s=t.detectContentTypeHeader();s!==null&&(r["Content-Type"]=s)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i}}concatChunks(t,r){let i=new Uint8Array(r),s=0;for(let o of t)i.set(o,s),s+=o.length;return i}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac})}}return n})(),Jh=class{};function Yh(){}function AT(n){n.then(Yh,Yh)}function ST(n,e){return e(n)}function RT(n,e,t){return(r,i)=>cn(t,()=>e(r,s=>n(s,i)))}var jy=new me(""),PT=new me(""),xT=new me("",{providedIn:"root",factory:()=>!0});var Ly=(()=>{class n extends va{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=Z(Rl),this.contributeToStability=Z(xT)}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(jy),...this.injector.get(PT,[])]));this.chain=r.reduceRight((i,s)=>RT(i,s,this.injector),ST)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(xs(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||n)(Ce(Ul),Ce(Ds))}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac})}}return n})();var DT=/^\)\]\}',?\n/;function kT(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var Uy=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new Ne(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?gt(r.\u0275loadImpl()):ae(null)).pipe(Kt(()=>new Lr(s=>{let o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((U,M)=>o.setRequestHeader(U,M.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let U=t.detectContentTypeHeader();U!==null&&o.setRequestHeader("Content-Type",U)}if(t.responseType){let U=t.responseType.toLowerCase();o.responseType=U!=="json"?U:"text"}let c=t.serializeBody(),l=null,f=()=>{if(l!==null)return l;let U=o.statusText||"OK",M=new er(o.getAllResponseHeaders()),J=kT(o)||t.url;return l=new Bl({headers:M,status:o.status,statusText:U,url:J}),l},_=()=>{let{headers:U,status:M,statusText:J,url:ee}=f(),W=null;M!==bT&&(W=typeof o.response>"u"?o.responseText:o.response),M===0&&(M=W?By:0);let se=M>=200&&M<300;if(t.responseType==="json"&&typeof W=="string"){let Ie=W;W=W.replace(DT,"");try{W=W!==""?JSON.parse(W):null}catch(ue){W=Ie,se&&(se=!1,W={error:ue,text:W})}}se?(s.next(new ba({body:W,headers:U,status:M,statusText:J,url:ee||void 0})),s.complete()):s.error(new Gr({error:W,headers:U,status:M,statusText:J,url:ee||void 0}))},g=U=>{let{url:M}=f(),J=new Gr({error:U,status:o.status||0,statusText:o.statusText||"Unknown Error",url:M||void 0});s.error(J)},C=!1,k=U=>{C||(s.next(f()),C=!0);let M={type:Wr.DownloadProgress,loaded:U.loaded};U.lengthComputable&&(M.total=U.total),t.responseType==="text"&&o.responseText&&(M.partialText=o.responseText),s.next(M)},F=U=>{let M={type:Wr.UploadProgress,loaded:U.loaded};U.lengthComputable&&(M.total=U.total),s.next(M)};return o.addEventListener("load",_),o.addEventListener("error",g),o.addEventListener("timeout",g),o.addEventListener("abort",g),t.reportProgress&&(o.addEventListener("progress",k),c!==null&&o.upload&&o.upload.addEventListener("progress",F)),o.send(c),s.next({type:Wr.Sent}),()=>{o.removeEventListener("error",g),o.removeEventListener("abort",g),o.removeEventListener("load",_),o.removeEventListener("timeout",g),t.reportProgress&&(o.removeEventListener("progress",k),c!==null&&o.upload&&o.upload.removeEventListener("progress",F)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(Ce(Fl))}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac})}}return n})(),$y=new me(""),OT="XSRF-TOKEN",NT=new me("",{providedIn:"root",factory:()=>OT}),MT="X-XSRF-TOKEN",VT=new me("",{providedIn:"root",factory:()=>MT}),jl=class{},FT=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ml(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(Ce(Pt),Ce(Xn),Ce(NT))}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac})}}return n})();function LT(n,e){let t=n.url.toLowerCase();if(!Z($y)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=Z(jl).getToken(),i=Z(VT);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function qy(...n){let e=[ET,Uy,Ly,{provide:va,useExisting:Ly},{provide:Ul,useFactory:()=>Z(CT,{optional:!0})??Z(Uy)},{provide:jy,useValue:LT,multi:!0},{provide:$y,useValue:!0},{provide:jl,useClass:FT}];for(let t of n)e.push(...t.\u0275providers);return Ct(e)}var ef=class extends Py{constructor(){super(...arguments),this.supportsDOMEvents=!0}},tf=class n extends ef{static makeCurrent(){Ry(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=BT();return t==null?null:jT(t)}resetBaseElement(){Ea=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ml(document.cookie,e)}},Ea=null;function BT(){return Ea=Ea||document.querySelector("base"),Ea?Ea.getAttribute("href"):null}function jT(n){return new URL(n,document.baseURI).pathname}var $T=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac})}}return n})(),nf=new me(""),Hy=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new Ne(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(Ce(nf),Ce(Ye))}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac})}}return n})(),$l=class{constructor(e){this._doc=e}},Xh="ng-app-id",Wy=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Vl(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Xh}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(Xh),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Xh,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(Ce(Pt),Ce(Lh),Ce(Uh,8),Ce(Xn))}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac})}}return n})(),Zh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},sf=/%COMP%/g,Ky="%COMP%",qT=`_nghost-${Ky}`,zT=`_ngcontent-${Ky}`,GT=!0,HT=new me("",{providedIn:"root",factory:()=>GT});function WT(n){return zT.replace(sf,n)}function KT(n){return qT.replace(sf,n)}function Qy(n,e){return e.map(t=>t.replace(sf,n))}var ql=(()=>{class n{constructor(t,r,i,s,o,c,l,f=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=c,this.ngZone=l,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=Vl(c),this.defaultRenderer=new Ia(t,o,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ua.ShadowDom&&(r=ke(H({},r),{encapsulation:ua.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof zl?i.applyToHost(t):i instanceof Ta&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,c=this.ngZone,l=this.eventManager,f=this.sharedStylesHost,_=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case ua.Emulated:s=new zl(l,f,r,this.appId,_,o,c,g);break;case ua.ShadowDom:return new rf(l,f,t,r,o,c,this.nonce,g);default:s=new Ta(l,f,r,_,o,c,g);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(Ce(Hy),Ce(Wy),Ce(Lh),Ce(HT),Ce(Pt),Ce(Xn),Ce(Ye),Ce(Uh))}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac})}}return n})(),Ia=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Zh[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(zy(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(zy(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Ne(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=Zh[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Zh[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(da.DashCase|da.Important)?e.style.setProperty(t,r,i&da.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&da.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Os().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function zy(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var rf=class extends Ia{constructor(e,t,r,i,s,o,c,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=Qy(i.id,i.styles);for(let _ of f){let g=document.createElement("style");c&&g.setAttribute("nonce",c),g.textContent=_,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ta=class extends Ia{constructor(e,t,r,i,s,o,c,l){super(e,s,o,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?Qy(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},zl=class extends Ta{constructor(e,t,r,i,s,o,c,l){let f=i+"-"+r.id;super(e,t,r,s,o,c,l,f),this.contentAttr=WT(f),this.hostAttr=KT(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},QT=(()=>{class n extends $l{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(Ce(Pt))}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac})}}return n})(),Gy=["alt","control","meta","shift"],JT={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},YT={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},XT=(()=>{class n extends $l{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Os().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),o="code."),Gy.forEach(f=>{let _=r.indexOf(f);_>-1&&(r.splice(_,1),o+=f+".")}),o+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=JT[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Gy.forEach(o=>{if(o!==i){let c=YT[o];c(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(Ce(Pt))}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac})}}return n})();function Jy(n,e){return Sy(H({rootComponent:n},ZT(e)))}function ZT(n){return{appProviders:[...iC,...n?.providers??[]],platformProviders:rC}}function eC(){tf.makeCurrent()}function tC(){return new Fh}function nC(){return ly(document),document}var rC=[{provide:Xn,useValue:ky},{provide:uy,useValue:eC,multi:!0},{provide:Pt,useFactory:nC,deps:[]}];var iC=[{provide:ay,useValue:"root"},{provide:Fh,useFactory:tC,deps:[]},{provide:nf,useClass:QT,multi:!0,deps:[Pt,Ye,Xn]},{provide:nf,useClass:XT,multi:!0,deps:[Pt]},ql,Wy,Hy,{provide:Pl,useExisting:ql},{provide:Fl,useClass:$T,deps:[]},[]];var Yy=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(Ce(Pt))}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var fe="primary",Ba=Symbol("RouteTitle"),uf=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Bs(n){return new uf(n)}function oC(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],c=n[s];if(o[0]===":")i[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function aC(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!xn(n[t],e[t]))return!1;return!0}function xn(n,e){let t=n?df(n):void 0,r=e?df(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!sv(n[i],e[i]))return!1;return!0}function df(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function sv(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function ov(n){return n.length>0?n[n.length-1]:null}function Kr(n){return Y_(n)?n:kl(n)?gt(Promise.resolve(n)):ae(n)}var cC={exact:cv,subset:lv},av={exact:lC,subset:uC,ignored:()=>!0};function Xy(n,e,t){return cC[t.paths](n.root,e.root,t.matrixParams)&&av[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function lC(n,e){return xn(n,e)}function cv(n,e,t){if(!Ni(n.segments,e.segments)||!Wl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!cv(n.children[r],e.children[r],t))return!1;return!0}function uC(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>sv(n[t],e[t]))}function lv(n,e,t){return uv(n,e,e.segments,t)}function uv(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ni(i,t)||e.hasChildren()||!Wl(i,t,r))}else if(n.segments.length===t.length){if(!Ni(n.segments,t)||!Wl(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!lv(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Ni(n.segments,i)||!Wl(n.segments,i,r)||!n.children[fe]?!1:uv(n.children[fe],e,s,r)}}function Wl(n,e,t){return e.every((r,i)=>av[t](n[i].parameters,r.parameters))}var nr=class{constructor(e=new xe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Bs(this.queryParams),this._queryParamMap}toString(){return fC.serialize(this)}},xe=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Kl(this)}},Oi=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Bs(this.parameters),this._parameterMap}toString(){return hv(this)}};function dC(n,e){return Ni(n,e)&&n.every((t,r)=>xn(t.parameters,e[r].parameters))}function Ni(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function hC(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===fe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==fe&&(t=t.concat(e(i,r)))}),t}var Ff=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=_e({token:n,factory:()=>new Da,providedIn:"root"})}}return n})(),Da=class{parse(e){let t=new ff(e);return new nr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ca(e.root,!0)}`,r=gC(e.queryParams),i=typeof e.fragment=="string"?`#${pC(e.fragment)}`:"";return`${t}${r}${i}`}},fC=new Da;function Kl(n){return n.segments.map(e=>hv(e)).join("/")}function Ca(n,e){if(!n.hasChildren())return Kl(n);if(e){let t=n.children[fe]?Ca(n.children[fe],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==fe&&r.push(`${i}:${Ca(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=hC(n,(r,i)=>i===fe?[Ca(n.children[fe],!1)]:[`${i}:${Ca(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[fe]!=null?`${Kl(n)}/${t[0]}`:`${Kl(n)}/(${t.join("//")})`}}function dv(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Gl(n){return dv(n).replace(/%3B/gi,";")}function pC(n){return encodeURI(n)}function hf(n){return dv(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ql(n){return decodeURIComponent(n)}function Zy(n){return Ql(n.replace(/\+/g,"%20"))}function hv(n){return`${hf(n.path)}${mC(n.parameters)}`}function mC(n){return Object.entries(n).map(([e,t])=>`;${hf(e)}=${hf(t)}`).join("")}function gC(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Gl(t)}=${Gl(i)}`).join("&"):`${Gl(t)}=${Gl(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var _C=/^[^\/()?;#]+/;function of(n){let e=n.match(_C);return e?e[0]:""}var yC=/^[^\/()?;=#]+/;function vC(n){let e=n.match(yC);return e?e[0]:""}var wC=/^[^=?&#]+/;function bC(n){let e=n.match(wC);return e?e[0]:""}var EC=/^[^&#]+/;function IC(n){let e=n.match(EC);return e?e[0]:""}var ff=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[fe]=new xe(e,t)),r}parseSegment(){let e=of(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Ne(4009,!1);return this.capture(e),new Oi(Ql(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=vC(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=of(this.remaining);i&&(r=i,this.capture(r))}e[Ql(t)]=Ql(r)}parseQueryParam(e){let t=bC(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=IC(this.remaining);o&&(r=o,this.capture(r))}let i=Zy(t),s=Zy(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=of(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Ne(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=fe);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[fe]:new xe([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Ne(4011,!1)}};function fv(n){return n.segments.length>0?new xe([],{[fe]:n}):n}function pv(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=pv(i);if(r===fe&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new xe(n.segments,e);return TC(t)}function TC(n){if(n.numberOfChildren===1&&n.children[fe]){let e=n.children[fe];return new xe(n.segments.concat(e.segments),e.children)}return n}function Mi(n){return n instanceof nr}function CC(n,e,t=null,r=null){let i=mv(n);return gv(i,e,t,r)}function mv(n){let e;function t(s){let o={};for(let l of s.children){let f=t(l);o[l.outlet]=f}let c=new xe(s.url,o);return s===n&&(e=c),c}let r=t(n.root),i=fv(r);return e??i}function gv(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return af(i,i,i,t,r);let s=AC(e);if(s.toRoot())return af(i,i,new xe([],{}),t,r);let o=SC(s,i,n),c=o.processChildren?Ra(o.segmentGroup,o.index,s.commands):yv(o.segmentGroup,o.index,s.commands);return af(i,o.segmentGroup,c,t,r)}function Jl(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ka(n){return typeof n=="object"&&n!=null&&n.outlets}function af(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([l,f])=>{s[l]=Array.isArray(f)?f.map(_=>`${_}`):`${f}`});let o;n===e?o=t:o=_v(n,e,t);let c=fv(pv(o));return new nr(c,s,i)}function _v(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=_v(s,e,t)}),new xe(n.segments,r)}var Yl=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Jl(r[0]))throw new Ne(4003,!1);let i=r.find(ka);if(i&&i!==ov(r))throw new Ne(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function AC(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Yl(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,f])=>{c[l]=typeof f=="string"?f.split("/"):f}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new Yl(t,e,r)}var Fs=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function SC(n,e,t){if(n.isAbsolute)return new Fs(e,!0,0);if(!t)return new Fs(e,!1,NaN);if(t.parent===null)return new Fs(t,!0,0);let r=Jl(n.commands[0])?0:1,i=t.segments.length-1+r;return RC(t,i,n.numberOfDoubleDots)}function RC(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Ne(4005,!1);i=r.segments.length}return new Fs(r,!1,i-s)}function PC(n){return ka(n[0])?n[0].outlets:{[fe]:n}}function yv(n,e,t){if(n??=new xe([],{}),n.segments.length===0&&n.hasChildren())return Ra(n,e,t);let r=xC(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new xe(n.segments.slice(0,r.pathIndex),{});return s.children[fe]=new xe(n.segments.slice(r.pathIndex),n.children),Ra(s,0,i)}else return r.match&&i.length===0?new xe(n.segments,{}):r.match&&!n.hasChildren()?pf(n,e,t):r.match?Ra(n,0,i):pf(n,e,t)}function Ra(n,e,t){if(t.length===0)return new xe(n.segments,{});{let r=PC(t),i={};if(Object.keys(r).some(s=>s!==fe)&&n.children[fe]&&n.numberOfChildren===1&&n.children[fe].segments.length===0){let s=Ra(n.children[fe],e,t);return new xe(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=yv(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new xe(n.segments,i)}}function xC(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],c=t[r];if(ka(c))break;let l=`${c}`,f=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&f&&typeof f=="object"&&f.outlets===void 0){if(!tv(l,f,o))return s;r+=2}else{if(!tv(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function pf(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(ka(s)){let l=DC(s.outlets);return new xe(r,l)}if(i===0&&Jl(t[0])){let l=n.segments[e];r.push(new Oi(l.path,ev(t[0]))),i++;continue}let o=ka(s)?s.outlets[fe]:`${s}`,c=i<t.length-1?t[i+1]:null;o&&c&&Jl(c)?(r.push(new Oi(o,ev(c))),i+=2):(r.push(new Oi(o,{})),i++)}return new xe(r,{})}function DC(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=pf(new xe([],{}),0,r))}),e}function ev(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function tv(n,e,t){return n==t.path&&xn(e,t.parameters)}var Pa="imperative",_t=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(_t||{}),Xt=class{constructor(e,t){this.id=e,this.url=t}},Oa=class extends Xt{constructor(e,t,r="imperative",i=null){super(e,t),this.type=_t.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},rr=class extends Xt{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=_t.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ut=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ut||{}),mf=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(mf||{}),tr=class extends Xt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=_t.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Vi=class extends Xt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=_t.NavigationSkipped}},Na=class extends Xt{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=_t.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Xl=class extends Xt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=_t.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gf=class extends Xt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=_t.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_f=class extends Xt{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=_t.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},yf=class extends Xt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=_t.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vf=class extends Xt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=_t.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wf=class{constructor(e){this.route=e,this.type=_t.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},bf=class{constructor(e){this.route=e,this.type=_t.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ef=class{constructor(e){this.snapshot=e,this.type=_t.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},If=class{constructor(e){this.snapshot=e,this.type=_t.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tf=class{constructor(e){this.snapshot=e,this.type=_t.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cf=class{constructor(e){this.snapshot=e,this.type=_t.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ma=class{},js=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function kC(n,e){return n.providers&&!n._injector&&(n._injector=_y(n.providers,e,`Route: ${n.path}`)),n._injector??e}function dn(n){return n.outlet||fe}function OC(n,e){let t=n.filter(r=>dn(r)===e);return t.push(...n.filter(r=>dn(r)!==e)),t}function ja(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Af=class{get injector(){return ja(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new ou(this.rootInjector),this.attachRef=null}},ou=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Af(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(Ce(Ds))}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Zl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Sf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Sf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Rf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Rf(e,this._root).map(t=>t.value)}};function Sf(n,e){if(n===e.value)return e;for(let t of e.children){let r=Sf(n,t);if(r)return r}return null}function Rf(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Rf(n,t);if(r.length)return r.unshift(e),r}return[]}var Lt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Vs(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var eu=class extends Zl{constructor(e,t){super(e),this.snapshot=t,Lf(this,e)}toString(){return this.snapshot.toString()}};function vv(n){let e=NC(n),t=new Ht([new Oi("",{})]),r=new Ht({}),i=new Ht({}),s=new Ht({}),o=new Ht(""),c=new Fi(t,r,s,o,i,fe,n,e.root);return c.snapshot=e.root,new eu(new Lt(c,[]),e)}function NC(n){let e={},t={},r={},i="",s=new Ls([],e,r,i,t,fe,n,null,{});return new nu("",new Lt(s,[]))}var Fi=class{constructor(e,t,r,i,s,o,c,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(he(f=>f[Ba]))??ae(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(he(e=>Bs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(he(e=>Bs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function tu(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:H(H({},e.params),n.params),data:H(H({},e.data),n.data),resolve:H(H(H(H({},n.data),e.data),i?.data),n._resolvedData)}:r={params:H({},n.params),data:H({},n.data),resolve:H(H({},n.data),n._resolvedData??{})},i&&bv(i)&&(r.resolve[Ba]=i.title),r}var Ls=class{get title(){return this.data?.[Ba]}constructor(e,t,r,i,s,o,c,l,f){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=c,this.routeConfig=l,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Bs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Bs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},nu=class extends Zl{constructor(e,t){super(t),this.url=e,Lf(this,t)}toString(){return wv(this._root)}};function Lf(n,e){e.value._routerState=n,e.children.forEach(t=>Lf(n,t))}function wv(n){let e=n.children.length>0?` { ${n.children.map(wv).join(", ")} } `:"";return`${n.value}${e}`}function cf(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,xn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),xn(e.params,t.params)||n.paramsSubject.next(t.params),aC(e.url,t.url)||n.urlSubject.next(t.url),xn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Pf(n,e){let t=xn(n.params,e.params)&&dC(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Pf(n.parent,e.parent))}function bv(n){return typeof n.title=="string"||n.title===null}var Uf=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=fe,this.activateEvents=new Qt,this.deactivateEvents=new Qt,this.attachEvents=new Qt,this.detachEvents=new Qt,this.parentContexts=Z(ou),this.location=Z(py),this.changeDetector=Z(ks),this.inputBinder=Z(Bf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ne(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ne(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ne(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Ne(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new xf(t,c,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=He({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Jn]})}}return n})(),xf=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Fi?this.route:e===ou?this.childContexts:this.parent.get(e,t)}},Bf=new me("");function MC(n,e,t){let r=Va(n,e._root,t?t._root:void 0);return new eu(r,e)}function Va(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=VC(n,e,t);return new Lt(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>Va(n,c)),o}}let r=FC(e.value),i=e.children.map(s=>Va(n,s));return new Lt(r,i)}}function VC(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Va(n,r,i);return Va(n,r)})}function FC(n){return new Fi(new Ht(n.url),new Ht(n.params),new Ht(n.queryParams),new Ht(n.fragment),new Ht(n.data),n.outlet,n.component,n)}var Fa=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Ev="ngNavigationCancelingError";function ru(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Mi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Iv(!1,Ut.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function Iv(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Ev]=!0,t.cancellationCode=e,t}function LC(n){return Tv(n)&&Mi(n.url)}function Tv(n){return!!n&&n[Ev]}var UC=(n,e,t,r)=>he(i=>(new Df(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Df=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),cf(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Vs(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Vs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Vs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Vs(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Cf(s.value.snapshot))}),e.children.length&&this.forwardEvent(new If(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(cf(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),cf(c.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},iu=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Us=class{constructor(e,t){this.component=e,this.route=t}};function BC(n,e,t){let r=n._root,i=e?e._root:null;return Aa(r,i,t,[r.value])}function jC(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function qs(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!oy(n)?n:e.get(n):r}function Aa(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Vs(e);return n.children.forEach(o=>{$C(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>xa(c,t.getContext(o),i)),i}function $C(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=qC(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new iu(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Aa(n,e,c?c.children:null,r,i):Aa(n,e,t,r,i),l&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Us(c.outlet.component,o))}else o&&xa(e,c,i),i.canActivateChecks.push(new iu(r)),s.component?Aa(n,null,c?c.children:null,r,i):Aa(n,null,t,r,i);return i}function qC(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ni(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ni(n.url,e.url)||!xn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Pf(n,e)||!xn(n.queryParams,e.queryParams);case"paramsChange":default:return!Pf(n,e)}}function xa(n,e,t){let r=Vs(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?xa(o,e.children.getContext(s),t):xa(o,null,t):xa(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Us(e.outlet.component,i)):t.canDeactivateChecks.push(new Us(null,i)):t.canDeactivateChecks.push(new Us(null,i))}function $a(n){return typeof n=="function"}function zC(n){return typeof n=="boolean"}function GC(n){return n&&$a(n.canLoad)}function HC(n){return n&&$a(n.canActivate)}function WC(n){return n&&$a(n.canActivateChild)}function KC(n){return n&&$a(n.canDeactivate)}function QC(n){return n&&$a(n.canMatch)}function Cv(n){return n instanceof X_||n?.name==="EmptyError"}var Hl=Symbol("INITIAL_VALUE");function $s(){return Kt(n=>Dh(n.map(e=>e.pipe(Ps(1),iy(Hl)))).pipe(he(e=>{for(let t of e)if(t!==!0){if(t===Hl)return Hl;if(t===!1||JC(t))return t}return!0}),Br(e=>e!==Hl),Ps(1)))}function JC(n){return Mi(n)||n instanceof Fa}function YC(n,e){return Wt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?ae(ke(H({},t),{guardsResult:!0})):XC(o,r,i,n).pipe(Wt(c=>c&&zC(c)?ZC(r,s,n,e):ae(c)),he(c=>ke(H({},t),{guardsResult:c})))})}function XC(n,e,t,r){return gt(n).pipe(Wt(i=>iA(i.component,i.route,t,e,r)),jr(i=>i!==!0,!0))}function ZC(n,e,t,r){return gt(e).pipe(Pi(i=>Z_(tA(i.route.parent,r),eA(i.route,r),rA(n,i.path,t),nA(n,i.route,t))),jr(i=>i!==!0,!0))}function eA(n,e){return n!==null&&e&&e(new Tf(n)),ae(!0)}function tA(n,e){return n!==null&&e&&e(new Ef(n)),ae(!0)}function nA(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ae(!0);let i=r.map(s=>Oh(()=>{let o=ja(e)??t,c=qs(s,o),l=HC(c)?c.canActivate(e,n):cn(o,()=>c(e,n));return Kr(l).pipe(jr())}));return ae(i).pipe($s())}function rA(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>jC(o)).filter(o=>o!==null).map(o=>Oh(()=>{let c=o.guards.map(l=>{let f=ja(o.node)??t,_=qs(l,f),g=WC(_)?_.canActivateChild(r,n):cn(f,()=>_(r,n));return Kr(g).pipe(jr())});return ae(c).pipe($s())}));return ae(s).pipe($s())}function iA(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return ae(!0);let o=s.map(c=>{let l=ja(e)??i,f=qs(c,l),_=KC(f)?f.canDeactivate(n,e,t,r):cn(l,()=>f(n,e,t,r));return Kr(_).pipe(jr())});return ae(o).pipe($s())}function sA(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ae(!0);let s=i.map(o=>{let c=qs(o,n),l=GC(c)?c.canLoad(e,t):cn(n,()=>c(e,t));return Kr(l)});return ae(s).pipe($s(),Av(r))}function Av(n){return K_(st(e=>{if(typeof e!="boolean")throw ru(n,e)}),he(e=>e===!0))}function oA(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ae(!0);let s=i.map(o=>{let c=qs(o,n),l=QC(c)?c.canMatch(e,t):cn(n,()=>c(e,t));return Kr(l)});return ae(s).pipe($s(),Av(r))}var La=class{constructor(e){this.segmentGroup=e||null}},Ua=class extends Error{constructor(e){super(),this.urlTree=e}};function Ms(n){return la(new La(n))}function aA(n){return la(new Ne(4e3,!1))}function cA(n){return la(Iv(!1,Ut.GuardRejected))}var kf=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ae(r);if(i.numberOfChildren>1||!i.children[fe])return aA(`${e.redirectTo}`);i=i.children[fe]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let c=t,{queryParams:l,fragment:f,routeConfig:_,url:g,outlet:C,params:k,data:F,title:U}=i,M=cn(s,()=>c({params:k,data:F,queryParams:l,fragment:f,routeConfig:_,url:g,outlet:C,title:U}));if(M instanceof nr)throw new Ua(M);t=M}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Ua(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new nr(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);r[i]=t[c]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([c,l])=>{o[c]=this.createSegmentGroup(e,l,r,i)}),new xe(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Ne(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Of={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function lA(n,e,t,r,i){let s=Sv(n,e,t);return s.matched?(r=kC(e,r),oA(r,e,t,i).pipe(he(o=>o===!0?s:H({},Of)))):ae(s)}function Sv(n,e,t){if(e.path==="**")return uA(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?H({},Of):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||oC)(t,n,e);if(!i)return H({},Of);let s={};Object.entries(i.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let o=i.consumed.length>0?H(H({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function uA(n){return{matched:!0,parameters:n.length>0?ov(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function nv(n,e,t,r){return t.length>0&&fA(n,t,r)?{segmentGroup:new xe(e,hA(r,new xe(t,n.children))),slicedSegments:[]}:t.length===0&&pA(n,t,r)?{segmentGroup:new xe(n.segments,dA(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new xe(n.segments,n.children),slicedSegments:t}}function dA(n,e,t,r){let i={};for(let s of t)if(au(n,e,s)&&!r[dn(s)]){let o=new xe([],{});i[dn(s)]=o}return H(H({},r),i)}function hA(n,e){let t={};t[fe]=e;for(let r of n)if(r.path===""&&dn(r)!==fe){let i=new xe([],{});t[dn(r)]=i}return t}function fA(n,e,t){return t.some(r=>au(n,e,r)&&dn(r)!==fe)}function pA(n,e,t){return t.some(r=>au(n,e,r))}function au(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function mA(n,e,t){return e.length===0&&!n.children[t]}var Nf=class{};function gA(n,e,t,r,i,s,o="emptyOnly"){return new Mf(n,e,t,r,i,o,s).recognize()}var _A=31,Mf=class{constructor(e,t,r,i,s,o,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new kf(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Ne(4002,`'${e.segmentGroup}'`)}recognize(){let e=nv(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(he(({children:t,rootSnapshot:r})=>{let i=new Lt(r,t),s=new nu("",i),o=CC(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Ls([],Object.freeze({}),Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),fe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,fe,t).pipe(he(r=>({children:r,rootSnapshot:t})),Rs(r=>{if(r instanceof Ua)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof La?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(he(o=>o instanceof Lt?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return gt(s).pipe(Pi(o=>{let c=r.children[o],l=OC(t,o);return this.processSegmentGroup(e,l,c,o,i)}),ry((o,c)=>(o.push(...c),o)),Nh(null),ny(),Wt(o=>{if(o===null)return Ms(r);let c=Rv(o);return yA(c),ae(c)}))}processSegment(e,t,r,i,s,o,c){return gt(t).pipe(Pi(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,s,o,c).pipe(Rs(f=>{if(f instanceof La)return ae(null);throw f}))),jr(l=>!!l),Rs(l=>{if(Cv(l))return mA(r,i,s)?ae(new Nf):Ms(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,s,o,c,l){return dn(r)!==o&&(o===fe||!au(i,s,r))?Ms(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,l):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,l):Ms(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,c){let{matched:l,parameters:f,consumedSegments:_,positionalParamSegments:g,remainingSegments:C}=Sv(t,i,s);if(!l)return Ms(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>_A&&(this.allowRedirects=!1));let k=new Ls(s,f,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,rv(i),dn(i),i.component??i._loadedComponent??null,i,iv(i)),F=tu(k,c,this.paramsInheritanceStrategy);k.params=Object.freeze(F.params),k.data=Object.freeze(F.data);let U=this.applyRedirects.applyRedirectCommands(_,i.redirectTo,g,k,e);return this.applyRedirects.lineralizeSegments(i,U).pipe(Wt(M=>this.processSegment(e,r,t,M.concat(C),o,!1,c)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let c=lA(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),c.pipe(Kt(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Kt(({routes:f})=>{let _=r._loadedInjector??e,{parameters:g,consumedSegments:C,remainingSegments:k}=l,F=new Ls(C,g,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,rv(r),dn(r),r.component??r._loadedComponent??null,r,iv(r)),U=tu(F,o,this.paramsInheritanceStrategy);F.params=Object.freeze(U.params),F.data=Object.freeze(U.data);let{segmentGroup:M,slicedSegments:J}=nv(t,C,k,f);if(J.length===0&&M.hasChildren())return this.processChildren(_,f,M,F).pipe(he(W=>new Lt(F,W)));if(f.length===0&&J.length===0)return ae(new Lt(F,[]));let ee=dn(r)===s;return this.processSegment(_,f,M,J,ee?fe:s,!0,F).pipe(he(W=>new Lt(F,W instanceof Lt?[W]:[])))}))):Ms(t)))}getChildConfig(e,t,r){return t.children?ae({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ae({routes:t._loadedRoutes,injector:t._loadedInjector}):sA(e,t,r,this.urlSerializer).pipe(Wt(i=>i?this.configLoader.loadChildren(e,t).pipe(st(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):cA(t))):ae({routes:[],injector:e})}};function yA(n){n.sort((e,t)=>e.value.outlet===fe?-1:t.value.outlet===fe?1:e.value.outlet.localeCompare(t.value.outlet))}function vA(n){let e=n.value.routeConfig;return e&&e.path===""}function Rv(n){let e=[],t=new Set;for(let r of n){if(!vA(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=Rv(r.children);e.push(new Lt(r.value,i))}return e.filter(r=>!t.has(r))}function rv(n){return n.data||{}}function iv(n){return n.resolve||{}}function wA(n,e,t,r,i,s){return Wt(o=>gA(n,e,t,r,o.extractedUrl,i,s).pipe(he(({state:c,tree:l})=>ke(H({},o),{targetSnapshot:c,urlAfterRedirects:l}))))}function bA(n,e){return Wt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ae(t);let s=new Set(i.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let f of Pv(l))o.add(f);let c=0;return gt(o).pipe(Pi(l=>s.has(l)?EA(l,r,n,e):(l.data=tu(l,l.parent,n).resolve,ae(void 0))),st(()=>c++),Mh(1),Wt(l=>c===o.size?ae(t):Ur))})}function Pv(n){let e=n.children.map(t=>Pv(t)).flat();return[n,...e]}function EA(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!bv(i)&&(s[Ba]=i.title),IA(s,n,e,r).pipe(he(o=>(n._resolvedData=o,n.data=tu(n,n.parent,t).resolve,null)))}function IA(n,e,t,r){let i=df(n);if(i.length===0)return ae({});let s={};return gt(i).pipe(Wt(o=>TA(n[o],e,t,r).pipe(jr(),st(c=>{if(c instanceof Fa)throw ru(new Da,c);s[o]=c}))),Mh(1),ty(s),Rs(o=>Cv(o)?Ur:la(o)))}function TA(n,e,t,r){let i=ja(e)??r,s=qs(n,i),o=s.resolve?s.resolve(e,t):cn(i,()=>s(e,t));return Kr(o)}function lf(n){return Kt(e=>{let t=n(e);return t?gt(t).pipe(he(()=>e)):ae(e)})}var xv=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===fe);return r}getResolvedTitleForRoute(t){return t.data[Ba]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=_e({token:n,factory:()=>Z(CA),providedIn:"root"})}}return n})(),CA=(()=>{class n extends xv{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(Ce(Yy))}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),jf=new me("",{providedIn:"root",factory:()=>({})}),AA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ut({type:n,selectors:[["ng-component"]],standalone:!0,features:[dt],decls:1,vars:0,template:function(r,i){r&1&&oe(0,"router-outlet")},dependencies:[Uf],encapsulation:2})}}return n})();function $f(n){let e=n.children&&n.children.map($f),t=e?ke(H({},n),{children:e}):H({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==fe&&(t.component=AA),t}var qf=new me(""),SA=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Z(Gh)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ae(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Kr(t.loadComponent()).pipe(he(Dv),st(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),xs(()=>{this.componentLoaders.delete(t)})),i=new Sh(r,()=>new Rn).pipe(Ah());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ae({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=RA(r,this.compiler,t,this.onLoadEndListener).pipe(xs(()=>{this.childrenLoaders.delete(r)})),o=new Sh(s,()=>new Rn).pipe(Ah());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function RA(n,e,t,r){return Kr(n.loadChildren()).pipe(he(Dv),Wt(i=>i instanceof gy||Array.isArray(i)?ae(i):gt(e.compileModuleAsync(i))),he(i=>{r&&r(n);let s,o,c=!1;return Array.isArray(i)?(o=i,c=!0):(s=i.create(t).injector,o=s.get(qf,[],{optional:!0,self:!0}).flat()),{routes:o.map($f),injector:s}}))}function PA(n){return n&&typeof n=="object"&&"default"in n}function Dv(n){return PA(n)?n.default:n}var zf=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=_e({token:n,factory:()=>Z(xA),providedIn:"root"})}}return n})(),xA=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),DA=new me("");var kA=new me(""),OA=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Rn,this.transitionAbortSubject=new Rn,this.configLoader=Z(SA),this.environmentInjector=Z(Ds),this.urlSerializer=Z(Ff),this.rootContexts=Z(ou),this.location=Z(Nl),this.inputBindingEnabled=Z(Bf,{optional:!0})!==null,this.titleStrategy=Z(xv),this.options=Z(jf,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Z(zf),this.createViewTransition=Z(DA,{optional:!0}),this.navigationErrorHandler=Z(kA,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ae(void 0),this.rootComponentType=null;let t=i=>this.events.next(new wf(i)),r=i=>this.events.next(new bf(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ke(H(H({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Ht({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Pa,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Br(s=>s.id!==0),he(s=>ke(H({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Kt(s=>{let o=!1,c=!1;return ae(s).pipe(Kt(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Ut.SupersededByNewNavigation),Ur;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ke(H({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),_=l.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!f&&_!=="reload"){let g="";return this.events.next(new Vi(l.id,this.urlSerializer.serialize(l.rawUrl),g,mf.IgnoredSameUrlNavigation)),l.resolve(!1),Ur}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return ae(l).pipe(Kt(g=>{let C=this.transitions?.getValue();return this.events.next(new Oa(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),C!==this.transitions?.getValue()?Ur:Promise.resolve(g)}),wA(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),st(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=ke(H({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let C=new Xl(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(C)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:g,extractedUrl:C,source:k,restoredState:F,extras:U}=l,M=new Oa(g,this.urlSerializer.serialize(C),k,F);this.events.next(M);let J=vv(this.rootComponentType).snapshot;return this.currentTransition=s=ke(H({},l),{targetSnapshot:J,urlAfterRedirects:C,extras:ke(H({},U),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=C,ae(s)}else{let g="";return this.events.next(new Vi(l.id,this.urlSerializer.serialize(l.extractedUrl),g,mf.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Ur}}),st(l=>{let f=new gf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),he(l=>(this.currentTransition=s=ke(H({},l),{guards:BC(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),YC(this.environmentInjector,l=>this.events.next(l)),st(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw ru(this.urlSerializer,l.guardsResult);let f=new _f(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(f)}),Br(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Ut.GuardRejected),!1)),lf(l=>{if(l.guards.canActivateChecks.length)return ae(l).pipe(st(f=>{let _=new yf(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(_)}),Kt(f=>{let _=!1;return ae(f).pipe(bA(this.paramsInheritanceStrategy,this.environmentInjector),st({next:()=>_=!0,complete:()=>{_||this.cancelNavigationTransition(f,"",Ut.NoDataFromResolver)}}))}),st(f=>{let _=new vf(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(_)}))}),lf(l=>{let f=_=>{let g=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(_.routeConfig).pipe(st(C=>{_.component=C}),he(()=>{})));for(let C of _.children)g.push(...f(C));return g};return Dh(f(l.targetSnapshot.root)).pipe(Nh(null),Ps(1))}),lf(()=>this.afterPreactivation()),Kt(()=>{let{currentSnapshot:l,targetSnapshot:f}=s,_=this.createViewTransition?.(this.environmentInjector,l.root,f.root);return _?gt(_).pipe(he(()=>s)):ae(s)}),he(l=>{let f=MC(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=ke(H({},l),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,s}),st(()=>{this.events.next(new Ma)}),UC(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Ps(1),st({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new rr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),sy(this.transitionAbortSubject.pipe(st(l=>{throw l}))),xs(()=>{!o&&!c&&this.cancelNavigationTransition(s,"",Ut.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Rs(l=>{if(c=!0,Tv(l))this.events.next(new tr(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),LC(l)?this.events.next(new js(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let f=new Na(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let _=cn(this.environmentInjector,()=>this.navigationErrorHandler?.(f));if(_ instanceof Fa){let{message:g,cancellationCode:C}=ru(this.urlSerializer,_);this.events.next(new tr(s.id,this.urlSerializer.serialize(s.extractedUrl),g,C)),this.events.next(new js(_.redirectTo,_.navigationBehaviorOptions))}else{this.events.next(f);let g=t.errorHandler(l);s.resolve(!!g)}}catch(_){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(_)}}return Ur}))}))}cancelNavigationTransition(t,r,i){let s=new tr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function NA(n){return n!==Pa}var MA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=_e({token:n,factory:()=>Z(VA),providedIn:"root"})}}return n})(),Vf=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},VA=(()=>{class n extends Vf{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Yn(n)))(i||n)}})()}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),kv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=_e({token:n,factory:()=>Z(FA),providedIn:"root"})}}return n})(),FA=(()=>{class n extends kv{constructor(){super(...arguments),this.location=Z(Nl),this.urlSerializer=Z(Ff),this.options=Z(jf,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Z(zf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new nr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=vv(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Oa)this.stateMemento=this.createStateMemento();else if(t instanceof Vi)this.rawUrlTree=r.initialUrl;else if(t instanceof Xl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Ma?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof tr&&(t.code===Ut.GuardRejected||t.code===Ut.NoDataFromResolver)?this.restoreHistory(r):t instanceof Na?this.restoreHistory(r,!0):t instanceof rr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof nr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=H(H({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=H(H({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Yn(n)))(i||n)}})()}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Sa=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Sa||{});function LA(n,e){n.events.pipe(Br(t=>t instanceof rr||t instanceof tr||t instanceof Na||t instanceof Vi),he(t=>t instanceof rr||t instanceof Vi?Sa.COMPLETE:(t instanceof tr?t.code===Ut.Redirect||t.code===Ut.SupersededByNewNavigation:!1)?Sa.REDIRECTING:Sa.FAILED),Br(t=>t!==Sa.REDIRECTING),Ps(1)).subscribe(()=>{e()})}function UA(n){throw n}var BA={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},jA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Dt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=Z(Dl),this.stateManager=Z(kv),this.options=Z(jf,{optional:!0})||{},this.pendingTasks=Z(Rl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Z(OA),this.urlSerializer=Z(Ff),this.location=Z(Nl),this.urlHandlingStrategy=Z(zf),this._events=new Rn,this.errorHandler=this.options.errorHandler||UA,this.navigated=!1,this.routeReuseStrategy=Z(MA),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Z(qf,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Z(Bf,{optional:!0}),this.eventsSubscription=new W_,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof tr&&r.code!==Ut.Redirect&&r.code!==Ut.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof rr)this.navigated=!0;else if(r instanceof js){let o=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=H({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||NA(i.source)},o);this.scheduleNavigation(c,Pa,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}qA(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Pa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let l=H({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map($f),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:c,preserveFragment:l}=r,f=l?this.currentUrlTree.fragment:o,_=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":_=H(H({},this.currentUrlTree.queryParams),s);break;case"preserve":_=this.currentUrlTree.queryParams;break;default:_=s||null}_!==null&&(_=this.removeEmptyProps(_));let g;try{let C=i?i.snapshot:this.routerState.snapshot.root;g=mv(C)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),g=this.currentUrlTree.root}return gv(g,t,_,f??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Mi(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Pa,null,r)}navigate(t,r={skipLocationChange:!1}){return $A(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=H({},BA):r===!1?i=H({},jA):i=r,Mi(t))return Xy(this.currentUrlTree,t,i);let s=this.parseUrl(t);return Xy(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let c,l,f;o?(c=o.resolve,l=o.reject,f=o.promise):f=new Promise((g,C)=>{c=g,l=C});let _=this.pendingTasks.add();return LA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(_))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:l,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(g=>Promise.reject(g))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function $A(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Ne(4008,!1)}function qA(n){return!(n instanceof Ma)&&!(n instanceof js)}var su=(()=>{class n{constructor(t,r,i,s,o,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=c,this.href=null,this.onChanges=new Rn,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=t.events.subscribe(f=>{f instanceof rr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Mi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let c=this.urlTree;if(c===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:hy(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:Mi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(Y(Dt),Y(Fi),cy("tabindex"),Y(qr),Y($r),Y(Hh))}}static{this.\u0275dir=He({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&ne("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&xl("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ki],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ki],replaceUrl:[2,"replaceUrl","replaceUrl",ki],routerLink:"routerLink"},standalone:!0,features:[my,Jn]})}}return n})(),Ov=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,s,o){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=o,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Qt,this.routerEventsSubscription=t.events.subscribe(c=>{c instanceof rr&&this.update()})}ngAfterContentInit(){ae(this.links.changes,ae(null)).pipe(kh()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=gt(t).pipe(kh()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=zA(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let s=i.urlTree;return s?t.isActive(s,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static{this.\u0275fac=function(r){return new(r||n)(Y(Dt),Y($r),Y(qr),Y(ks),Y(su,8))}}static{this.\u0275dir=He({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(r&1&&yy(s,su,5),r&2){let o;vy(o=wy())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Jn]})}}return n})();function zA(n){return!!n.paths}var GA=new me("");function Nv(n,...e){return Ct([{provide:qf,multi:!0,useValue:n},[],{provide:Fi,useFactory:HA,deps:[Dt]},{provide:zh,multi:!0,useFactory:WA},e.map(t=>t.\u0275providers)])}function HA(n){return n.routerState.root}function WA(){let n=Z(ln);return e=>{let t=n.get(Ol);if(e!==t.components[0])return;let r=n.get(Dt),i=n.get(KA);n.get(QA)===1&&r.initialNavigation(),n.get(JA,null,Vh.Optional)?.setUpPreloading(),n.get(GA,null,Vh.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var KA=new me("",{factory:()=>new Rn}),QA=new me("",{providedIn:"root",factory:()=>1});var JA=new me("");var lu=class n{constructor(e){this.router=e}registrarse(){this.router.navigate(["registro"])}iniciarSesion(){this.router.navigate(["login"])}static \u0275fac=function(t){return new(t||n)(Y(Dt))};static \u0275cmp=ut({type:n,selectors:[["app-bienvenida"]],standalone:!0,features:[dt],decls:13,vars:0,consts:[[1,"wrapper"],[1,"welcome-section"],[1,"buttons"],[1,"register-btn",3,"click"],[1,"login-btn",3,"click"]],template:function(t,r){t&1&&(A(0,"div",0)(1,"div",1)(2,"h1"),O(3,"Bienvenido a Nuestro Centro M\xE9dico"),b(),A(4,"p"),O(5," Nos complace tenerte aqu\xED. "),oe(6,"br"),O(7," Reg\xEDstrate para acceder a nuestros servicios o inicia sesi\xF3n si ya tienes una cuenta. "),b(),A(8,"div",2)(9,"button",3),ne("click",function(){return r.registrarse()}),O(10,"Registrarse"),b(),A(11,"button",4),ne("click",function(){return r.iniciarSesion()}),O(12,"Iniciar Sesi\xF3n"),b()()()())},styles:['@charset "UTF-8";.wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;height:92.3vh;width:100vw;background-color:#292952;background-image:url("./media/background-O36KHK4D.jpg");background-size:cover;background-position:center;background-repeat:no-repeat;overflow:hidden}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0;height:100%;width:100%;overflow:hidden}.welcome-section[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;padding:40px;text-align:left;margin-top:-120px;margin-left:20px}.welcome-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3.2em;color:#333;margin-bottom:20px;max-width:45%}.welcome-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.9em;color:#666;margin-bottom:30px;max-width:40%}.buttons[_ngcontent-%COMP%]{margin-top:7px;display:flex;gap:50px}.register-btn[_ngcontent-%COMP%], .login-btn[_ngcontent-%COMP%]{padding:10px 20px;font-size:2.1em;border:none;border-radius:8px;cursor:pointer;transition:background-color .3s}.register-btn[_ngcontent-%COMP%]{background-color:#3262ff;color:#fff}.register-btn[_ngcontent-%COMP%]:hover{background-color:#134aff}.login-btn[_ngcontent-%COMP%]{background-color:#3262ff;color:#fff}.login-btn[_ngcontent-%COMP%]:hover{background-color:#134aff}']})};var zv=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(Y(qr),Y($r))}}static{this.\u0275dir=He({type:n})}}return n})(),vu=(()=>{class n extends zv{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Yn(n)))(i||n)}})()}static{this.\u0275dir=He({type:n,features:[Jt]})}}return n})(),Ws=new me("");var YA={provide:Ws,useExisting:Qn(()=>Yr),multi:!0};function XA(){let n=Os()?Os().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var ZA=new me(""),Yr=(()=>{class n extends zv{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!XA())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(Y(qr),Y($r),Y(ZA,8))}}static{this.\u0275dir=He({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ne("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Zn([YA]),Jt]})}}return n})();function Qr(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function Gv(n){return n!=null&&typeof n.length=="number"}var wu=new me(""),Yf=new me(""),eS=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,j=class{static min(e){return tS(e)}static max(e){return nS(e)}static required(e){return Hv(e)}static requiredTrue(e){return rS(e)}static email(e){return iS(e)}static minLength(e){return sS(e)}static maxLength(e){return oS(e)}static pattern(e){return aS(e)}static nullValidator(e){return du(e)}static compose(e){return Xv(e)}static composeAsync(e){return ew(e)}};function tS(n){return e=>{if(Qr(e.value)||Qr(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function nS(n){return e=>{if(Qr(e.value)||Qr(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function Hv(n){return Qr(n.value)?{required:!0}:null}function rS(n){return n.value===!0?null:{required:!0}}function iS(n){return Qr(n.value)||eS.test(n.value)?null:{email:!0}}function sS(n){return e=>Qr(e.value)||!Gv(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function oS(n){return e=>Gv(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function aS(n){if(!n)return du;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Qr(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function du(n){return null}function Wv(n){return n!=null}function Kv(n){return kl(n)?gt(n):n}function Qv(n){let e={};return n.forEach(t=>{e=t!=null?H(H({},e),t):e}),Object.keys(e).length===0?null:e}function Jv(n,e){return e.map(t=>t(n))}function cS(n){return!n.validate}function Yv(n){return n.map(e=>cS(e)?e:t=>e.validate(t))}function Xv(n){if(!n)return null;let e=n.filter(Wv);return e.length==0?null:function(t){return Qv(Jv(t,e))}}function Zv(n){return n!=null?Xv(Yv(n)):null}function ew(n){if(!n)return null;let e=n.filter(Wv);return e.length==0?null:function(t){let r=Jv(t,e).map(Kv);return ey(r).pipe(he(Qv))}}function tw(n){return n!=null?ew(Yv(n)):null}function Mv(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function nw(n){return n._rawValidators}function rw(n){return n._rawAsyncValidators}function Gf(n){return n?Array.isArray(n)?n:[n]:[]}function hu(n,e){return Array.isArray(n)?n.includes(e):n===e}function Vv(n,e){let t=Gf(e);return Gf(n).forEach(i=>{hu(t,i)||t.push(i)}),t}function Fv(n,e){return Gf(e).filter(t=>!hu(n,t))}var fu=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Zv(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=tw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ui=class extends fu{get formDirective(){return null}get path(){return null}},Bi=class extends fu{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},pu=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},lS={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},YM=ke(H({},lS),{"[class.ng-submitted]":"isSubmitted"}),Xr=(()=>{class n extends pu{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Y(Bi,2))}}static{this.\u0275dir=He({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&$h("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Jt]})}}return n})(),Ks=(()=>{class n extends pu{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Y(Ui,10))}}static{this.\u0275dir=He({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&$h("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Jt]})}}return n})();var qa="VALID",uu="INVALID",zs="PENDING",za="DISABLED",Jr=class{},mu=class extends Jr{constructor(e,t){super(),this.value=e,this.source=t}},Ga=class extends Jr{constructor(e,t){super(),this.pristine=e,this.source=t}},Ha=class extends Jr{constructor(e,t){super(),this.touched=e,this.source=t}},Gs=class extends Jr{constructor(e,t){super(),this.status=e,this.source=t}},Hf=class extends Jr{constructor(e){super(),this.source=e}},Wf=class extends Jr{constructor(e){super(),this.source=e}};function Xf(n){return(bu(n)?n.validators:n)||null}function uS(n){return Array.isArray(n)?Zv(n):n||null}function Zf(n,e){return(bu(e)?e.asyncValidators:n)||null}function dS(n){return Array.isArray(n)?tw(n):n||null}function bu(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function iw(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new Ne(1e3,"");if(!r[t])throw new Ne(1001,"")}function sw(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new Ne(1002,"")})}var Hs=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=_a(()=>this.statusReactive()),this.statusReactive=ha(void 0),this._pristine=_a(()=>this.pristineReactive()),this.pristineReactive=ha(!0),this._touched=_a(()=>this.touchedReactive()),this.touchedReactive=ha(!1),this._events=new Rn,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return zr(this.statusReactive)}set status(e){zr(()=>this.statusReactive.set(e))}get valid(){return this.status===qa}get invalid(){return this.status===uu}get pending(){return this.status==zs}get disabled(){return this.status===za}get enabled(){return this.status!==za}get pristine(){return zr(this.pristineReactive)}set pristine(e){zr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return zr(this.touchedReactive)}set touched(e){zr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Vv(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Vv(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Fv(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Fv(e,this._rawAsyncValidators))}hasValidator(e){return hu(this._rawValidators,e)}hasAsyncValidator(e){return hu(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ke(H({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ha(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ha(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ke(H({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ga(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ga(!0,r))}markAsPending(e={}){this.status=zs;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Gs(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ke(H({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=za,this.errors=null,this._forEachChild(i=>{i.disable(ke(H({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new mu(this.value,r)),this._events.next(new Gs(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ke(H({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=qa,this._forEachChild(r=>{r.enable(ke(H({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ke(H({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===qa||this.status===zs)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new mu(this.value,t)),this._events.next(new Gs(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ke(H({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?za:qa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=zs,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=Kv(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Gs(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Qt,this.statusChanges=new Qt}_calculateStatus(){return this._allControlsDisabled()?za:this.errors?uu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(zs)?zs:this._anyControlsHaveStatus(uu)?uu:qa}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Ga(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ha(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){bu(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=uS(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=dS(this._rawAsyncValidators)}},gu=class extends Hs{constructor(e,t,r){super(Xf(t),Zf(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){sw(this,!0,e),Object.keys(e).forEach(r=>{iw(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Kf=class extends gu{};var Eu=new me("CallSetDisabledState",{providedIn:"root",factory:()=>Iu}),Iu="always";function ow(n,e){return[...e.path,n]}function Qf(n,e,t=Iu){ep(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),fS(n,e),mS(n,e),pS(n,e),hS(n,e)}function Lv(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),yu(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function _u(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function hS(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function ep(n,e){let t=nw(n);e.validator!==null?n.setValidators(Mv(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=rw(n);e.asyncValidator!==null?n.setAsyncValidators(Mv(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();_u(e._rawValidators,i),_u(e._rawAsyncValidators,i)}function yu(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=nw(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let i=rw(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}let r=()=>{};return _u(e._rawValidators,r),_u(e._rawAsyncValidators,r),t}function fS(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&aw(n,e)})}function pS(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&aw(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function aw(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function mS(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function gS(n,e){n==null,ep(n,e)}function _S(n,e){return yu(n,e)}function cw(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function yS(n){return Object.getPrototypeOf(n.constructor)===vu}function vS(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function lw(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Yr?t=s:yS(s)?r=s:i=s}),i||r||t||null}function wS(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Uv(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Bv(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Wa=class extends Hs{constructor(e=null,t,r){super(Xf(t),Zf(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),bu(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Bv(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Uv(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Uv(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Bv(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var bS=n=>n instanceof Wa;var ES={provide:Bi,useExisting:Qn(()=>tp)},jv=Promise.resolve(),tp=(()=>{class n extends Bi{constructor(t,r,i,s,o,c){super(),this._changeDetectorRef=o,this.callSetDisabledState=c,this.control=new Wa,this._registered=!1,this.name="",this.update=new Qt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=lw(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),cw(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Qf(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){jv.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&ki(r);jv.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?ow(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(Y(Ui,9),Y(wu,10),Y(Yf,10),Y(Ws,10),Y(ks,8),Y(Eu,8))}}static{this.\u0275dir=He({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Zn([ES]),Jt,Jn]})}}return n})(),Qs=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=He({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),IS={provide:Ws,useExisting:Qn(()=>Ka),multi:!0},Ka=(()=>{class n extends vu{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Yn(n)))(i||n)}})()}static{this.\u0275dir=He({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&ne("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[Zn([IS]),Jt]})}}return n})();var uw=new me("");var TS={provide:Ui,useExisting:Qn(()=>ji)},ji=(()=>{class n extends Ui{get submitted(){return zr(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=_a(()=>this._submittedReactive()),this._submittedReactive=ha(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Qt,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(yu(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return Qf(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Lv(t.control||null,t,!1),wS(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),vS(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Hf(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new Wf(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(Lv(r||null,t),bS(i)&&(Qf(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);gS(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&_S(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ep(this.form,this),this._oldForm&&yu(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(r){return new(r||n)(Y(wu,10),Y(Yf,10),Y(Eu,8))}}static{this.\u0275dir=He({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&ne("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Zn([TS]),Jt,Jn]})}}return n})();var CS={provide:Bi,useExisting:Qn(()=>$i)},$i=(()=>{class n extends Bi{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new Qt,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=lw(this,s)}ngOnChanges(t){this._added||this._setUpControl(),cw(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return ow(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(Y(Ui,13),Y(wu,10),Y(Yf,10),Y(Ws,10),Y(uw,8))}}static{this.\u0275dir=He({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Zn([CS]),Jt,Jn]})}}return n})(),AS={provide:Ws,useExisting:Qn(()=>Tu),multi:!0};function dw(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function SS(n){return n.split(":")[0]}var Tu=(()=>{class n extends vu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=dw(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=SS(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Yn(n)))(i||n)}})()}static{this.\u0275dir=He({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&ne("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Zn([AS]),Jt]})}}return n})(),Cu=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(dw(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Y($r),Y(qr),Y(Tu,9))}}static{this.\u0275dir=He({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),RS={provide:Ws,useExisting:Qn(()=>hw),multi:!0};function $v(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function PS(n){return n.split(":")[0]}var hw=(()=>{class n extends vu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let c=0;c<o.length;c++){let l=o[c],f=this._getOptionValue(l.value);i.push(f)}}else{let o=r.options;for(let c=0;c<o.length;c++){let l=o[c];if(l.selected){let f=this._getOptionValue(l.value);i.push(f)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=PS(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Yn(n)))(i||n)}})()}static{this.\u0275dir=He({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&ne("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Zn([RS]),Jt]})}}return n})(),Au=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue($v(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue($v(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Y($r),Y(qr),Y(hw,9))}}static{this.\u0275dir=He({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();var xS=(()=>{class n{constructor(){this._validator=du}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):du,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=He({type:n,features:[Jn]})}}return n})();var DS={provide:wu,useExisting:Qn(()=>qi),multi:!0};var qi=(()=>{class n extends xS{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=ki,this.createValidator=t=>Hv}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Yn(n)))(i||n)}})()}static{this.\u0275dir=He({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&xl("required",i._enabled?"":null)},inputs:{required:"required"},features:[Zn([DS]),Jt]})}}return n})();var fw=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Di({type:n})}static{this.\u0275inj=xi({})}}return n})(),Jf=class extends Hs{constructor(e,t,r){super(Xf(t),Zf(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){sw(this,!1,e),e.forEach((r,i)=>{iw(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function qv(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Js=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),s={};return qv(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new gu(i,s)}record(t,r=null){let i=this._reduceControls(t);return new Kf(i,r)}control(t,r,i){let s={};return this.useNonNullable?(qv(r)?s=r:(s.validators=r,s.asyncValidators=i),new Wa(t,ke(H({},s),{nonNullable:!0}))):new Wa(t,r,i)}array(t,r,i){let s=t.map(o=>this._createControl(o));return new Jf(s,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Wa)return t;if(t instanceof Hs)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(r,i,s)}else return this.control(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ys=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Eu,useValue:t.callSetDisabledState??Iu}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Di({type:n})}static{this.\u0275inj=xi({imports:[fw]})}}return n})(),Zr=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:uw,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Eu,useValue:t.callSetDisabledState??Iu}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Di({type:n})}static{this.\u0275inj=xi({imports:[fw]})}}return n})();var mw=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},kS=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],c=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},gw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,c=o?n[i+1]:0,l=i+2<n.length,f=l?n[i+2]:0,_=s>>2,g=(s&3)<<4|c>>4,C=(c&15)<<2|f>>6,k=f&63;l||(k=64,o||(C=64)),r.push(t[_],t[g],t[C],t[k])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(mw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):kS(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let f=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||f==null||g==null)throw new rp;let C=s<<2|c>>4;if(r.push(C),f!==64){let k=c<<4&240|f>>2;if(r.push(k),g!==64){let F=f<<6&192|g;r.push(F)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},rp=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},OS=function(n){let e=mw(n);return gw.encodeByteArray(e,!0)},Qa=function(n){return OS(n).replace(/\./g,"")},sp=function(n){try{return gw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function NS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var MS=()=>NS().__FIREBASE_DEFAULTS__,VS=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},FS=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&sp(n[1]);return e&&JSON.parse(e)},Pu=()=>{try{return MS()||VS()||FS()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},op=n=>{var e,t;return(t=(e=Pu())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},xu=n=>{let e=op(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},ap=()=>{var n;return(n=Pu())===null||n===void 0?void 0:n.config},cp=n=>{var e;return(e=Pu())===null||e===void 0?void 0:e[`_${n}`]};var Ru=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Du(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Qa(JSON.stringify(t)),Qa(JSON.stringify(o)),""].join(".")}function ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _w(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ht())}function LS(){var n;let e=(n=Pu())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vw(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ww(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bw(){let n=ht();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Ew(){return!LS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lp(){try{return typeof indexedDB=="object"}catch{return!1}}function Iw(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var US="FirebaseError",At=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=US,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ir.prototype.create)}},ir=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?BS(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new At(i,c,r)}};function BS(n,e){return n.replace(jS,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var jS=/\{\$([^}]+)}/g;function Tw(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function zi(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(pw(s)&&pw(o)){if(!zi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function pw(n){return n!==null&&typeof n=="object"}function Ja(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xs(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Zs(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Cw(n,e){let t=new ip(n,e);return t.subscribe.bind(t)}var ip=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");$S(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=np),i.error===void 0&&(i.error=np),i.complete===void 0&&(i.complete=np);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function $S(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function np(){}var eV=4*60*60*1e3;function Me(n){return n&&n._delegate?n._delegate:n}var kt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Gi="[DEFAULT]";var up=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Ru;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zS(e))try{this.getOrInitializeService({instanceIdentifier:Gi})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Gi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return E(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Gi){return this.instances.has(e)}getOptions(e=Gi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qS(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Gi){return this.component?this.component.multipleInstances?e:Gi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function qS(n){return n===Gi?void 0:n}function zS(n){return n.instantiationMode==="EAGER"}var ku=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new up(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var GS=[],ye=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ye||{}),HS={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},WS=ye.INFO,KS={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},QS=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=KS[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ei=class{constructor(e){this.name=e,this._logLevel=WS,this._logHandler=QS,this._userLogHandler=null,GS.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}};var JS=(n,e)=>e.some(t=>n instanceof t),Aw,Sw;function YS(){return Aw||(Aw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XS(){return Sw||(Sw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Rw=new WeakMap,hp=new WeakMap,Pw=new WeakMap,dp=new WeakMap,pp=new WeakMap;function ZS(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Dn(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Rw.set(t,n)}).catch(()=>{}),pp.set(e,n),e}function eR(n){if(hp.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});hp.set(n,e)}var fp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return hp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Pw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Dn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function xw(n){fp=n(fp)}function tR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Ou(this),e,...t);return Pw.set(r,e.sort?e.sort():[e]),Dn(r)}:XS().includes(n)?function(...e){return n.apply(Ou(this),e),Dn(Rw.get(this))}:function(...e){return Dn(n.apply(Ou(this),e))}}function nR(n){return typeof n=="function"?tR(n):(n instanceof IDBTransaction&&eR(n),JS(n,YS())?new Proxy(n,fp):n)}function Dn(n){if(n instanceof IDBRequest)return ZS(n);if(dp.has(n))return dp.get(n);let e=nR(n);return e!==n&&(dp.set(n,e),pp.set(e,n)),e}var Ou=n=>pp.get(n);function kw(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),c=Dn(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Dn(o.result),l.oldVersion,l.newVersion,Dn(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}var rR=["get","getKey","getAll","getAllKeys","count"],iR=["put","add","delete","clear"],mp=new Map;function Dw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(mp.get(e))return mp.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=iR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||rR.includes(t)))return;let s=function(o,...c){return E(this,null,function*(){let l=this.transaction(o,i?"readwrite":"readonly"),f=l.store;return r&&(f=f.index(c.shift())),(yield Promise.all([f[t](...c),i&&l.done]))[0]})};return mp.set(e,s),s}xw(n=>ke(H({},n),{get:(e,t,r)=>Dw(e,t)||n.get(e,t,r),has:(e,t)=>!!Dw(e,t)||n.has(e,t)}));var _p=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(sR(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function sR(n){let e=n.getComponent();return e?.type==="VERSION"}var yp="@firebase/app",Ow="0.10.13";var sr=new ei("@firebase/app"),oR="@firebase/app-compat",aR="@firebase/analytics-compat",cR="@firebase/analytics",lR="@firebase/app-check-compat",uR="@firebase/app-check",dR="@firebase/auth",hR="@firebase/auth-compat",fR="@firebase/database",pR="@firebase/data-connect",mR="@firebase/database-compat",gR="@firebase/functions",_R="@firebase/functions-compat",yR="@firebase/installations",vR="@firebase/installations-compat",wR="@firebase/messaging",bR="@firebase/messaging-compat",ER="@firebase/performance",IR="@firebase/performance-compat",TR="@firebase/remote-config",CR="@firebase/remote-config-compat",AR="@firebase/storage",SR="@firebase/storage-compat",RR="@firebase/firestore",PR="@firebase/vertexai-preview",xR="@firebase/firestore-compat",DR="firebase",kR="10.14.1";var vp="[DEFAULT]",OR={[yp]:"fire-core",[oR]:"fire-core-compat",[cR]:"fire-analytics",[aR]:"fire-analytics-compat",[uR]:"fire-app-check",[lR]:"fire-app-check-compat",[dR]:"fire-auth",[hR]:"fire-auth-compat",[fR]:"fire-rtdb",[pR]:"fire-data-connect",[mR]:"fire-rtdb-compat",[gR]:"fire-fn",[_R]:"fire-fn-compat",[yR]:"fire-iid",[vR]:"fire-iid-compat",[wR]:"fire-fcm",[bR]:"fire-fcm-compat",[ER]:"fire-perf",[IR]:"fire-perf-compat",[TR]:"fire-rc",[CR]:"fire-rc-compat",[AR]:"fire-gcs",[SR]:"fire-gcs-compat",[RR]:"fire-fst",[xR]:"fire-fst-compat",[PR]:"fire-vertex","fire-js":"fire-js",[DR]:"fire-js-all"};var Ya=new Map,NR=new Map,wp=new Map;function Nw(n,e){try{n.container.addComponent(e)}catch(t){sr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function kn(n){let e=n.name;if(wp.has(e))return sr.debug(`There were multiple attempts to register component ${e}.`),!1;wp.set(e,n);for(let t of Ya.values())Nw(t,n);for(let t of NR.values())Nw(t,n);return!0}function Hi(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function hn(n){return n.settings!==void 0}var MR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ti=new ir("app","Firebase",MR);var bp=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new kt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ti.create("app-deleted",{appName:this._name})}};var On=kR;function Tp(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:vp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ti.create("bad-app-name",{appName:String(i)});if(t||(t=ap()),!t)throw ti.create("no-options");let s=Ya.get(i);if(s){if(zi(t,s.options)&&zi(r,s.config))return s;throw ti.create("duplicate-app",{appName:i})}let o=new ku(i);for(let l of wp.values())o.addComponent(l);let c=new bp(t,r,o);return Ya.set(i,c),c}function ni(n=vp){let e=Ya.get(n);if(!e&&n===vp&&ap())return Tp();if(!e)throw ti.create("no-app",{appName:n});return e}function Nu(){return Array.from(Ya.values())}function Le(n,e,t){var r;let i=(r=OR[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),sr.warn(c.join(" "));return}kn(new kt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var VR="firebase-heartbeat-database",FR=1,Xa="firebase-heartbeat-store",gp=null;function Lw(){return gp||(gp=kw(VR,FR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Xa)}catch(t){console.warn(t)}}}}).catch(n=>{throw ti.create("idb-open",{originalErrorMessage:n.message})})),gp}function LR(n){return E(this,null,function*(){try{let t=(yield Lw()).transaction(Xa),r=yield t.objectStore(Xa).get(Uw(n));return yield t.done,r}catch(e){if(e instanceof At)sr.warn(e.message);else{let t=ti.create("idb-get",{originalErrorMessage:e?.message});sr.warn(t.message)}}})}function Mw(n,e){return E(this,null,function*(){try{let r=(yield Lw()).transaction(Xa,"readwrite");yield r.objectStore(Xa).put(e,Uw(n)),yield r.done}catch(t){if(t instanceof At)sr.warn(t.message);else{let r=ti.create("idb-set",{originalErrorMessage:t?.message});sr.warn(r.message)}}})}function Uw(n){return`${n.name}!${n.options.appId}`}var UR=1024,BR=30*24*60*60*1e3,Ep=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Ip(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return E(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Vw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=BR}),this._storage.overwrite(this._heartbeatsCache))}catch(r){sr.warn(r)}})}getHeartbeatsHeader(){return E(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Vw(),{heartbeatsToSend:r,unsentEntries:i}=jR(this._heartbeatsCache.heartbeats),s=Qa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return sr.warn(t),""}})}};function Vw(){return new Date().toISOString().substring(0,10)}function jR(n,e=UR){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Fw(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Fw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Ip=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return E(this,null,function*(){return lp()?Iw().then(()=>!0).catch(()=>!1):!1})}read(){return E(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield LR(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Mw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Mw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Fw(n){return Qa(JSON.stringify({version:2,heartbeats:n})).length}function $R(n){kn(new kt("platform-logger",e=>new _p(e),"PRIVATE")),kn(new kt("heartbeat",e=>new Ep(e),"PRIVATE")),Le(yp,Ow,n),Le(yp,Ow,"esm2017"),Le("fire-js","")}$R("");var qR="firebase",zR="10.14.1";Le(qR,zR,"app");var or=new ga("ANGULARFIRE2_VERSION");function to(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ki=(n,e)=>{let t=e?[e]:Nu(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},ri=class{constructor(){return Ki(GR)}},GR="app-check";function eo(){}var Mu=class{zone;delegate;constructor(e,t=J_){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},Cp=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",eo,{},eo,eo)),t.pipe(st({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ii=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Mu(Zone.current)),this.insideAngular=t.run(()=>new Mu(Zone.current,Q_)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Ce(Ye))};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Vu(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function HR(n){return Vu().ngZone.runOutsideAngular(()=>n())}function Wi(n){return Vu().ngZone.run(()=>n())}function WR(n){return KR(Vu())(n)}function KR(n){return function(t){return t=t.lift(new Cp(n.ngZone)),t.pipe(xh(n.outsideAngular),Ph(n.insideAngular))}}var QR=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Wi(()=>n.apply(void 0,r))},Xe=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=Wi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",eo,{},eo,eo))),r[s]=QR(r[s],t));let i=HR(()=>n.apply(this,r));if(!e)if(i instanceof Lr){let s=Vu();return i.pipe(xh(s.outsideAngular),Ph(s.insideAngular))}else return Wi(()=>i);return i instanceof Lr?i.pipe(WR):i instanceof Promise?Wi(()=>new Promise((s,o)=>i.then(c=>Wi(()=>s(c)),c=>Wi(()=>o(c))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Wi(()=>i)};var fn=class{constructor(e){return e}},ar=class{constructor(){return Nu()}};function JR(n){return n&&n.length===1?n[0]:new fn(ni())}var Ap=new me("angularfire2._apps"),YR={provide:fn,useFactory:JR,deps:[[new ot,Ap]]},XR={provide:ar,deps:[[new ot,Ap]]};function ZR(n){return(e,t)=>{let r=t.get(Xn);Le("angularfire",or.full,"core"),Le("angularfire",or.full,"app"),Le("angular",Cy.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new fn(i)}}function Bw(n,...e){return Ct([YR,XR,{provide:Ap,useFactory:ZR(n),multi:!0,deps:[Ye,ln,ii,...e]}])}var jw=Xe(Tp,!0);function i0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var s0=i0,o0=new ir("auth","Firebase",i0());var $u=new ei("@firebase/auth");function eP(n,...e){$u.logLevel<=ye.WARN&&$u.warn(`Auth (${On}): ${n}`,...e)}function Lu(n,...e){$u.logLevel<=ye.ERROR&&$u.error(`Auth (${On}): ${n}`,...e)}function Mn(n,...e){throw Qp(n,...e)}function Qi(n,...e){return Qp(n,...e)}function a0(n,e,t){let r=Object.assign(Object.assign({},s0()),{[e]:t});return new ir("auth","Firebase",r).create(e,{appName:n.name})}function ur(n){return a0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qp(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return o0.create(n,...e)}function ie(n,e,...t){if(!n)throw Qp(e,...t)}function cr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Lu(e),new Error(e)}function oi(n,e){n||cr(e)}function xp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function tP(){return $w()==="http:"||$w()==="https:"}function $w(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function nP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tP()||vw()||"connection"in navigator)?navigator.onLine:!0}function rP(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ji=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,oi(t>e,"Short delay should be less than long delay!"),this.isMobile=_w()||ww()}get(){return nP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Jp(n,e){oi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var qu=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var iP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var sP=new Ji(3e4,6e4);function dr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function hr(s,o,c,l){return E(this,arguments,function*(n,e,t,r,i={}){return c0(n,i,()=>E(this,null,function*(){let f={},_={};r&&(e==="GET"?_=r:f={body:JSON.stringify(r)});let g=Ja(Object.assign({key:n.config.apiKey},_)).slice(1),C=yield n._getAdditionalHeaders();C["Content-Type"]="application/json",n.languageCode&&(C["X-Firebase-Locale"]=n.languageCode);let k=Object.assign({method:e,headers:C},f);return yw()||(k.referrerPolicy="no-referrer"),qu.fetch()(l0(n,n.config.apiHost,t,g),k)}))})}function c0(n,e,t){return E(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},iP),e);try{let i=new Dp(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Fu(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[l,f]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fu(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Fu(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Fu(n,"user-disabled",o);let _=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw a0(n,_,f);Mn(n,_)}}catch(i){if(i instanceof At)throw i;Mn(n,"network-request-failed",{message:String(i)})}})}function oc(s,o,c,l){return E(this,arguments,function*(n,e,t,r,i={}){let f=yield hr(n,e,t,r,i);return"mfaPendingCredential"in f&&Mn(n,"multi-factor-auth-required",{_serverResponse:f}),f})}function l0(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?Jp(n.config,i):`${n.config.apiScheme}://${i}`}function oP(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Dp=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Qi(this.auth,"network-request-failed")),sP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Fu(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Qi(n,e,r);return i.customData._tokenResponse=t,i}function qw(n){return n!==void 0&&n.enterprise!==void 0}var kp=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return oP(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function aP(n,e){return E(this,null,function*(){return hr(n,"GET","/v2/recaptchaConfig",dr(n,e))})}function cP(n,e){return E(this,null,function*(){return hr(n,"POST","/v1/accounts:delete",e)})}function u0(n,e){return E(this,null,function*(){return hr(n,"POST","/v1/accounts:lookup",e)})}function Za(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Yp(n,e=!1){return E(this,null,function*(){let t=Me(n),r=yield t.getIdToken(e),i=Xp(r);ie(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Za(Sp(i.auth_time)),issuedAtTime:Za(Sp(i.iat)),expirationTime:Za(Sp(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Sp(n){return Number(n)*1e3}function Xp(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Lu("JWT malformed, contained fewer than 3 sections"),null;try{let i=sp(t);return i?JSON.parse(i):(Lu("Failed to decode base64 JWT payload"),null)}catch(i){return Lu("Caught error parsing JWT payload as JSON",i?.toString()),null}}function zw(n){let e=Xp(n);return ie(e,"internal-error"),ie(typeof e.exp<"u","internal-error"),ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function tc(n,e,t=!1){return E(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof At&&lP(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function lP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Op=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>E(this,null,function*(){yield this.iteration()}),t)}iteration(){return E(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var nc=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Za(this.lastLoginAt),this.creationTime=Za(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function zu(n){return E(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield tc(n,u0(t,{idToken:r}));ie(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?d0(s.providerUserInfo):[],c=uP(n.providerData,o),l=n.isAnonymous,f=!(n.email&&s.passwordHash)&&!c?.length,_=l?f:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new nc(s.createdAt,s.lastLoginAt),isAnonymous:_};Object.assign(n,g)})}function Zp(n){return E(this,null,function*(){let e=Me(n);yield zu(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function uP(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function d0(n){return n.map(e=>{var{providerId:t}=e,r=Rh(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function dP(n,e){return E(this,null,function*(){let t=yield c0(n,{},()=>E(this,null,function*(){let r=Ja({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=l0(n,i,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",qu.fetch()(o,{method:"POST",headers:c,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function hP(n,e){return E(this,null,function*(){return hr(n,"POST","/v2/accounts:revokeToken",dr(n,e))})}var ec=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ie(e.idToken,"internal-error"),ie(typeof e.idToken<"u","internal-error"),ie(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ie(e.length!==0,"internal-error");let t=zw(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return E(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return E(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield dP(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(ie(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ie(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ie(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return cr("not implemented")}};function si(n,e){ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var no=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Rh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Op(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new nc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return E(this,null,function*(){let t=yield tc(this,this.stsTokenManager.getToken(this.auth,e));return ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Yp(this,e)}reload(){return Zp(this)}_assign(e){this!==e&&(ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return E(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield zu(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return E(this,null,function*(){if(hn(this.auth.app))return Promise.reject(ur(this.auth));let e=yield this.getIdToken();return yield tc(this,cP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,c,l,f,_;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,C=(i=t.email)!==null&&i!==void 0?i:void 0,k=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,F=(o=t.photoURL)!==null&&o!==void 0?o:void 0,U=(c=t.tenantId)!==null&&c!==void 0?c:void 0,M=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,J=(f=t.createdAt)!==null&&f!==void 0?f:void 0,ee=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:W,emailVerified:se,isAnonymous:Ie,providerData:ue,stsTokenManager:P}=t;ie(W&&P,e,"internal-error");let w=ec.fromJSON(this.name,P);ie(typeof W=="string",e,"internal-error"),si(g,e.name),si(C,e.name),ie(typeof se=="boolean",e,"internal-error"),ie(typeof Ie=="boolean",e,"internal-error"),si(k,e.name),si(F,e.name),si(U,e.name),si(M,e.name),si(J,e.name),si(ee,e.name);let I=new n({uid:W,auth:e,email:C,emailVerified:se,displayName:g,isAnonymous:Ie,photoURL:F,phoneNumber:k,tenantId:U,stsTokenManager:w,createdAt:J,lastLoginAt:ee});return ue&&Array.isArray(ue)&&(I.providerData=ue.map(S=>Object.assign({},S))),M&&(I._redirectEventId=M),I}static _fromIdTokenResponse(e,t,r=!1){return E(this,null,function*(){let i=new ec;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield zu(s),s})}static _fromGetAccountInfoResponse(e,t,r){return E(this,null,function*(){let i=t.users[0];ie(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?d0(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new ec;c.updateFromIdToken(r);let l=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new nc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,f),l})}};var Gw=new Map;function lr(n){oi(n instanceof Function,"Expected a class definition");let e=Gw.get(n);return e?(oi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Gw.set(n,e),e)}var fP=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return E(this,null,function*(){return!0})}_set(t,r){return E(this,null,function*(){this.storage[t]=r})}_get(t){return E(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return E(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Np=fP;function Uu(n,e,t){return`firebase:${n}:${e}:${t}`}var Gu=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Uu(this.userKey,i.apiKey,s),this.fullPersistenceKey=Uu("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return E(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?no._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return E(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return E(this,null,function*(){if(!t.length)return new n(lr(Np),e,r);let i=(yield Promise.all(t.map(f=>E(this,null,function*(){if(yield f._isAvailable())return f})))).filter(f=>f),s=i[0]||lr(Np),o=Uu(r,e.config.apiKey,e.name),c=null;for(let f of t)try{let _=yield f._get(o);if(_){let g=no._fromJSON(e,_);f!==s&&(c=g),s=f;break}}catch{}let l=i.filter(f=>f._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new n(s,e,r):(s=l[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(f=>E(this,null,function*(){if(f!==s)try{yield f._remove(o)}catch{}}))),new n(s,e,r))})}};function Hw(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(m0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(h0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_0(e))return"Blackberry";if(y0(e))return"Webos";if(f0(e))return"Safari";if((e.includes("chrome/")||p0(e))&&!e.includes("edge/"))return"Chrome";if(g0(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function h0(n=ht()){return/firefox\//i.test(n)}function f0(n=ht()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function p0(n=ht()){return/crios\//i.test(n)}function m0(n=ht()){return/iemobile/i.test(n)}function g0(n=ht()){return/android/i.test(n)}function _0(n=ht()){return/blackberry/i.test(n)}function y0(n=ht()){return/webos/i.test(n)}function em(n=ht()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function pP(n=ht()){var e;return em(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function mP(){return bw()&&document.documentMode===10}function v0(n=ht()){return em(n)||g0(n)||y0(n)||_0(n)||/windows phone/i.test(n)||m0(n)}function w0(n,e=[]){let t;switch(n){case"Browser":t=Hw(ht());break;case"Worker":t=`${Hw(ht())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${On}/${r}`}var Mp=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,c)=>{try{let l=e(s);o(l)}catch(l){c(l)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return E(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function gP(t){return E(this,arguments,function*(n,e={}){return hr(n,"GET","/v2/passwordPolicy",dr(n,e))})}var _P=6,Vp=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:_P,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Fp=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hu(this),this.idTokenSubscription=new Hu(this),this.beforeStateQueue=new Mp(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=o0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=lr(t)),this._initializationPromise=this.queue(()=>E(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Gu.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return E(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return E(this,null,function*(){try{let t=yield u0(this,{idToken:e}),r=yield no._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return E(this,null,function*(){var t;if(hn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!o||o===c)&&l?.user&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ie(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return E(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return E(this,null,function*(){try{yield zu(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=rP()}_delete(){return E(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return E(this,null,function*(){if(hn(this.app))return Promise.reject(ur(this));let t=e?Me(e):null;return t&&ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return E(this,null,function*(){if(!this._deleted)return e&&ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>E(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return E(this,null,function*(){return hn(this.app)?Promise.reject(ur(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return hn(this.app)?Promise.reject(ur(this)):this.queue(()=>E(this,null,function*(){yield this.assertedPersistence.setPersistence(lr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return E(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return E(this,null,function*(){let e=yield gP(this),t=new Vp(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ir("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return E(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield hP(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return E(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return E(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&lr(e)||this._popupRedirectResolver;ie(t,this,"argument-error"),this.redirectPersistenceManager=yield Gu.create(this,[lr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return E(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>E(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return E(this,null,function*(){if(e===this.currentUser)return this.queue(()=>E(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{let l=e.addObserver(t);return()=>{o=!0,l()}}}directlySetCurrentUser(e){return E(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=w0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return E(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return E(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&eP(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Xi(n){return Me(n)}var Hu=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Cw(t=>this.observer=t)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Zu={loadJS(){return E(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yP(n){Zu=n}function b0(n){return Zu.loadJS(n)}function vP(){return Zu.recaptchaEnterpriseScript}function wP(){return Zu.gapiScript}function E0(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var bP="recaptcha-enterprise",EP="NO_RECAPTCHA",Lp=class{constructor(e){this.type=bP,this.auth=Xi(e)}verify(e="verify",t=!1){return E(this,null,function*(){function r(s){return E(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,c)=>E(this,null,function*(){aP(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let f=new kp(l);return s.tenantId==null?s._agentRecaptchaConfig=f:s._tenantRecaptchaConfigs[s.tenantId]=f,o(f.siteKey)}}).catch(l=>{c(l)})}))})}function i(s,o,c){let l=window.grecaptcha;qw(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(f=>{o(f)}).catch(()=>{o(EP)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(c=>{if(!t&&qw(window.grecaptcha))i(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=vP();l.length!==0&&(l+=c),b0(l).then(()=>{i(c,s,o)}).catch(f=>{o(f)})}}).catch(c=>{o(c)})})})}};function Ww(n,e,t,r=!1){return E(this,null,function*(){let i=new Lp(n),s;try{s=yield i.verify(t)}catch{s=yield i.verify(t,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function Up(n,e,t,r){return E(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield Ww(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(s=>E(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield Ww(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)}))})}function tm(n,e){let t=Hi(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(zi(s,e??{}))return i;Mn(i,"already-initialized")}return t.initialize({options:e})}function IP(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(lr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function nm(n,e,t){let r=Xi(n);ie(r._canInitEmulator,r,"emulator-config-failed"),ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=I0(e),{host:o,port:c}=TP(e),l=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||CP()}function I0(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function TP(n){let e=I0(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Kw(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:Kw(o)}}}function Kw(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function CP(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var rc=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return cr("not implemented")}_getIdTokenResponse(e){return cr("not implemented")}_linkToIdToken(e,t){return cr("not implemented")}_getReauthenticationResolver(e){return cr("not implemented")}};function AP(n,e){return E(this,null,function*(){return hr(n,"POST","/v1/accounts:signUp",e)})}function SP(n,e){return E(this,null,function*(){return oc(n,"POST","/v1/accounts:signInWithPassword",dr(n,e))})}function RP(n,e){return E(this,null,function*(){return hr(n,"POST","/v1/accounts:sendOobCode",dr(n,e))})}function PP(n,e){return E(this,null,function*(){return RP(n,e)})}function xP(n,e){return E(this,null,function*(){return oc(n,"POST","/v1/accounts:signInWithEmailLink",dr(n,e))})}function DP(n,e){return E(this,null,function*(){return oc(n,"POST","/v1/accounts:signInWithEmailLink",dr(n,e))})}var ic=class n extends rc{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return E(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Up(e,t,"signInWithPassword",SP);case"emailLink":return xP(e,{email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}})}_linkToIdToken(e,t){return E(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Up(e,r,"signUpPassword",AP);case"emailLink":return DP(e,{idToken:t,email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Rp(n,e){return E(this,null,function*(){return oc(n,"POST","/v1/accounts:signInWithIdp",dr(n,e))})}function kP(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function OP(n){let e=Xs(Zs(n)).link,t=e?Xs(Zs(e)).deep_link_id:null,r=Xs(Zs(n)).deep_link_id;return(r?Xs(Zs(r)).link:null)||r||t||e||n}var Wu=class n{constructor(e){var t,r,i,s,o,c;let l=Xs(Zs(e)),f=(t=l.apiKey)!==null&&t!==void 0?t:null,_=(r=l.oobCode)!==null&&r!==void 0?r:null,g=kP((i=l.mode)!==null&&i!==void 0?i:null);ie(f&&_&&g,"argument-error"),this.apiKey=f,this.operation=g,this.code=_,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=l.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let t=OP(e);try{return new n(t)}catch{return null}}};var T0=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return ic._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Wu.parseLink(r);return ie(i,"argument-error"),ic._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Ku=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Bp=class extends Ku{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function NP(n,e){return E(this,null,function*(){return oc(n,"POST","/v1/accounts:signUp",dr(n,e))})}var ro=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return E(this,null,function*(){let s=yield no._fromIdTokenResponse(e,r,i),o=Qw(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return E(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Qw(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function Qw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var jp=class n extends At{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function C0(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?jp._fromErrorAndOperation(n,s,e,r):s})}function MP(n,e,t=!1){return E(this,null,function*(){let r=yield tc(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return ro._forOperation(n,"link",r)})}function VP(n,e,t=!1){return E(this,null,function*(){let{auth:r}=n;if(hn(r.app))return Promise.reject(ur(r));let i="reauthenticate";try{let s=yield tc(n,C0(r,i,e,n),t);ie(s.idToken,r,"internal-error");let o=Xp(s.idToken);ie(o,r,"internal-error");let{sub:c}=o;return ie(n.uid===c,r,"user-mismatch"),ro._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Mn(r,"user-mismatch"),s}})}function A0(n,e,t=!1){return E(this,null,function*(){if(hn(n.app))return Promise.reject(ur(n));let r="signIn",i=yield C0(n,r,e),s=yield ro._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function rm(n,e){return E(this,null,function*(){return A0(Xi(n),e)})}function FP(n,e,t){var r;ie(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),ie(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(ie(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(ie(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function S0(n){return E(this,null,function*(){let e=Xi(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function im(n,e,t){return E(this,null,function*(){if(hn(n.app))return Promise.reject(ur(n));let r=Xi(n),o=yield Up(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",NP).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&S0(n),l}),c=yield ro._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(c.user),c})}function sm(n,e,t){return hn(n.app)?Promise.reject(ur(n)):rm(Me(n),T0.credential(e,t)).catch(r=>E(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&S0(n),r}))}function om(n,e){return E(this,null,function*(){let t=Me(n),i={requestType:"VERIFY_EMAIL",idToken:yield n.getIdToken()};e&&FP(t.auth,i,e);let{email:s}=yield PP(t.auth,i);s!==n.email&&(yield n.reload())})}function ed(n,e,t,r){return Me(n).onIdTokenChanged(e,t,r)}function am(n,e,t){return Me(n).beforeAuthStateChanged(e,t)}function td(n,e,t,r){return Me(n).onAuthStateChanged(e,t,r)}function cm(n){return Me(n).signOut()}var Qu="__sak";var Ju=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Qu,"1"),this.storage.removeItem(Qu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var LP=1e3,UP=10,BP=(()=>{class n extends Ju{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=v0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,l,f)=>{this.notifyListeners(c,f)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);mP()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,UP):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},LP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return E(this,null,function*(){yield Fr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return E(this,null,function*(){let r=yield Fr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return E(this,null,function*(){yield Fr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),R0=BP;var jP=(()=>{class n extends Ju{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),lm=jP;function $P(n){return Promise.all(n.map(e=>E(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var qP=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return E(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,c=this.handlersMap[s];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let l=Array.from(c).map(_=>E(this,null,function*(){return _(r.origin,o)})),f=yield $P(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:f})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function P0(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var $p=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return E(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,l)=>{let f=P0("",20);i.port1.start();let _=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){let C=g;if(C.data.eventId===f)switch(C.data.status){case"ack":clearTimeout(_),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(C.data.response);break;default:clearTimeout(_),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Nn(){return window}function zP(n){Nn().location.href=n}function x0(){return typeof Nn().WorkerGlobalScope<"u"&&typeof Nn().importScripts=="function"}function GP(){return E(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function HP(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function WP(){return x0()?self:null}var D0="firebaseLocalStorageDb",KP=1,Yu="firebaseLocalStorage",k0="fbase_key",Yi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function nd(n,e){return n.transaction([Yu],e?"readwrite":"readonly").objectStore(Yu)}function QP(){let n=indexedDB.deleteDatabase(D0);return new Yi(n).toPromise()}function qp(){let n=indexedDB.open(D0,KP);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Yu,{keyPath:k0})}catch(i){t(i)}}),n.addEventListener("success",()=>E(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Yu)?e(r):(r.close(),yield QP(),e(yield qp()))}))})}function Jw(n,e,t){return E(this,null,function*(){let r=nd(n,!0).put({[k0]:e,value:t});return new Yi(r).toPromise()})}function JP(n,e){return E(this,null,function*(){let t=nd(n,!1).get(e),r=yield new Yi(t).toPromise();return r===void 0?null:r.value})}function Yw(n,e){let t=nd(n,!0).delete(e);return new Yi(t).toPromise()}var YP=800,XP=3,ZP=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return E(this,null,function*(){return this.db?this.db:(this.db=yield qp(),this.db)})}_withRetries(t){return E(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>XP)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return E(this,null,function*(){return x0()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return E(this,null,function*(){this.receiver=qP._getInstance(WP()),this.receiver._subscribe("keyChanged",(t,r)=>E(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>E(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return E(this,null,function*(){var t,r;if(this.activeServiceWorker=yield GP(),!this.activeServiceWorker)return;this.sender=new $p(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return E(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||HP()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return E(this,null,function*(){try{if(!indexedDB)return!1;let t=yield qp();return yield Jw(t,Qu,"1"),yield Yw(t,Qu),!0}catch{}return!1})}_withPendingWrite(t){return E(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(i=>Jw(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return E(this,null,function*(){let r=yield this._withRetries(i=>JP(i,t));return this.localCache[t]=r,r})}_remove(t){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(r=>Yw(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return E(this,null,function*(){let t=yield this._withRetries(s=>{let o=nd(s,!1).getAll();return new Yi(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>E(this,null,function*(){return this._poll()}),YP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),O0=ZP;var WV=E0("rcb"),KV=new Ji(3e4,6e4);function e1(n,e){return e?lr(e):(ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var sc=class extends rc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rp(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Rp(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Rp(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function t1(n){return A0(n.auth,new sc(n),n.bypassAuthState)}function n1(n){let{auth:e,user:t}=n;return ie(t,e,"internal-error"),VP(t,new sc(n),n.bypassAuthState)}function r1(n){return E(this,null,function*(){let{auth:e,user:t}=n;return ie(t,e,"internal-error"),MP(t,new sc(n),n.bypassAuthState)})}var zp=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>E(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return E(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(f){this.reject(f)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return t1;case"linkViaPopup":case"linkViaRedirect":return r1;case"reauthViaPopup":case"reauthViaRedirect":return n1;default:Mn(this.auth,"internal-error")}}resolve(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var QV=new Ji(2e3,1e4);var i1="pendingRedirect",Bu=new Map,Gp=class n extends zp{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return E(this,null,function*(){let e=Bu.get(this.auth._key());if(!e){try{let r=(yield s1(this.resolver,this.auth))?yield Fr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Bu.set(this.auth._key(),e)}return this.bypassAuthState||Bu.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return E(this,null,function*(){if(e.type==="signInViaRedirect")return Fr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Fr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return E(this,null,function*(){})}cleanUp(){}};function s1(n,e){return E(this,null,function*(){let t=c1(e),r=a1(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function o1(n,e){Bu.set(n._key(),e)}function a1(n){return lr(n._redirectPersistence)}function c1(n){return Uu(i1,n.config.apiKey,n.name)}function l1(n,e,t=!1){return E(this,null,function*(){if(hn(n.app))return Promise.reject(ur(n));let r=Xi(n),i=e1(r,e),o=yield new Gp(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var u1=10*60*1e3,Hp=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!d1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!N0(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Qi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=u1&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xw(e))}saveEventToCache(e){this.cachedEventUids.add(Xw(e)),this.lastProcessedEventTime=Date.now()}};function Xw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function N0({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function d1(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return N0(n);default:return!1}}function h1(t){return E(this,arguments,function*(n,e={}){return hr(n,"GET","/v1/projects",e)})}var f1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,p1=/^https?/;function m1(n){return E(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield h1(n);for(let t of e)try{if(g1(t))return}catch{}Mn(n,"unauthorized-domain")})}function g1(n){let e=xp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!p1.test(t))return!1;if(f1.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var _1=new Ji(3e4,6e4);function Zw(){let n=Nn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function y1(n){return new Promise((e,t)=>{var r,i,s;function o(){Zw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Zw(),t(Qi(n,"network-request-failed"))},timeout:_1.get()})}if(!((i=(r=Nn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Nn().gapi)===null||s===void 0)&&s.load)o();else{let c=E0("iframefcb");return Nn()[c]=()=>{gapi.load?o():t(Qi(n,"network-request-failed"))},b0(`${wP()}?onload=${c}`).catch(l=>t(l))}}).catch(e=>{throw ju=null,e})}var ju=null;function v1(n){return ju=ju||y1(n),ju}var w1=new Ji(5e3,15e3),b1="__/auth/iframe",E1="emulator/auth/iframe",I1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},T1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function C1(n){let e=n.config;ie(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Jp(e,E1):`https://${n.config.authDomain}/${b1}`,r={apiKey:e.apiKey,appName:n.name,v:On},i=T1.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Ja(r).slice(1)}`}function A1(n){return E(this,null,function*(){let e=yield v1(n),t=Nn().gapi;return ie(t,n,"internal-error"),e.open({where:document.body,url:C1(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:I1,dontclear:!0},r=>new Promise((i,s)=>E(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Qi(n,"network-request-failed"),c=Nn().setTimeout(()=>{s(o)},w1.get());function l(){Nn().clearTimeout(c),i(r)}r.ping(l).then(l,()=>{s(o)})})))})}var S1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},R1=500,P1=600,x1="_blank",D1="http://localhost",Xu=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function k1(n,e,t,r=R1,i=P1){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",l=Object.assign(Object.assign({},S1),{width:r.toString(),height:i.toString(),top:s,left:o}),f=ht().toLowerCase();t&&(c=p0(f)?x1:t),h0(f)&&(e=e||D1,l.scrollbars="yes");let _=Object.entries(l).reduce((C,[k,F])=>`${C}${k}=${F},`,"");if(pP(f)&&c!=="_self")return O1(e||"",c),new Xu(null);let g=window.open(e||"",c,_);ie(g,n,"popup-blocked");try{g.focus()}catch{}return new Xu(g)}function O1(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var N1="__/auth/handler",M1="emulator/auth/handler",V1=encodeURIComponent("fac");function e0(n,e,t,r,i,s){return E(this,null,function*(){ie(n.config.authDomain,n,"auth-domain-config-required"),ie(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:On,eventId:i};if(e instanceof Ku){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",Tw(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[_,g]of Object.entries(s||{}))o[_]=g}if(e instanceof Bp){let _=e.getScopes().filter(g=>g!=="");_.length>0&&(o.scopes=_.join(","))}n.tenantId&&(o.tid=n.tenantId);let c=o;for(let _ of Object.keys(c))c[_]===void 0&&delete c[_];let l=yield n._getAppCheckToken(),f=l?`#${V1}=${encodeURIComponent(l)}`:"";return`${F1(n)}?${Ja(c).slice(1)}${f}`})}function F1({config:n}){return n.emulator?Jp(n,M1):`https://${n.authDomain}/${N1}`}var Pp="webStorageSupport",Wp=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lm,this._completeRedirectFn=l1,this._overrideRedirectResult=o1}_openPopup(e,t,r,i){return E(this,null,function*(){var s;oi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield e0(e,t,r,xp(),i);return k1(e,o,P0())})}_openRedirect(e,t,r,i){return E(this,null,function*(){yield this._originValidation(e);let s=yield e0(e,t,r,xp(),i);return zP(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(oi(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return E(this,null,function*(){let t=yield A1(e),r=new Hp(e);return t.register("authEvent",i=>(ie(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Pp,{type:Pp},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Pp];o!==void 0&&t(!!o),Mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=m1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return v0()||f0()||em()}},M0=Wp;var t0="@firebase/auth",n0="1.7.9";var Kp=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return E(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function L1(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function U1(n){kn(new kt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;ie(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:w0(n)},f=new Fp(r,i,s,l);return IP(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),kn(new kt("auth-internal",e=>{let t=Xi(e.getProvider("auth").getImmediate());return(r=>new Kp(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Le(t0,n0,L1(n)),Le(t0,n0,"esm2017")}var B1=5*60,j1=cp("authIdTokenMaxAge")||B1,r0=null,$1=n=>e=>E(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>j1)return;let i=t?.token;r0!==i&&(r0=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function um(n=ni()){let e=Hi(n,"auth");if(e.isInitialized())return e.getImmediate();let t=tm(n,{popupRedirectResolver:M0,persistence:[O0,R0,lm]}),r=cp("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=$1(s.toString());am(t,o,()=>o(t.currentUser)),ed(t,c=>o(c))}}let i=op("auth");return i&&nm(t,`http://${i}`),t}function q1(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}yP({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Qi("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",q1().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});U1("Browser");function F0(n){return new Lr(function(e){var t=td(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var L0="auth",Zi=class{constructor(e){return e}},es=class{constructor(){return Ki(L0)}};var dm=new me("angularfire2.auth-instances");function xx(n,e){let t=to(L0,n,e);return t&&new Zi(t)}function Dx(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Zi(r)}}var kx={provide:es,deps:[[new ot,dm]]},Ox={provide:Zi,useFactory:xx,deps:[[new ot,dm],fn]};function U0(n,...e){return Le("angularfire",or.full,"auth"),Ct([Ox,kx,{provide:dm,useFactory:Dx(n),multi:!0,deps:[Ye,ln,ii,ar,[new ot,ri],...e]}])}var B0=Xe(F0,!0);var j0=Xe(im,!0);var $0=Xe(um,!0);var q0=Xe(om,!0);var z0=Xe(sm,!0);var rd=Xe(cm,!0);var G0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},H0={};var ai,hm;(function(){var n;function e(P,w){function I(){}I.prototype=w.prototype,P.D=w.prototype,P.prototype=new I,P.prototype.constructor=P,P.C=function(S,R,x){for(var T=Array(arguments.length-2),en=2;en<arguments.length;en++)T[en-2]=arguments[en];return w.prototype[R].apply(S,T)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,w,I){I||(I=0);var S=Array(16);if(typeof w=="string")for(var R=0;16>R;++R)S[R]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(R=0;16>R;++R)S[R]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=P.g[0],I=P.g[1],R=P.g[2];var x=P.g[3],T=w+(x^I&(R^x))+S[0]+3614090360&4294967295;w=I+(T<<7&4294967295|T>>>25),T=x+(R^w&(I^R))+S[1]+3905402710&4294967295,x=w+(T<<12&4294967295|T>>>20),T=R+(I^x&(w^I))+S[2]+606105819&4294967295,R=x+(T<<17&4294967295|T>>>15),T=I+(w^R&(x^w))+S[3]+3250441966&4294967295,I=R+(T<<22&4294967295|T>>>10),T=w+(x^I&(R^x))+S[4]+4118548399&4294967295,w=I+(T<<7&4294967295|T>>>25),T=x+(R^w&(I^R))+S[5]+1200080426&4294967295,x=w+(T<<12&4294967295|T>>>20),T=R+(I^x&(w^I))+S[6]+2821735955&4294967295,R=x+(T<<17&4294967295|T>>>15),T=I+(w^R&(x^w))+S[7]+4249261313&4294967295,I=R+(T<<22&4294967295|T>>>10),T=w+(x^I&(R^x))+S[8]+1770035416&4294967295,w=I+(T<<7&4294967295|T>>>25),T=x+(R^w&(I^R))+S[9]+2336552879&4294967295,x=w+(T<<12&4294967295|T>>>20),T=R+(I^x&(w^I))+S[10]+4294925233&4294967295,R=x+(T<<17&4294967295|T>>>15),T=I+(w^R&(x^w))+S[11]+2304563134&4294967295,I=R+(T<<22&4294967295|T>>>10),T=w+(x^I&(R^x))+S[12]+1804603682&4294967295,w=I+(T<<7&4294967295|T>>>25),T=x+(R^w&(I^R))+S[13]+4254626195&4294967295,x=w+(T<<12&4294967295|T>>>20),T=R+(I^x&(w^I))+S[14]+2792965006&4294967295,R=x+(T<<17&4294967295|T>>>15),T=I+(w^R&(x^w))+S[15]+1236535329&4294967295,I=R+(T<<22&4294967295|T>>>10),T=w+(R^x&(I^R))+S[1]+4129170786&4294967295,w=I+(T<<5&4294967295|T>>>27),T=x+(I^R&(w^I))+S[6]+3225465664&4294967295,x=w+(T<<9&4294967295|T>>>23),T=R+(w^I&(x^w))+S[11]+643717713&4294967295,R=x+(T<<14&4294967295|T>>>18),T=I+(x^w&(R^x))+S[0]+3921069994&4294967295,I=R+(T<<20&4294967295|T>>>12),T=w+(R^x&(I^R))+S[5]+3593408605&4294967295,w=I+(T<<5&4294967295|T>>>27),T=x+(I^R&(w^I))+S[10]+38016083&4294967295,x=w+(T<<9&4294967295|T>>>23),T=R+(w^I&(x^w))+S[15]+3634488961&4294967295,R=x+(T<<14&4294967295|T>>>18),T=I+(x^w&(R^x))+S[4]+3889429448&4294967295,I=R+(T<<20&4294967295|T>>>12),T=w+(R^x&(I^R))+S[9]+568446438&4294967295,w=I+(T<<5&4294967295|T>>>27),T=x+(I^R&(w^I))+S[14]+3275163606&4294967295,x=w+(T<<9&4294967295|T>>>23),T=R+(w^I&(x^w))+S[3]+4107603335&4294967295,R=x+(T<<14&4294967295|T>>>18),T=I+(x^w&(R^x))+S[8]+1163531501&4294967295,I=R+(T<<20&4294967295|T>>>12),T=w+(R^x&(I^R))+S[13]+2850285829&4294967295,w=I+(T<<5&4294967295|T>>>27),T=x+(I^R&(w^I))+S[2]+4243563512&4294967295,x=w+(T<<9&4294967295|T>>>23),T=R+(w^I&(x^w))+S[7]+1735328473&4294967295,R=x+(T<<14&4294967295|T>>>18),T=I+(x^w&(R^x))+S[12]+2368359562&4294967295,I=R+(T<<20&4294967295|T>>>12),T=w+(I^R^x)+S[5]+4294588738&4294967295,w=I+(T<<4&4294967295|T>>>28),T=x+(w^I^R)+S[8]+2272392833&4294967295,x=w+(T<<11&4294967295|T>>>21),T=R+(x^w^I)+S[11]+1839030562&4294967295,R=x+(T<<16&4294967295|T>>>16),T=I+(R^x^w)+S[14]+4259657740&4294967295,I=R+(T<<23&4294967295|T>>>9),T=w+(I^R^x)+S[1]+2763975236&4294967295,w=I+(T<<4&4294967295|T>>>28),T=x+(w^I^R)+S[4]+1272893353&4294967295,x=w+(T<<11&4294967295|T>>>21),T=R+(x^w^I)+S[7]+4139469664&4294967295,R=x+(T<<16&4294967295|T>>>16),T=I+(R^x^w)+S[10]+3200236656&4294967295,I=R+(T<<23&4294967295|T>>>9),T=w+(I^R^x)+S[13]+681279174&4294967295,w=I+(T<<4&4294967295|T>>>28),T=x+(w^I^R)+S[0]+3936430074&4294967295,x=w+(T<<11&4294967295|T>>>21),T=R+(x^w^I)+S[3]+3572445317&4294967295,R=x+(T<<16&4294967295|T>>>16),T=I+(R^x^w)+S[6]+76029189&4294967295,I=R+(T<<23&4294967295|T>>>9),T=w+(I^R^x)+S[9]+3654602809&4294967295,w=I+(T<<4&4294967295|T>>>28),T=x+(w^I^R)+S[12]+3873151461&4294967295,x=w+(T<<11&4294967295|T>>>21),T=R+(x^w^I)+S[15]+530742520&4294967295,R=x+(T<<16&4294967295|T>>>16),T=I+(R^x^w)+S[2]+3299628645&4294967295,I=R+(T<<23&4294967295|T>>>9),T=w+(R^(I|~x))+S[0]+4096336452&4294967295,w=I+(T<<6&4294967295|T>>>26),T=x+(I^(w|~R))+S[7]+1126891415&4294967295,x=w+(T<<10&4294967295|T>>>22),T=R+(w^(x|~I))+S[14]+2878612391&4294967295,R=x+(T<<15&4294967295|T>>>17),T=I+(x^(R|~w))+S[5]+4237533241&4294967295,I=R+(T<<21&4294967295|T>>>11),T=w+(R^(I|~x))+S[12]+1700485571&4294967295,w=I+(T<<6&4294967295|T>>>26),T=x+(I^(w|~R))+S[3]+2399980690&4294967295,x=w+(T<<10&4294967295|T>>>22),T=R+(w^(x|~I))+S[10]+4293915773&4294967295,R=x+(T<<15&4294967295|T>>>17),T=I+(x^(R|~w))+S[1]+2240044497&4294967295,I=R+(T<<21&4294967295|T>>>11),T=w+(R^(I|~x))+S[8]+1873313359&4294967295,w=I+(T<<6&4294967295|T>>>26),T=x+(I^(w|~R))+S[15]+4264355552&4294967295,x=w+(T<<10&4294967295|T>>>22),T=R+(w^(x|~I))+S[6]+2734768916&4294967295,R=x+(T<<15&4294967295|T>>>17),T=I+(x^(R|~w))+S[13]+1309151649&4294967295,I=R+(T<<21&4294967295|T>>>11),T=w+(R^(I|~x))+S[4]+4149444226&4294967295,w=I+(T<<6&4294967295|T>>>26),T=x+(I^(w|~R))+S[11]+3174756917&4294967295,x=w+(T<<10&4294967295|T>>>22),T=R+(w^(x|~I))+S[2]+718787259&4294967295,R=x+(T<<15&4294967295|T>>>17),T=I+(x^(R|~w))+S[9]+3951481745&4294967295,P.g[0]=P.g[0]+w&4294967295,P.g[1]=P.g[1]+(R+(T<<21&4294967295|T>>>11))&4294967295,P.g[2]=P.g[2]+R&4294967295,P.g[3]=P.g[3]+x&4294967295}r.prototype.u=function(P,w){w===void 0&&(w=P.length);for(var I=w-this.blockSize,S=this.B,R=this.h,x=0;x<w;){if(R==0)for(;x<=I;)i(this,P,x),x+=this.blockSize;if(typeof P=="string"){for(;x<w;)if(S[R++]=P.charCodeAt(x++),R==this.blockSize){i(this,S),R=0;break}}else for(;x<w;)if(S[R++]=P[x++],R==this.blockSize){i(this,S),R=0;break}}this.h=R,this.o+=w},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var w=1;w<P.length-8;++w)P[w]=0;var I=8*this.o;for(w=P.length-8;w<P.length;++w)P[w]=I&255,I/=256;for(this.u(P),P=Array(16),w=I=0;4>w;++w)for(var S=0;32>S;S+=8)P[I++]=this.g[w]>>>S&255;return P};function s(P,w){var I=c;return Object.prototype.hasOwnProperty.call(I,P)?I[P]:I[P]=w(P)}function o(P,w){this.h=w;for(var I=[],S=!0,R=P.length-1;0<=R;R--){var x=P[R]|0;S&&x==w||(I[R]=x,S=!1)}this.g=I}var c={};function l(P){return-128<=P&&128>P?s(P,function(w){return new o([w|0],0>w?-1:0)}):new o([P|0],0>P?-1:0)}function f(P){if(isNaN(P)||!isFinite(P))return g;if(0>P)return M(f(-P));for(var w=[],I=1,S=0;P>=I;S++)w[S]=P/I|0,I*=4294967296;return new o(w,0)}function _(P,w){if(P.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(P.charAt(0)=="-")return M(_(P.substring(1),w));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=f(Math.pow(w,8)),S=g,R=0;R<P.length;R+=8){var x=Math.min(8,P.length-R),T=parseInt(P.substring(R,R+x),w);8>x?(x=f(Math.pow(w,x)),S=S.j(x).add(f(T))):(S=S.j(I),S=S.add(f(T)))}return S}var g=l(0),C=l(1),k=l(16777216);n=o.prototype,n.m=function(){if(U(this))return-M(this).m();for(var P=0,w=1,I=0;I<this.g.length;I++){var S=this.i(I);P+=(0<=S?S:4294967296+S)*w,w*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(F(this))return"0";if(U(this))return"-"+M(this).toString(P);for(var w=f(Math.pow(P,6)),I=this,S="";;){var R=se(I,w).g;I=J(I,R.j(w));var x=((0<I.g.length?I.g[0]:I.h)>>>0).toString(P);if(I=R,F(I))return x+S;for(;6>x.length;)x="0"+x;S=x+S}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function F(P){if(P.h!=0)return!1;for(var w=0;w<P.g.length;w++)if(P.g[w]!=0)return!1;return!0}function U(P){return P.h==-1}n.l=function(P){return P=J(this,P),U(P)?-1:F(P)?0:1};function M(P){for(var w=P.g.length,I=[],S=0;S<w;S++)I[S]=~P.g[S];return new o(I,~P.h).add(C)}n.abs=function(){return U(this)?M(this):this},n.add=function(P){for(var w=Math.max(this.g.length,P.g.length),I=[],S=0,R=0;R<=w;R++){var x=S+(this.i(R)&65535)+(P.i(R)&65535),T=(x>>>16)+(this.i(R)>>>16)+(P.i(R)>>>16);S=T>>>16,x&=65535,T&=65535,I[R]=T<<16|x}return new o(I,I[I.length-1]&-2147483648?-1:0)};function J(P,w){return P.add(M(w))}n.j=function(P){if(F(this)||F(P))return g;if(U(this))return U(P)?M(this).j(M(P)):M(M(this).j(P));if(U(P))return M(this.j(M(P)));if(0>this.l(k)&&0>P.l(k))return f(this.m()*P.m());for(var w=this.g.length+P.g.length,I=[],S=0;S<2*w;S++)I[S]=0;for(S=0;S<this.g.length;S++)for(var R=0;R<P.g.length;R++){var x=this.i(S)>>>16,T=this.i(S)&65535,en=P.i(R)>>>16,vr=P.i(R)&65535;I[2*S+2*R]+=T*vr,ee(I,2*S+2*R),I[2*S+2*R+1]+=x*vr,ee(I,2*S+2*R+1),I[2*S+2*R+1]+=T*en,ee(I,2*S+2*R+1),I[2*S+2*R+2]+=x*en,ee(I,2*S+2*R+2)}for(S=0;S<w;S++)I[S]=I[2*S+1]<<16|I[2*S];for(S=w;S<2*w;S++)I[S]=0;return new o(I,0)};function ee(P,w){for(;(P[w]&65535)!=P[w];)P[w+1]+=P[w]>>>16,P[w]&=65535,w++}function W(P,w){this.g=P,this.h=w}function se(P,w){if(F(w))throw Error("division by zero");if(F(P))return new W(g,g);if(U(P))return w=se(M(P),w),new W(M(w.g),M(w.h));if(U(w))return w=se(P,M(w)),new W(M(w.g),w.h);if(30<P.g.length){if(U(P)||U(w))throw Error("slowDivide_ only works with positive integers.");for(var I=C,S=w;0>=S.l(P);)I=Ie(I),S=Ie(S);var R=ue(I,1),x=ue(S,1);for(S=ue(S,2),I=ue(I,2);!F(S);){var T=x.add(S);0>=T.l(P)&&(R=R.add(I),x=T),S=ue(S,1),I=ue(I,1)}return w=J(P,R.j(w)),new W(R,w)}for(R=g;0<=P.l(w);){for(I=Math.max(1,Math.floor(P.m()/w.m())),S=Math.ceil(Math.log(I)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),x=f(I),T=x.j(w);U(T)||0<T.l(P);)I-=S,x=f(I),T=x.j(w);F(x)&&(x=C),R=R.add(x),P=J(P,T)}return new W(R,P)}n.A=function(P){return se(this,P).h},n.and=function(P){for(var w=Math.max(this.g.length,P.g.length),I=[],S=0;S<w;S++)I[S]=this.i(S)&P.i(S);return new o(I,this.h&P.h)},n.or=function(P){for(var w=Math.max(this.g.length,P.g.length),I=[],S=0;S<w;S++)I[S]=this.i(S)|P.i(S);return new o(I,this.h|P.h)},n.xor=function(P){for(var w=Math.max(this.g.length,P.g.length),I=[],S=0;S<w;S++)I[S]=this.i(S)^P.i(S);return new o(I,this.h^P.h)};function Ie(P){for(var w=P.g.length+1,I=[],S=0;S<w;S++)I[S]=P.i(S)<<1|P.i(S-1)>>>31;return new o(I,P.h)}function ue(P,w){var I=w>>5;w%=32;for(var S=P.g.length-I,R=[],x=0;x<S;x++)R[x]=0<w?P.i(x+I)>>>w|P.i(x+I+1)<<32-w:P.i(x+I);return new o(R,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,hm=H0.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=f,o.fromString=_,ai=H0.Integer=o}).apply(typeof G0<"u"?G0:typeof self<"u"?self:typeof window<"u"?window:{});var id=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fr={};var fm,Mx,io,pm,ac,sd,mm,gm,_m;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,p){return a==Array.prototype||a==Object.prototype||(a[h]=p.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof id=="object"&&id];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(a,h){if(h)e:{var p=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var D=a[y];if(!(D in p))break e;p=p[D]}a=a[a.length-1],y=p[a],h=h(y),h!=y&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}function s(a,h){a instanceof String&&(a+="");var p=0,y=!1,D={next:function(){if(!y&&p<a.length){var V=p++;return{value:h(V,a[V]),done:!1}}return y=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(a){return a||function(){return s(this,function(h,p){return p})}});var o=o||{},c=this||self;function l(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function f(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function _(a,h,p){return a.call.apply(a.bind,arguments)}function g(a,h,p){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,y),a.apply(h,D)}}return function(){return a.apply(h,arguments)}}function C(a,h,p){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:g,C.apply(null,arguments)}function k(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function F(a,h){function p(){}p.prototype=h.prototype,a.aa=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(y,D,V){for(var z=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)z[Pe-2]=arguments[Pe];return h.prototype[D].apply(y,z)}}function U(a){let h=a.length;if(0<h){let p=Array(h);for(let y=0;y<h;y++)p[y]=a[y];return p}return[]}function M(a,h){for(let p=1;p<arguments.length;p++){let y=arguments[p];if(l(y)){let D=a.length||0,V=y.length||0;a.length=D+V;for(let z=0;z<V;z++)a[D+z]=y[z]}else a.push(y)}}class J{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function ee(a){return/^[\s\xa0]*$/.test(a)}function W(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function se(a){return se[" "](a),a}se[" "]=function(){};var Ie=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function ue(a,h,p){for(let y in a)h.call(p,a[y],y,a)}function P(a,h){for(let p in a)h.call(void 0,a[p],p,a)}function w(a){let h={};for(let p in a)h[p]=a[p];return h}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(a,h){let p,y;for(let D=1;D<arguments.length;D++){y=arguments[D];for(p in y)a[p]=y[p];for(let V=0;V<I.length;V++)p=I[V],Object.prototype.hasOwnProperty.call(y,p)&&(a[p]=y[p])}}function R(a){var h=1;a=a.split(":");let p=[];for(;0<h&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function x(a){c.setTimeout(()=>{throw a},0)}function T(){var a=br;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class en{constructor(){this.h=this.g=null}add(h,p){let y=vr.get();y.set(h,p),this.h?this.h.next=y:this.g=y,this.h=y}}var vr=new J(()=>new Mo,a=>a.reset());class Mo{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let wr,Wn=!1,br=new en,Nt=()=>{let a=c.Promise.resolve(void 0);wr=()=>{a.then(Er)}};var Er=()=>{for(var a;a=T();){try{a.h.call(a.g)}catch(p){x(p)}var h=vr;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}Wn=!1};function wt(){this.s=this.s,this.C=this.C}wt.prototype.s=!1,wt.prototype.ma=function(){this.s||(this.s=!0,this.N())},wt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function at(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}at.prototype.h=function(){this.defaultPrevented=!0};var Ir=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let p=()=>{};c.addEventListener("test",p,h),c.removeEventListener("test",p,h)}catch{}return a}();function tn(a,h){if(at.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(Ie){e:{try{se(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Vc[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&tn.aa.h.call(this)}}F(tn,at);var Vc={2:"touch",3:"pen",4:"mouse"};tn.prototype.h=function(){tn.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var vn="closure_listenable_"+(1e6*Math.random()|0),Vo=0;function ah(a,h,p,y,D){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!y,this.ha=D,this.key=++Vo,this.da=this.fa=!1}function Tr(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Cr(a){this.src=a,this.g={},this.h=0}Cr.prototype.add=function(a,h,p,y,D){var V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);var z=Fo(a,h,y,D);return-1<z?(h=a[z],p||(h.fa=!1)):(h=new ah(h,this.src,V,!!y,D),h.fa=p,a.push(h)),h};function Ar(a,h){var p=h.type;if(p in a.g){var y=a.g[p],D=Array.prototype.indexOf.call(y,h,void 0),V;(V=0<=D)&&Array.prototype.splice.call(y,D,1),V&&(Tr(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function Fo(a,h,p,y){for(var D=0;D<a.length;++D){var V=a[D];if(!V.da&&V.listener==h&&V.capture==!!p&&V.ha==y)return D}return-1}var pt="closure_lm_"+(1e6*Math.random()|0),Mt={};function Fc(a,h,p,y,D){if(y&&y.once)return Lo(a,h,p,y,D);if(Array.isArray(h)){for(var V=0;V<h.length;V++)Fc(a,h[V],p,y,D);return null}return p=Ke(p),a&&a[vn]?a.K(h,p,f(y)?!!y.capture:!!y,D):bt(a,h,p,!1,y,D)}function bt(a,h,p,y,D,V){if(!h)throw Error("Invalid event type");var z=f(D)?!!D.capture:!!D,Pe=nn(a);if(Pe||(a[pt]=Pe=new Cr(a)),p=Pe.add(h,p,y,z,V),p.proxy)return p;if(y=ps(),p.proxy=y,y.src=a,y.listener=p,a.addEventListener)Ir||(D=z),D===void 0&&(D=!1),a.addEventListener(h.toString(),y,D);else if(a.attachEvent)a.attachEvent(Vt(h.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return p}function ps(){function a(p){return h.call(a.src,a.listener,p)}let h=wn;return a}function Lo(a,h,p,y,D){if(Array.isArray(h)){for(var V=0;V<h.length;V++)Lo(a,h[V],p,y,D);return null}return p=Ke(p),a&&a[vn]?a.L(h,p,f(y)?!!y.capture:!!y,D):bt(a,h,p,!0,y,D)}function Uo(a,h,p,y,D){if(Array.isArray(h))for(var V=0;V<h.length;V++)Uo(a,h[V],p,y,D);else y=f(y)?!!y.capture:!!y,p=Ke(p),a&&a[vn]?(a=a.i,h=String(h).toString(),h in a.g&&(V=a.g[h],p=Fo(V,p,y,D),-1<p&&(Tr(V[p]),Array.prototype.splice.call(V,p,1),V.length==0&&(delete a.g[h],a.h--)))):a&&(a=nn(a))&&(h=a.g[h.toString()],a=-1,h&&(a=Fo(h,p,y,D)),(p=-1<a?h[a]:null)&&ge(p))}function ge(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[vn])Ar(h.i,a);else{var p=a.type,y=a.proxy;h.removeEventListener?h.removeEventListener(p,y,a.capture):h.detachEvent?h.detachEvent(Vt(p),y):h.addListener&&h.removeListener&&h.removeListener(y),(p=nn(h))?(Ar(p,a),p.h==0&&(p.src=null,h[pt]=null)):Tr(a)}}}function Vt(a){return a in Mt?Mt[a]:Mt[a]="on"+a}function wn(a,h){if(a.da)a=!0;else{h=new tn(h,this);var p=a.listener,y=a.ha||a.src;a.fa&&ge(a),a=p.call(y,h)}return a}function nn(a){return a=a[pt],a instanceof Cr?a:null}var $e="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ke(a){return typeof a=="function"?a:(a[$e]||(a[$e]=function(h){return a.handleEvent(h)}),a[$e])}function Qe(){wt.call(this),this.i=new Cr(this),this.M=this,this.F=null}F(Qe,wt),Qe.prototype[vn]=!0,Qe.prototype.removeEventListener=function(a,h,p,y){Uo(this,a,h,p,y)};function ct(a,h){var p,y=a.F;if(y)for(p=[];y;y=y.F)p.push(y);if(a=a.M,y=h.type||h,typeof h=="string")h=new at(h,a);else if(h instanceof at)h.target=h.target||a;else{var D=h;h=new at(y,a),S(h,D)}if(D=!0,p)for(var V=p.length-1;0<=V;V--){var z=h.g=p[V];D=bn(z,y,!0,h)&&D}if(z=h.g=a,D=bn(z,y,!0,h)&&D,D=bn(z,y,!1,h)&&D,p)for(V=0;V<p.length;V++)z=h.g=p[V],D=bn(z,y,!1,h)&&D}Qe.prototype.N=function(){if(Qe.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var p=a.g[h],y=0;y<p.length;y++)Tr(p[y]);delete a.g[h],a.h--}}this.F=null},Qe.prototype.K=function(a,h,p,y){return this.i.add(String(a),h,!1,p,y)},Qe.prototype.L=function(a,h,p,y){return this.i.add(String(a),h,!0,p,y)};function bn(a,h,p,y){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,V=0;V<h.length;++V){var z=h[V];if(z&&!z.da&&z.capture==p){var Pe=z.listener,rt=z.ha||z.src;z.fa&&Ar(a.i,z),D=Pe.call(rt,y)!==!1&&D}}return D&&!y.defaultPrevented}function mt(a,h,p){if(typeof a=="function")p&&(a=C(a,p));else if(a&&typeof a.handleEvent=="function")a=C(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(a,h||0)}function Lc(a){a.g=mt(()=>{a.g=null,a.i&&(a.i=!1,Lc(a))},a.l);let h=a.h;a.h=null,a.m.apply(null,h)}class Uc extends wt{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Lc(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sr(a){wt.call(this),this.h=a,this.g={}}F(Sr,wt);var ms=[];function Bc(a){ue(a.g,function(h,p){this.g.hasOwnProperty(p)&&ge(h)},a),a.g={}}Sr.prototype.N=function(){Sr.aa.N.call(this),Bc(this)},Sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bo=c.JSON.stringify,ch=c.JSON.parse,lh=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function rn(){}rn.prototype.h=null;function jc(a){return a.h||(a.h=a.i())}function $c(){}var fi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jo(){at.call(this,"d")}F(jo,at);function $o(){at.call(this,"c")}F($o,at);var sn={},qc=null;function gs(){return qc=qc||new Qe}sn.La="serverreachability";function zc(a){at.call(this,sn.La,a)}F(zc,at);function pi(a){let h=gs();ct(h,new zc(h))}sn.STAT_EVENT="statevent";function Gc(a,h){at.call(this,sn.STAT_EVENT,a),this.stat=h}F(Gc,at);function nt(a){let h=gs();ct(h,new Gc(h,a))}sn.Ma="timingevent";function Hc(a,h){at.call(this,sn.Ma,a),this.size=h}F(Hc,at);function mi(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},h)}function gi(){this.g=!0}gi.prototype.xa=function(){this.g=!1};function uh(a,h,p,y,D,V){a.info(function(){if(a.g)if(V)for(var z="",Pe=V.split("&"),rt=0;rt<Pe.length;rt++){var we=Pe[rt].split("=");if(1<we.length){var lt=we[0];we=we[1];var it=lt.split("_");z=2<=it.length&&it[1]=="type"?z+(lt+"="+we+"&"):z+(lt+"=redacted&")}}else z=null;else z=V;return"XMLHTTP REQ ("+y+") [attempt "+D+"]: "+h+`
`+p+`
`+z})}function dh(a,h,p,y,D,V,z){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+D+"]: "+h+`
`+p+`
`+V+" "+z})}function Te(a,h,p,y){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+fh(a,p)+(y?" "+y:"")})}function hh(a,h){a.info(function(){return"TIMEOUT: "+h})}gi.prototype.info=function(){};function fh(a,h){if(!a.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var y=p[a];if(!(2>y.length)){var D=y[1];if(Array.isArray(D)&&!(1>D.length)){var V=D[0];if(V!="noop"&&V!="stop"&&V!="close")for(var z=1;z<D.length;z++)D[z]=""}}}}return Bo(p)}catch{return h}}var _s={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qo;function ys(){}F(ys,rn),ys.prototype.g=function(){return new XMLHttpRequest},ys.prototype.i=function(){return{}},qo=new ys;function zt(a,h,p,y){this.j=a,this.i=h,this.l=p,this.R=y||1,this.U=new Sr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rr}function Rr(){this.i=null,this.g="",this.h=!1}var zo={},Pr={};function Ve(a,h,p){a.L=1,a.v=ws(Gt(h)),a.m=p,a.P=!0,Kc(a,null)}function Kc(a,h){a.F=Date.now(),_i(a),a.A=Gt(a.v);var p=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),ul(p.i,"t",y),a.C=0,p=a.j.J,a.h=new Rr,a.g=sa(a.j,p?h:null,!a.m),0<a.O&&(a.M=new Uc(C(a.Y,a,a.g),a.O)),h=a.U,p=a.g,y=a.ca;var D="readystatechange";Array.isArray(D)||(D&&(ms[0]=D.toString()),D=ms);for(var V=0;V<D.length;V++){var z=Fc(p,D[V],y||h.handleEvent,!1,h.h||h);if(!z)break;h.g[z.key]=z}h=a.H?w(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),pi(),uh(a.i,a.u,a.A,a.l,a.R,a.m)}zt.prototype.ca=function(a){a=a.target;let h=this.M;h&&an(a)==3?h.j():this.Y(a)},zt.prototype.Y=function(a){try{if(a==this.g)e:{let it=an(this.g);var h=this.g.Ba();let An=this.g.Z();if(!(3>it)&&(it!=3||this.g&&(this.h.h||this.g.oa()||_l(this.g)))){this.J||it!=4||h==7||(h==8||0>=An?pi(3):pi(2)),Go(this);var p=this.g.Z();this.X=p;t:if(Qc(this)){var y=_l(this.g);a="";var D=y.length,V=an(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){En(this),yi(this);var z="";break t}this.h.i=new c.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,a+=this.h.i.decode(y[h],{stream:!(V&&h==D-1)});y.length=0,this.h.g+=a,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=p==200,dh(this.i,this.u,this.A,this.l,this.R,it,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,rt=this.g;if((Pe=rt.g?rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(Pe)){var we=Pe;break t}}we=null}if(p=we)Te(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ho(this,p);else{this.o=!1,this.s=3,nt(12),En(this),yi(this);break e}}if(this.P){p=!0;let Ft;for(;!this.J&&this.C<z.length;)if(Ft=ph(this,z),Ft==Pr){it==4&&(this.s=4,nt(14),p=!1),Te(this.i,this.l,null,"[Incomplete Response]");break}else if(Ft==zo){this.s=4,nt(15),Te(this.i,this.l,z,"[Invalid Chunk]"),p=!1;break}else Te(this.i,this.l,Ft,null),Ho(this,Ft);if(Qc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),it!=4||z.length!=0||this.h.h||(this.s=1,nt(16),p=!1),this.o=this.o&&p,!p)Te(this.i,this.l,z,"[Invalid Chunked Response]"),En(this),yi(this);else if(0<z.length&&!this.W){this.W=!0;var lt=this.j;lt.g==this&&lt.ba&&!lt.M&&(lt.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Mr(lt),lt.M=!0,nt(11))}}else Te(this.i,this.l,z,null),Ho(this,z);it==4&&En(this),this.o&&!this.J&&(it==4?ta(this.j,this):(this.o=!1,_i(this)))}else Ih(this.g),p==400&&0<z.indexOf("Unknown SID")?(this.s=3,nt(12)):(this.s=0,nt(13)),En(this),yi(this)}}}catch{}finally{}};function Qc(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function ph(a,h){var p=a.C,y=h.indexOf(`
`,p);return y==-1?Pr:(p=Number(h.substring(p,y)),isNaN(p)?zo:(y+=1,y+p>h.length?Pr:(h=h.slice(y,y+p),a.C=y+p,h)))}zt.prototype.cancel=function(){this.J=!0,En(this)};function _i(a){a.S=Date.now()+a.I,Jc(a,a.I)}function Jc(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=mi(C(a.ba,a),h)}function Go(a){a.B&&(c.clearTimeout(a.B),a.B=null)}zt.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(hh(this.i,this.A),this.L!=2&&(pi(),nt(17)),En(this),this.s=2,yi(this)):Jc(this,this.S-a)};function yi(a){a.j.G==0||a.J||ta(a.j,a)}function En(a){Go(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,Bc(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Ho(a,h){try{var p=a.j;if(p.G!=0&&(p.g==a||Wo(p.h,a))){if(!a.K&&Wo(p.h,a)&&p.G==3){try{var y=p.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var D=y;if(D[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)Ai(p),Ts(p);else break e;Ci(p),nt(18)}}else p.za=D[1],0<p.za-p.T&&37500>D[2]&&p.F&&p.v==0&&!p.C&&(p.C=mi(C(p.Za,p),6e3));if(1>=el(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Cn(p,11)}else if((a.K||p.g==a)&&Ai(p),!ee(h))for(D=p.Da.g.parse(h),h=0;h<D.length;h++){let we=D[h];if(p.T=we[0],we=we[1],p.G==2)if(we[0]=="c"){p.K=we[1],p.ia=we[2];let lt=we[3];lt!=null&&(p.la=lt,p.j.info("VER="+p.la));let it=we[4];it!=null&&(p.Aa=it,p.j.info("SVER="+p.Aa));let An=we[5];An!=null&&typeof An=="number"&&0<An&&(y=1.5*An,p.L=y,p.j.info("backChannelRequestTimeoutMs_="+y)),y=p;let Ft=a.g;if(Ft){let As=Ft.g?Ft.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(As){var V=y.h;V.g||As.indexOf("spdy")==-1&&As.indexOf("quic")==-1&&As.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Ko(V,V.h),V.h=null))}if(y.D){let aa=Ft.g?Ft.g.getResponseHeader("X-HTTP-Session-Id"):null;aa&&(y.ya=aa,Oe(y.I,y.D,aa))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),y=p;var z=a;if(y.qa=ia(y,y.J?y.ia:null,y.W),z.K){tl(y.h,z);var Pe=z,rt=y.L;rt&&(Pe.I=rt),Pe.B&&(Go(Pe),_i(Pe)),y.g=z}else ea(y);0<p.i.length&&Cs(p)}else we[0]!="stop"&&we[0]!="close"||Cn(p,7);else p.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?Cn(p,7):Is(p):we[0]!="noop"&&p.l&&p.l.ta(we),p.v=0)}}pi(4)}catch{}}var Yc=class{constructor(a,h){this.g=a,this.map=h}};function Xc(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zc(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function el(a){return a.h?1:a.g?a.g.size:0}function Wo(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Ko(a,h){a.g?a.g.add(h):a.h=h}function tl(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Xc.prototype.cancel=function(){if(this.i=nl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function nl(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(let p of a.g.values())h=h.concat(p.D);return h}return U(a.i)}function rl(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var h=[],p=a.length,y=0;y<p;y++)h.push(a[y]);return h}h=[],p=0;for(y in a)h[p++]=a[y];return h}function mh(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var h=[];a=a.length;for(var p=0;p<a;p++)h.push(p);return h}h=[],p=0;for(let y in a)h[p++]=y;return h}}}function Qo(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var p=mh(a),y=rl(a),D=y.length,V=0;V<D;V++)h.call(void 0,y[V],p&&p[V],a)}var il=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gh(a,h){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var y=a[p].indexOf("="),D=null;if(0<=y){var V=a[p].substring(0,y);D=a[p].substring(y+1)}else V=a[p];h(V,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function St(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof St){this.h=a.h,vs(this,a.j),this.o=a.o,this.g=a.g,xr(this,a.s),this.l=a.l;var h=a.i,p=new bi;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Jo(this,p),this.m=a.m}else a&&(h=String(a).match(il))?(this.h=!1,vs(this,h[1]||"",!0),this.o=vi(h[2]||""),this.g=vi(h[3]||"",!0),xr(this,h[4]),this.l=vi(h[5]||"",!0),Jo(this,h[6]||"",!0),this.m=vi(h[7]||"")):(this.h=!1,this.i=new bi(null,this.h))}St.prototype.toString=function(){var a=[],h=this.j;h&&a.push(wi(h,sl,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(wi(h,sl,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(wi(p,p.charAt(0)=="/"?yh:Dr,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",wi(p,al)),a.join("")};function Gt(a){return new St(a)}function vs(a,h,p){a.j=p?vi(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function xr(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function Jo(a,h,p){h instanceof bi?(a.i=h,vh(a.i,a.h)):(p||(h=wi(h,ol)),a.i=new bi(h,a.h))}function Oe(a,h,p){a.i.set(h,p)}function ws(a){return Oe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function vi(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function wi(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,_h),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function _h(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var sl=/[#\/\?@]/g,Dr=/[#\?:]/g,yh=/[#\?]/g,ol=/[#\?@]/g,al=/#/g;function bi(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function In(a){a.g||(a.g=new Map,a.h=0,a.i&&gh(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=bi.prototype,n.add=function(a,h){In(this),this.i=null,a=kr(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function cl(a,h){In(a),h=kr(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function ll(a,h){return In(a),h=kr(a,h),a.g.has(h)}n.forEach=function(a,h){In(this),this.g.forEach(function(p,y){p.forEach(function(D){a.call(h,D,y,this)},this)},this)},n.na=function(){In(this);let a=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let y=0;y<h.length;y++){let D=a[y];for(let V=0;V<D.length;V++)p.push(h[y])}return p},n.V=function(a){In(this);let h=[];if(typeof a=="string")ll(this,a)&&(h=h.concat(this.g.get(kr(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)h=h.concat(a[p])}return h},n.set=function(a,h){return In(this),this.i=null,a=kr(this,a),ll(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},n.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function ul(a,h,p){cl(a,h),0<p.length&&(a.i=null,a.g.set(kr(a,h),U(p)),a.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var y=h[p];let V=encodeURIComponent(String(y)),z=this.V(y);for(y=0;y<z.length;y++){var D=V;z[y]!==""&&(D+="="+encodeURIComponent(String(z[y]))),a.push(D)}}return this.i=a.join("&")};function kr(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function vh(a,h){h&&!a.j&&(In(a),a.i=null,a.g.forEach(function(p,y){var D=y.toLowerCase();y!=D&&(cl(this,y),ul(this,D,p))},a)),a.j=h}function Or(a,h){let p=new gi;if(c.Image){let y=new Image;y.onload=k(Tn,p,"TestLoadImage: loaded",!0,h,y),y.onerror=k(Tn,p,"TestLoadImage: error",!1,h,y),y.onabort=k(Tn,p,"TestLoadImage: abort",!1,h,y),y.ontimeout=k(Tn,p,"TestLoadImage: timeout",!1,h,y),c.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else h(!1)}function wh(a,h){let p=new gi,y=new AbortController,D=setTimeout(()=>{y.abort(),Tn(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:y.signal}).then(V=>{clearTimeout(D),V.ok?Tn(p,"TestPingServer: ok",!0,h):Tn(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),Tn(p,"TestPingServer: error",!1,h)})}function Tn(a,h,p,y,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),y(p)}catch{}}function dl(){this.g=new lh}function bh(a,h,p){let y=p||"";try{Qo(a,function(D,V){let z=D;f(D)&&(z=Bo(D)),h.push(y+V+"="+encodeURIComponent(z))})}catch(D){throw h.push(y+"type="+encodeURIComponent("_badmap")),D}}function Rt(a){this.l=a.Ub||null,this.j=a.eb||!1}F(Rt,rn),Rt.prototype.g=function(){return new bs(this.l,this.j)},Rt.prototype.i=function(a){return function(){return a}}({});function bs(a,h){Qe.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}F(bs,Qe),n=bs.prototype,n.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Ei(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,on(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ei(this)),this.g&&(this.readyState=3,Ei(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Yo(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Yo(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?on(this):Ei(this),this.readyState==3&&Yo(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,on(this))},n.Qa=function(a){this.g&&(this.response=a,on(this))},n.ga=function(){this.g&&on(this)};function on(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ei(a)}n.setRequestHeader=function(a,h){this.u.append(a,h)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function Ei(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(bs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function hl(a){let h="";return ue(a,function(p,y){h+=y,h+=":",h+=p,h+=`\r
`}),h}function Xo(a,h,p){e:{for(y in p){var y=!1;break e}y=!0}y||(p=hl(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):Oe(a,h,p))}function Fe(a){Qe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}F(Fe,Qe);var Nr=/^https?$/i,Eh=["POST","PUT"];n=Fe.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,h,p,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qo.g(),this.v=this.o?jc(this.o):jc(qo),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(V){fl(this,V);return}if(a=p||"",p=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var D in y)p.set(D,y[D]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(let V of y.keys())p.set(V,y.get(V));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(p.keys()).find(V=>V.toLowerCase()=="content-type"),D=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Eh,h,void 0))||y||D||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[V,z]of p)this.g.setRequestHeader(V,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gl(this),this.u=!0,this.g.send(a),this.u=!1}catch(V){fl(this,V)}};function fl(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,pl(a),Es(a)}function pl(a){a.A||(a.A=!0,ct(a,"complete"),ct(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ct(this,"complete"),ct(this,"abort"),Es(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Es(this,!0)),Fe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ml(this):this.bb())},n.bb=function(){ml(this)};function ml(a){if(a.h&&typeof o<"u"&&(!a.v[1]||an(a)!=4||a.Z()!=2)){if(a.u&&an(a)==4)mt(a.Ea,0,a);else if(ct(a,"readystatechange"),an(a)==4){a.h=!1;try{let z=a.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var y;if(y=z===0){var D=String(a.D).match(il)[1]||null;!D&&c.self&&c.self.location&&(D=c.self.location.protocol.slice(0,-1)),y=!Nr.test(D?D.toLowerCase():"")}p=y}if(p)ct(a,"complete"),ct(a,"success");else{a.m=6;try{var V=2<an(a)?a.g.statusText:""}catch{V=""}a.l=V+" ["+a.Z()+"]",pl(a)}}finally{Es(a)}}}}function Es(a,h){if(a.g){gl(a);let p=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||ct(a,"ready");try{p.onreadystatechange=y}catch{}}}function gl(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function an(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<an(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),ch(h)}};function _l(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Ih(a){let h={};a=(a.g&&2<=an(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(ee(a[y]))continue;var p=R(a[y]);let D=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let V=h[D]||[];h[D]=V,V.push(p)}P(h,function(y){return y.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ii(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function Ti(a){this.Aa=0,this.i=[],this.j=new gi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ii("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ii("baseRetryDelayMs",5e3,a),this.cb=Ii("retryDelaySeedMs",1e4,a),this.Wa=Ii("forwardChannelMaxRetries",2,a),this.wa=Ii("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Xc(a&&a.concurrentRequestLimit),this.Da=new dl,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ti.prototype,n.la=8,n.G=1,n.connect=function(a,h,p,y){nt(0),this.W=a,this.H=h||{},p&&y!==void 0&&(this.H.OSID=p,this.H.OAID=y),this.F=this.X,this.I=ia(this,null,this.W),Cs(this)};function Is(a){if(yl(a),a.G==3){var h=a.U++,p=Gt(a.I);if(Oe(p,"SID",a.K),Oe(p,"RID",h),Oe(p,"TYPE","terminate"),Kn(a,p),h=new zt(a,a.j,h),h.L=2,h.v=ws(Gt(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&c.Image&&(new Image().src=h.v,p=!0),p||(h.g=sa(h.j,null),h.g.ea(h.v)),h.F=Date.now(),_i(h)}ra(a)}function Ts(a){a.g&&(Mr(a),a.g.cancel(),a.g=null)}function yl(a){Ts(a),a.u&&(c.clearTimeout(a.u),a.u=null),Ai(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Cs(a){if(!Zc(a.h)&&!a.s){a.s=!0;var h=a.Ga;wr||Nt(),Wn||(wr(),Wn=!0),br.add(h,a),a.B=0}}function vl(a,h){return el(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=mi(C(a.Ga,a,h),na(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let D=new zt(this,this.j,a),V=this.o;if(this.S&&(V?(V=w(V),S(V,this.S)):V=this.S),this.m!==null||this.O||(D.H=V,V=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var y=this.i[p];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Zo(this,D,h),p=Gt(this.I),Oe(p,"RID",a),Oe(p,"CVER",22),this.D&&Oe(p,"X-HTTP-Session-Id",this.D),Kn(this,p),V&&(this.O?h="headers="+encodeURIComponent(String(hl(V)))+"&"+h:this.m&&Xo(p,this.m,V)),Ko(this.h,D),this.Ua&&Oe(p,"TYPE","init"),this.P?(Oe(p,"$req",h),Oe(p,"SID","null"),D.T=!0,Ve(D,p,null)):Ve(D,p,h),this.G=2}}else this.G==3&&(a?wl(this,a):this.i.length==0||Zc(this.h)||wl(this))};function wl(a,h){var p;h?p=h.l:p=a.U++;let y=Gt(a.I);Oe(y,"SID",a.K),Oe(y,"RID",p),Oe(y,"AID",a.T),Kn(a,y),a.m&&a.o&&Xo(y,a.m,a.o),p=new zt(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Zo(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Ko(a.h,p),Ve(p,y,h)}function Kn(a,h){a.H&&ue(a.H,function(p,y){Oe(h,y,p)}),a.l&&Qo({},function(p,y){Oe(h,y,p)})}function Zo(a,h,p){p=Math.min(a.i.length,p);var y=a.l?C(a.l.Na,a.l,a):null;e:{var D=a.i;let V=-1;for(;;){let z=["count="+p];V==-1?0<p?(V=D[0].g,z.push("ofs="+V)):V=0:z.push("ofs="+V);let Pe=!0;for(let rt=0;rt<p;rt++){let we=D[rt].g,lt=D[rt].map;if(we-=V,0>we)V=Math.max(0,D[rt].g-100),Pe=!1;else try{bh(lt,z,"req"+we+"_")}catch{y&&y(lt)}}if(Pe){y=z.join("&");break e}}}return a=a.i.splice(0,p),h.D=a,y}function ea(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;wr||Nt(),Wn||(wr(),Wn=!0),br.add(h,a),a.v=0}}function Ci(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=mi(C(a.Fa,a),na(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,bl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=mi(C(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nt(10),Ts(this),bl(this))};function Mr(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function bl(a){a.g=new zt(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Gt(a.qa);Oe(h,"RID","rpc"),Oe(h,"SID",a.K),Oe(h,"AID",a.T),Oe(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&Oe(h,"TO",a.ja),Oe(h,"TYPE","xmlhttp"),Kn(a,h),a.m&&a.o&&Xo(h,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=ws(Gt(h)),p.m=null,p.P=!0,Kc(p,a)}n.Za=function(){this.C!=null&&(this.C=null,Ts(this),Ci(this),nt(19))};function Ai(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function ta(a,h){var p=null;if(a.g==h){Ai(a),Mr(a),a.g=null;var y=2}else if(Wo(a.h,h))p=h.D,tl(a.h,h),y=1;else return;if(a.G!=0){if(h.o)if(y==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var D=a.B;y=gs(),ct(y,new Hc(y,p)),Cs(a)}else ea(a);else if(D=h.s,D==3||D==0&&0<h.X||!(y==1&&vl(a,h)||y==2&&Ci(a)))switch(p&&0<p.length&&(h=a.h,h.i=h.i.concat(p)),D){case 1:Cn(a,5);break;case 4:Cn(a,10);break;case 3:Cn(a,6);break;default:Cn(a,2)}}}function na(a,h){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*h}function Cn(a,h){if(a.j.info("Error code "+h),h==2){var p=C(a.fb,a),y=a.Xa;let D=!y;y=new St(y||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||vs(y,"https"),ws(y),D?Or(y.toString(),p):wh(y.toString(),p)}else nt(2);a.G=0,a.l&&a.l.sa(h),ra(a),yl(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function ra(a){if(a.G=0,a.ka=[],a.l){let h=nl(a.h);(h.length!=0||a.i.length!=0)&&(M(a.ka,h),M(a.ka,a.i),a.h.i.length=0,U(a.i),a.i.length=0),a.l.ra()}}function ia(a,h,p){var y=p instanceof St?Gt(p):new St(p);if(y.g!="")h&&(y.g=h+"."+y.g),xr(y,y.s);else{var D=c.location;y=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var V=new St(null);y&&vs(V,y),h&&(V.g=h),D&&xr(V,D),p&&(V.l=p),y=V}return p=a.D,h=a.ya,p&&h&&Oe(y,p,h),Oe(y,"VER",a.la),Kn(a,y),y}function sa(a,h,p){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Fe(new Rt({eb:p})):new Fe(a.pa),h.Ha(a.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function oa(){}n=oa.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Si(){}Si.prototype.g=function(a,h){return new Je(a,h)};function Je(a,h){Qe.call(this),this.g=new Ti(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!ee(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!ee(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Vr(this)}F(Je,Qe),Je.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Je.prototype.close=function(){Is(this.g)},Je.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=Bo(a),a=p);h.i.push(new Yc(h.Ya++,a)),h.G==3&&Cs(h)},Je.prototype.N=function(){this.g.l=null,delete this.j,Is(this.g),delete this.g,Je.aa.N.call(this)};function El(a){jo.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(let p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}F(El,jo);function Il(){$o.call(this),this.status=1}F(Il,$o);function Vr(a){this.g=a}F(Vr,oa),Vr.prototype.ua=function(){ct(this.g,"a")},Vr.prototype.ta=function(a){ct(this.g,new El(a))},Vr.prototype.sa=function(a){ct(this.g,new Il)},Vr.prototype.ra=function(){ct(this.g,"b")},Si.prototype.createWebChannel=Si.prototype.g,Je.prototype.send=Je.prototype.o,Je.prototype.open=Je.prototype.m,Je.prototype.close=Je.prototype.close,_m=fr.createWebChannelTransport=function(){return new Si},gm=fr.getStatEventTarget=function(){return gs()},mm=fr.Event=sn,sd=fr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_s.NO_ERROR=0,_s.TIMEOUT=8,_s.HTTP_ERROR=6,ac=fr.ErrorCode=_s,Wc.COMPLETE="complete",pm=fr.EventType=Wc,$c.EventType=fi,fi.OPEN="a",fi.CLOSE="b",fi.ERROR="c",fi.MESSAGE="d",Qe.prototype.listen=Qe.prototype.K,io=fr.WebChannel=$c,Mx=fr.FetchXmlHttpFactory=Rt,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,fm=fr.XhrIo=Fe}).apply(typeof id<"u"?id:typeof self<"u"?self:typeof window<"u"?window:{});var W0="@firebase/firestore";var ft=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ft.UNAUTHENTICATED=new ft(null),ft.GOOGLE_CREDENTIALS=new ft("google-credentials-uid"),ft.FIRST_PARTY=new ft("first-party-uid"),ft.MOCK_USER=new ft("mock-user");var Po="10.14.0";var rs=new ei("@firebase/firestore");function cc(){return rs.logLevel}function X(n,...e){if(rs.logLevel<=ye.DEBUG){let t=e.map(i_);rs.debug(`Firestore (${Po}): ${n}`,...t)}}function pr(n,...e){if(rs.logLevel<=ye.ERROR){let t=e.map(i_);rs.error(`Firestore (${Po}): ${n}`,...t)}}function fo(n,...e){if(rs.logLevel<=ye.WARN){let t=e.map(i_);rs.warn(`Firestore (${Po}): ${n}`,...t)}}function i_(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ce(n="Unexpected state"){let e=`FIRESTORE (${Po}) INTERNAL ASSERTION FAILED: `+n;throw pr(e),new Error(e)}function De(n,e){n||ce()}function le(n,e){return n}var L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Q=class extends At{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Fn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var ud=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Em=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ft.UNAUTHENTICATED))}shutdown(){}},Im=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Tm=class{constructor(e){this.t=e,this.currentUser=ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){De(this.o===void 0);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),s=new Fn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Fn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>E(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},c=l=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Fn)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string"),new ud(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new ft(e)}},Cm=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ft.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Am=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Cm(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Sm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Rm=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){De(this.o===void 0);let r=s=>{s.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(De(typeof t.token=="string"),this.R=t.token,new Sm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Vx(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var dd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Vx(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function Re(n,e){return n<e?-1:n>e?1:0}function po(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var yt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var de=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new yt(0,0))}static max(){return new n(new yt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var hd=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ce(),r===void 0?r=e.length-t:r>e.length-t&&ce(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},je=class n extends hd{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new Q(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Fx=/^[_a-zA-Z][_a-zA-Z0-9]*$/,jt=class n extends hd{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Fx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new Q(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new Q(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Q(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new Q(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var re=class n{constructor(e){this.path=e}static fromPath(e){return new n(je.fromString(e))}static fromName(e){return new n(je.fromString(e).popFirst(5))}static empty(){return new n(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new je(e.slice()))}};var Pm=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Pm.UNKNOWN_ID=-1;function Lx(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=de.fromTimestamp(r===1e9?new yt(t+1,0):new yt(t,r));return new is(i,re.empty(),e)}function Ux(n){return new is(n.readTime,n.key,-1)}var is=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(de.min(),re.empty(),-1)}static max(){return new n(de.max(),re.empty(),-1)}};function Bx(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=re.comparator(n.documentKey,e.documentKey),t!==0?t:Re(n.largestBatchId,e.largestBatchId))}var jx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",xm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ac(n){return E(this,null,function*(){if(n.code!==L.FAILED_PRECONDITION||n.message!==jx)throw n;X("LocalStore","Unexpectedly lost primary lease")})}var q=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),c=0;for(let l=0;l<s;l++){let f=l;t(e[f]).next(_=>{o[f]=_,++c,c===s&&r(o)},_=>i(_))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function $x(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Sc(n){return n.name==="IndexedDbTransactionError"}var Sb=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Bd(n){return n==null}function pc(n){return n===0&&1/n==-1/0}function qx(n){return typeof n=="number"&&Number.isInteger(n)&&!pc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var zx=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],JF=[...zx,"documentOverlays"],Gx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Hx=Gx,Wx=[...Hx,"indexConfiguration","indexState","indexEntries"];var YF=[...Wx,"globals"];function K0(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function us(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Rb(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var qe=class n{constructor(e,t){this.comparator=e,this.root=t||Ln.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ln.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new co(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new co(this.root,e,this.comparator,!1)}getReverseIterator(){return new co(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new co(this.root,e,this.comparator,!0)}},co=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ln=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ce();let e=this.left.check();if(e!==this.right.check())throw ce();return e+(this.isRed()?0:1)}};Ln.EMPTY=null,Ln.RED=!0,Ln.BLACK=!1;Ln.EMPTY=new class{constructor(){this.size=0}get key(){throw ce()}get value(){throw ce()}get color(){throw ce()}get left(){throw ce()}get right(){throw ce()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Ln(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var It=class n{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fd(this.data.getIterator())}getIteratorFrom(e){return new fd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},fd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Zt=class n{constructor(e){this.fields=e,e.sort(jt.comparator)}static empty(){return new n([])}unionWith(e){let t=new It(jt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return po(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var pd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Tt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new pd("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Tt.EMPTY_BYTE_STRING=new Tt("");var Kx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mr(n){if(De(!!n),typeof n=="string"){let e=0,t=Kx.exec(n);if(De(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ue(n.seconds),nanos:Ue(n.nanos)}}function Ue(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ui(n){return typeof n=="string"?Tt.fromBase64String(n):Tt.fromUint8Array(n)}function s_(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function o_(n){let e=n.mapValue.fields.__previous_value__;return s_(e)?o_(e):e}function mc(n){let e=mr(n.mapValue.fields.__local_write_time__.timestampValue);return new yt(e.seconds,e.nanos)}var Dm=class{constructor(e,t,r,i,s,o,c,l,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=f}},md=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var od={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ss(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?s_(n)?4:xb(n)?9007199254740991:Pb(n)?10:11:ce()}function jn(n,e){if(n===e)return!0;let t=ss(n);if(t!==ss(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return mc(n).isEqual(mc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=mr(i.timestampValue),c=mr(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return ui(i.bytesValue).isEqual(ui(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Ue(i.geoPointValue.latitude)===Ue(s.geoPointValue.latitude)&&Ue(i.geoPointValue.longitude)===Ue(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ue(i.integerValue)===Ue(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ue(i.doubleValue),c=Ue(s.doubleValue);return o===c?pc(o)===pc(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return po(n.arrayValue.values||[],e.arrayValue.values||[],jn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(K0(o)!==K0(c))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!jn(o[l],c[l])))return!1;return!0}(n,e);default:return ce()}}function gc(n,e){return(n.values||[]).find(t=>jn(t,e))!==void 0}function mo(n,e){if(n===e)return 0;let t=ss(n),r=ss(e);if(t!==r)return Re(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Re(n.booleanValue,e.booleanValue);case 2:return function(s,o){let c=Ue(s.integerValue||s.doubleValue),l=Ue(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,e);case 3:return Q0(n.timestampValue,e.timestampValue);case 4:return Q0(mc(n),mc(e));case 5:return Re(n.stringValue,e.stringValue);case 6:return function(s,o){let c=ui(s),l=ui(o);return c.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),l=o.split("/");for(let f=0;f<c.length&&f<l.length;f++){let _=Re(c[f],l[f]);if(_!==0)return _}return Re(c.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let c=Re(Ue(s.latitude),Ue(o.latitude));return c!==0?c:Re(Ue(s.longitude),Ue(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return J0(n.arrayValue,e.arrayValue);case 10:return function(s,o){var c,l,f,_;let g=s.fields||{},C=o.fields||{},k=(c=g.value)===null||c===void 0?void 0:c.arrayValue,F=(l=C.value)===null||l===void 0?void 0:l.arrayValue,U=Re(((f=k?.values)===null||f===void 0?void 0:f.length)||0,((_=F?.values)===null||_===void 0?void 0:_.length)||0);return U!==0?U:J0(k,F)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===od.mapValue&&o===od.mapValue)return 0;if(s===od.mapValue)return 1;if(o===od.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),f=o.fields||{},_=Object.keys(f);l.sort(),_.sort();for(let g=0;g<l.length&&g<_.length;++g){let C=Re(l[g],_[g]);if(C!==0)return C;let k=mo(c[l[g]],f[_[g]]);if(k!==0)return k}return Re(l.length,_.length)}(n.mapValue,e.mapValue);default:throw ce()}}function Q0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Re(n,e);let t=mr(n),r=mr(e),i=Re(t.seconds,r.seconds);return i!==0?i:Re(t.nanos,r.nanos)}function J0(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=mo(t[i],r[i]);if(s)return s}return Re(t.length,r.length)}function go(n){return km(n)}function km(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=mr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ui(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return re.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=km(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${km(t.fields[o])}`;return i+"}"}(n.mapValue):ce()}function Y0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Om(n){return!!n&&"integerValue"in n}function a_(n){return!!n&&"arrayValue"in n}function X0(n){return!!n&&"nullValue"in n}function Z0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function cd(n){return!!n&&"mapValue"in n}function Pb(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function uc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return us(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=uc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=uc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function xb(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Bt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!cd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uc(t)}setAll(e){let t=jt.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=c.popLast()}o?r[c.lastSegment()]=uc(o):i.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());cd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return jn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];cd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){us(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(uc(this.value))}};function Db(n){let e=[];return us(n.fields,(t,r)=>{let i=new jt([t]);if(cd(r)){let s=Db(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Zt(e)}var pn=class n{constructor(e,t,r,i,s,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new n(e,0,de.min(),de.min(),de.min(),Bt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,de.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,de.min(),de.min(),Bt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,de.min(),de.min(),Bt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var _o=class{constructor(e,t){this.position=e,this.inclusive=t}};function eb(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=re.comparator(re.fromName(o.referenceValue),t.key):r=mo(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function tb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!jn(n.position[t],e.position[t]))return!1;return!0}var yo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Qx(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var gd=class{},tt=class n extends gd{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Mm(e,t,r):t==="array-contains"?new Lm(e,r):t==="in"?new Um(e,r):t==="not-in"?new Bm(e,r):t==="array-contains-any"?new jm(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Vm(e,r):new Fm(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(mo(t,this.value)):t!==null&&ss(this.value)===ss(t)&&this.matchesComparison(mo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},mn=class n extends gd{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return kb(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function kb(n){return n.op==="and"}function Ob(n){return Jx(n)&&kb(n)}function Jx(n){for(let e of n.filters)if(e instanceof mn)return!1;return!0}function Nm(n){if(n instanceof tt)return n.field.canonicalString()+n.op.toString()+go(n.value);if(Ob(n))return n.filters.map(e=>Nm(e)).join(",");{let e=n.filters.map(t=>Nm(t)).join(",");return`${n.op}(${e})`}}function Nb(n,e){return n instanceof tt?function(r,i){return i instanceof tt&&r.op===i.op&&r.field.isEqual(i.field)&&jn(r.value,i.value)}(n,e):n instanceof mn?function(r,i){return i instanceof mn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&Nb(o,i.filters[c]),!0):!1}(n,e):void ce()}function Mb(n){return n instanceof tt?function(t){return`${t.field.canonicalString()} ${t.op} ${go(t.value)}`}(n):n instanceof mn?function(t){return t.op.toString()+" {"+t.getFilters().map(Mb).join(" ,")+"}"}(n):"Filter"}var Mm=class extends tt{constructor(e,t,r){super(e,t,r),this.key=re.fromName(r.referenceValue)}matches(e){let t=re.comparator(e.key,this.key);return this.matchesComparison(t)}},Vm=class extends tt{constructor(e,t){super(e,"in",t),this.keys=Vb("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Fm=class extends tt{constructor(e,t){super(e,"not-in",t),this.keys=Vb("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Vb(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>re.fromName(r.referenceValue))}var Lm=class extends tt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return a_(t)&&gc(t.arrayValue,this.value)}},Um=class extends tt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&gc(this.value.arrayValue,t)}},Bm=class extends tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(gc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!gc(this.value.arrayValue,t)}},jm=class extends tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!a_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>gc(this.value.arrayValue,r))}};var $m=class{constructor(e,t=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function nb(n,e=null,t=[],r=[],i=null,s=null,o=null){return new $m(n,e,t,r,i,s,o)}function c_(n){let e=le(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Nm(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Bd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>go(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>go(r)).join(",")),e.ue=t}return e.ue}function l_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Qx(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Nb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!tb(n.startAt,e.startAt)&&tb(n.endAt,e.endAt)}function qm(n){return re.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var os=class{constructor(e,t=null,r=[],i=[],s=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Yx(n,e,t,r,i,s,o,c){return new os(n,e,t,r,i,s,o,c)}function Fb(n){return new os(n)}function rb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Lb(n){return n.collectionGroup!==null}function dc(n){let e=le(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new It(jt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new yo(s,r))}),t.has(jt.keyField().canonicalString())||e.ce.push(new yo(jt.keyField(),r))}return e.ce}function Un(n){let e=le(n);return e.le||(e.le=Xx(e,dc(n))),e.le}function Xx(n,e){if(n.limitType==="F")return nb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new yo(i.field,s)});let t=n.endAt?new _o(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new _o(n.startAt.position,n.startAt.inclusive):null;return nb(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function zm(n,e){let t=n.filters.concat([e]);return new os(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Gm(n,e,t){return new os(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jd(n,e){return l_(Un(n),Un(e))&&n.limitType===e.limitType}function Ub(n){return`${c_(Un(n))}|lt:${n.limitType}`}function so(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Mb(i)).join(", ")}]`),Bd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>go(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>go(i)).join(",")),`Target(${r})`}(Un(n))}; limitType=${n.limitType})`}function $d(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):re.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of dc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,c,l){let f=eb(o,c,l);return o.inclusive?f<=0:f<0}(r.startAt,dc(r),i)||r.endAt&&!function(o,c,l){let f=eb(o,c,l);return o.inclusive?f>=0:f>0}(r.endAt,dc(r),i))}(n,e)}function Zx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Bb(n){return(e,t)=>{let r=!1;for(let i of dc(n)){let s=eD(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function eD(n,e,t){let r=n.field.isKeyField()?re.comparator(e.key,t.key):function(s,o,c){let l=o.data.field(s),f=c.data.field(s);return l!==null&&f!==null?mo(l,f):ce()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ce()}}var di=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){us(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return Rb(this.inner)}size(){return this.innerSize}};var tD=new qe(re.comparator);function gr(){return tD}var jb=new qe(re.comparator);function lc(...n){let e=jb;for(let t of n)e=e.insert(t.key,t);return e}function $b(n){let e=jb;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ts(){return hc()}function qb(){return hc()}function hc(){return new di(n=>n.toString(),(n,e)=>n.isEqual(e))}var nD=new qe(re.comparator),rD=new It(re.comparator);function ve(...n){let e=rD;for(let t of n)e=e.add(t);return e}var iD=new It(Re);function sD(){return iD}function u_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pc(e)?"-0":e}}function zb(n){return{integerValue:""+n}}function oD(n,e){return qx(e)?zb(e):u_(n,e)}var vo=class{constructor(){this._=void 0}};function aD(n,e,t){return n instanceof wo?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&s_(s)&&(s=o_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof as?Hb(n,e):n instanceof cs?Wb(n,e):function(i,s){let o=Gb(i,s),c=ib(o)+ib(i.Pe);return Om(o)&&Om(i.Pe)?zb(c):u_(i.serializer,c)}(n,e)}function cD(n,e,t){return n instanceof as?Hb(n,e):n instanceof cs?Wb(n,e):t}function Gb(n,e){return n instanceof bo?function(r){return Om(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var wo=class extends vo{},as=class extends vo{constructor(e){super(),this.elements=e}};function Hb(n,e){let t=Kb(e);for(let r of n.elements)t.some(i=>jn(i,r))||t.push(r);return{arrayValue:{values:t}}}var cs=class extends vo{constructor(e){super(),this.elements=e}};function Wb(n,e){let t=Kb(e);for(let r of n.elements)t=t.filter(i=>!jn(i,r));return{arrayValue:{values:t}}}var bo=class extends vo{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function ib(n){return Ue(n.integerValue||n.doubleValue)}function Kb(n){return a_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function lD(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof as&&i instanceof as||r instanceof cs&&i instanceof cs?po(r.elements,i.elements,jn):r instanceof bo&&i instanceof bo?jn(r.Pe,i.Pe):r instanceof wo&&i instanceof wo}(n.transform,e.transform)}var Hm=class{constructor(e,t){this.version=e,this.transformResults=t}},ci=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ld(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Eo=class{};function Qb(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new _d(n.key,ci.none()):new ls(n.key,n.data,ci.none());{let t=n.data,r=Bt.empty(),i=new It(jt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new $n(n.key,r,new Zt(i.toArray()),ci.none())}}function uD(n,e,t){n instanceof ls?function(i,s,o){let c=i.value.clone(),l=ob(i.fieldTransforms,s,o.transformResults);c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof $n?function(i,s,o){if(!ld(i.precondition,s))return void s.convertToUnknownDocument(o.version);let c=ob(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Jb(i)),l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function fc(n,e,t,r){return n instanceof ls?function(s,o,c,l){if(!ld(s.precondition,o))return c;let f=s.value.clone(),_=ab(s.fieldTransforms,l,o);return f.setAll(_),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof $n?function(s,o,c,l){if(!ld(s.precondition,o))return c;let f=ab(s.fieldTransforms,l,o),_=o.data;return _.setAll(Jb(s)),_.setAll(f),o.convertToFoundDocument(o.version,_).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(s,o,c){return ld(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,e,t)}function dD(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=Gb(r.transform,i||null);s!=null&&(t===null&&(t=Bt.empty()),t.set(r.field,s))}return t||null}function sb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&po(r,i,(s,o)=>lD(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ls=class extends Eo{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},$n=class extends Eo{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function Jb(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function ob(n,e,t){let r=new Map;De(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,cD(o,c,t[i]))}return r}function ab(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,aD(s,o,e))}return r}var _d=class extends Eo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Wm=class extends Eo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Km=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&uD(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=fc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=fc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=qb();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=t.has(i.key)?null:c;let l=Qb(o,c);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(de.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ve())}isEqual(e){return this.batchId===e.batchId&&po(this.mutations,e.mutations,(t,r)=>sb(t,r))&&po(this.baseMutations,e.baseMutations,(t,r)=>sb(t,r))}},Qm=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){De(e.mutations.length===r.length);let i=function(){return nD}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var Jm=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Ym=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ze,Ee;function hD(n){switch(n){default:return ce();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function Yb(n){if(n===void 0)return pr("GRPC error has no .code"),L.UNKNOWN;switch(n){case Ze.OK:return L.OK;case Ze.CANCELLED:return L.CANCELLED;case Ze.UNKNOWN:return L.UNKNOWN;case Ze.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Ze.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Ze.INTERNAL:return L.INTERNAL;case Ze.UNAVAILABLE:return L.UNAVAILABLE;case Ze.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Ze.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Ze.NOT_FOUND:return L.NOT_FOUND;case Ze.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Ze.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Ze.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Ze.ABORTED:return L.ABORTED;case Ze.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Ze.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Ze.DATA_LOSS:return L.DATA_LOSS;default:return ce()}}(Ee=Ze||(Ze={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";var cb=null;function fD(){return new TextEncoder}var pD=new ai([4294967295,4294967295],0);function lb(n){let e=fD().encode(n),t=new hm;return t.update(e),new Uint8Array(t.digest())}function ub(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ai([t,r],0),new ai([i,s],0)]}var Xm=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ns(`Invalid padding: ${t}`);if(r<0)throw new ns(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ns(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ns(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ai.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(ai.fromNumber(r)));return i.compare(pD)===1&&(i=new ai([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=lb(e),[r,i]=ub(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let t=lb(e),[r,i]=ub(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ns=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var yd=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,_c.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(de.min(),i,new qe(Re),gr(),ve())}},_c=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ve(),ve(),ve())}};var uo=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},vd=class{constructor(e,t){this.targetId=e,this.me=t}},wd=class{constructor(e,t,r=Tt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},bd=class{constructor(){this.fe=0,this.ge=hb(),this.pe=Tt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ve(),t=ve(),r=ve();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ce()}}),new _c(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=hb()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,De(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Zm=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=gr(),this.qe=db(),this.Qe=new qe(Re)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:ce()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(qm(s))if(r===0){let o=new re(s.path);this.Ue(t,o,pn.newNoDocument(o,de.min()))}else De(r===1);else{let o=this.Ye(t);if(o!==r){let c=this.Ze(e),l=c?this.Xe(c,e,o):1;if(l!==0){this.je(t);let f=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,f)}cb?.et(function(_,g,C,k,F){var U,M,J,ee,W,se;let Ie={localCacheCount:_,existenceFilterCount:g.count,databaseId:C.database,projectId:C.projectId},ue=g.unchangedNames;return ue&&(Ie.bloomFilter={applied:F===0,hashCount:(U=ue?.hashCount)!==null&&U!==void 0?U:0,bitmapLength:(ee=(J=(M=ue?.bits)===null||M===void 0?void 0:M.bitmap)===null||J===void 0?void 0:J.length)!==null&&ee!==void 0?ee:0,padding:(se=(W=ue?.bits)===null||W===void 0?void 0:W.padding)!==null&&se!==void 0?se:0,mightContain:P=>{var w;return(w=k?.mightContain(P))!==null&&w!==void 0&&w}}),Ie}(o,e.me,this.Le.tt(),c,l))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,c;try{o=ui(r).toUint8Array()}catch(l){if(l instanceof pd)return fo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Xm(o,i,s)}catch(l){return fo(l instanceof ns?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&qm(c.target)){let l=new re(c.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,pn.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=ve();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(l=>{let f=this.Je(l);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new yd(e,t,this.Qe,this.ke,r);return this.ke=gr(),this.qe=db(),this.Qe=new qe(Re),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new bd,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new It(Re),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||X("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new bd),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function db(){return new qe(re.comparator)}function hb(){return new qe(re.comparator)}var mD={asc:"ASCENDING",desc:"DESCENDING"},gD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_D={and:"AND",or:"OR"},eg=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function tg(n,e){return n.useProto3Json||Bd(e)?e:{value:e}}function Ed(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Xb(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function yD(n,e){return Ed(n,e.toTimestamp())}function Bn(n){return De(!!n),de.fromTimestamp(function(t){let r=mr(t);return new yt(r.seconds,r.nanos)}(n))}function d_(n,e){return ng(n,e).canonicalString()}function ng(n,e){let t=function(i){return new je(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Zb(n){let e=je.fromString(n);return De(iE(e)),e}function rg(n,e){return d_(n.databaseId,e.path)}function ym(n,e){let t=Zb(e);if(t.get(1)!==n.databaseId.projectId)throw new Q(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Q(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new re(tE(t))}function eE(n,e){return d_(n.databaseId,e)}function vD(n){let e=Zb(n);return e.length===4?je.emptyPath():tE(e)}function ig(n){return new je(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function tE(n){return De(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function fb(n,e,t){return{name:rg(n,e),fields:t.value.mapValue.fields}}function wD(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ce()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(f,_){return f.useProto3Json?(De(_===void 0||typeof _=="string"),Tt.fromBase64String(_||"")):(De(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Tt.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(f){let _=f.code===void 0?L.UNKNOWN:Yb(f.code);return new Q(_,f.message||"")}(o);t=new wd(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ym(n,r.document.name),s=Bn(r.document.updateTime),o=r.document.createTime?Bn(r.document.createTime):de.min(),c=new Bt({mapValue:{fields:r.document.fields}}),l=pn.newFoundDocument(i,s,o,c),f=r.targetIds||[],_=r.removedTargetIds||[];t=new uo(f,_,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ym(n,r.document),s=r.readTime?Bn(r.readTime):de.min(),o=pn.newNoDocument(i,s),c=r.removedTargetIds||[];t=new uo([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ym(n,r.document),s=r.removedTargetIds||[];t=new uo([],s,i,null)}else{if(!("filter"in e))return ce();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Ym(i,s),c=r.targetId;t=new vd(c,o)}}return t}function bD(n,e){let t;if(e instanceof ls)t={update:fb(n,e.key,e.value)};else if(e instanceof _d)t={delete:rg(n,e.key)};else if(e instanceof $n)t={update:fb(n,e.key,e.data),updateMask:xD(e.fieldMask)};else{if(!(e instanceof Wm))return ce();t={verify:rg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let c=o.transform;if(c instanceof wo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof as)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof cs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof bo)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw ce()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:yD(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ce()}(n,e.precondition)),t}function ED(n,e){return n&&n.length>0?(De(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?Bn(i.updateTime):Bn(s);return o.isEqual(de.min())&&(o=Bn(s)),new Hm(o,i.transformResults||[])}(t,e))):[]}function ID(n,e){return{documents:[eE(n,e.path)]}}function TD(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=eE(n,i);let s=function(f){if(f.length!==0)return rE(mn.create(f,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(f){if(f.length!==0)return f.map(_=>function(C){return{field:oo(C.field),direction:SD(C.dir)}}(_))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let c=tg(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{_t:t,parent:i}}function CD(n){let e=vD(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){De(r===1);let _=t.from[0];_.allDescendants?i=_.collectionId:e=e.child(_.collectionId)}let s=[];t.where&&(s=function(g){let C=nE(g);return C instanceof mn&&Ob(C)?C.getFilters():[C]}(t.where));let o=[];t.orderBy&&(o=function(g){return g.map(C=>function(F){return new yo(ao(F.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(F.direction))}(C))}(t.orderBy));let c=null;t.limit&&(c=function(g){let C;return C=typeof g=="object"?g.value:g,Bd(C)?null:C}(t.limit));let l=null;t.startAt&&(l=function(g){let C=!!g.before,k=g.values||[];return new _o(k,C)}(t.startAt));let f=null;return t.endAt&&(f=function(g){let C=!g.before,k=g.values||[];return new _o(k,C)}(t.endAt)),Yx(e,i,o,s,c,"F",l,f)}function AD(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ce()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function nE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ao(t.unaryFilter.field);return tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ao(t.unaryFilter.field);return tt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=ao(t.unaryFilter.field);return tt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=ao(t.unaryFilter.field);return tt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ce()}}(n):n.fieldFilter!==void 0?function(t){return tt.create(ao(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ce()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return mn.create(t.compositeFilter.filters.map(r=>nE(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ce()}}(t.compositeFilter.op))}(n):ce()}function SD(n){return mD[n]}function RD(n){return gD[n]}function PD(n){return _D[n]}function oo(n){return{fieldPath:n.canonicalString()}}function ao(n){return jt.fromServerFormat(n.fieldPath)}function rE(n){return n instanceof tt?function(t){if(t.op==="=="){if(Z0(t.value))return{unaryFilter:{field:oo(t.field),op:"IS_NAN"}};if(X0(t.value))return{unaryFilter:{field:oo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Z0(t.value))return{unaryFilter:{field:oo(t.field),op:"IS_NOT_NAN"}};if(X0(t.value))return{unaryFilter:{field:oo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oo(t.field),op:RD(t.op),value:t.value}}}(n):n instanceof mn?function(t){let r=t.getFilters().map(i=>rE(i));return r.length===1?r[0]:{compositeFilter:{op:PD(t.op),filters:r}}}(n):ce()}function xD(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function iE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var yc=class n{constructor(e,t,r,i,s=de.min(),o=de.min(),c=Tt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var sg=class{constructor(e){this.ct=e}};function DD(n){let e=CD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Gm(e,e.limit,"L"):e}var Id=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ue(e.integerValue));else if("doubleValue"in e){let r=Ue(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),pc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=mr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ui(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?xb(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Pb(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ce()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",c=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Ue(c)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),re.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Id.vt=new Id;var og=class{constructor(){this.un=new ag}addToCollectionParentIndex(e,t){return this.un.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(is.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(is.min())}updateCollectionGroup(e,t,r){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}},ag=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new It(je.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new It(je.comparator)).toArray()}};var ZF=new Uint8Array(0);var Vn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn(41943040,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);var vc=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var cg=class{constructor(){this.changes=new di(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var lg=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var ug=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&fc(r.mutation,i,Zt.empty(),yt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ve()){let i=ts();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=lc();return s.forEach((c,l)=>{o=o.insert(c,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=ts();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ve()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,r,i){let s=gr(),o=hc(),c=function(){return hc()}();return t.forEach((l,f)=>{let _=r.get(f.key);i.has(f.key)&&(_===void 0||_.mutation instanceof $n)?s=s.insert(f.key,f):_!==void 0?(o.set(f.key,_.mutation.getFieldMask()),fc(_.mutation,f,_.mutation.getFieldMask(),yt.now())):o.set(f.key,Zt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((f,_)=>o.set(f,_)),t.forEach((f,_)=>{var g;return c.set(f,new lg(_,(g=o.get(f))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,t){let r=hc(),i=new qe((o,c)=>o-c),s=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let c of o)c.keys().forEach(l=>{let f=t.get(l);if(f===null)return;let _=r.get(l)||Zt.empty();_=c.applyToLocalView(f,_),r.set(l,_);let g=(i.get(c.batchId)||ve()).add(l);i=i.insert(c.batchId,g)})}).next(()=>{let o=[],c=i.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),f=l.key,_=l.value,g=qb();_.forEach(C=>{if(!s.has(C)){let k=Qb(t.get(C),r.get(C));k!==null&&g.set(C,k),s=s.add(C)}}),o.push(this.documentOverlayCache.saveOverlays(e,f,g))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Lb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):q.resolve(ts()),c=-1,l=s;return o.next(f=>q.forEach(f,(_,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),s.get(_)?q.resolve():this.remoteDocumentCache.getEntry(e,_).next(C=>{l=l.insert(_,C)}))).next(()=>this.populateOverlays(e,f,s)).next(()=>this.computeViews(e,l,f,ve())).next(_=>({batchId:c,changes:$b(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new re(t)).next(r=>{let i=lc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=lc();return this.indexManager.getCollectionParents(e,s).next(c=>q.forEach(c,l=>{let f=function(g,C){return new os(C,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(_=>{_.forEach((g,C)=>{o=o.insert(g,C)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,f)=>{let _=f.getKey();o.get(_)===null&&(o=o.insert(_,pn.newInvalidDocument(_)))});let c=lc();return o.forEach((l,f)=>{let _=s.get(l);_!==void 0&&fc(_.mutation,f,Zt.empty(),yt.now()),$d(t,f)&&(c=c.insert(l,f))}),c})}};var dg=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return q.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Bn(i.createTime)}}(t)),q.resolve()}getNamedQuery(e,t){return q.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:DD(i.bundledQuery),readTime:Bn(i.readTime)}}(t)),q.resolve()}};var hg=class{constructor(){this.overlays=new qe(re.comparator),this.Ir=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ts();return q.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),q.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),q.resolve()}getOverlaysForCollection(e,t,r){let i=ts(),s=t.length+1,o=new re(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let l=c.getNext().value,f=l.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return q.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new qe((f,_)=>f-_),o=this.overlays.getIterator();for(;o.hasNext();){let f=o.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let _=s.get(f.largestBatchId);_===null&&(_=ts(),s=s.insert(f.largestBatchId,_)),_.set(f.getKey(),f)}}let c=ts(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((f,_)=>c.set(f,_)),!(c.size()>=i)););return q.resolve(c)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Jm(t,r));let s=this.Ir.get(t);s===void 0&&(s=ve(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var fg=class{constructor(){this.sessionToken=Tt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}};var wc=class{constructor(){this.Tr=new It(et.Er),this.dr=new It(et.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new et(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new et(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new re(new je([])),r=new et(t,e),i=new et(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new re(new je([])),r=new et(t,e),i=new et(t,e+1),s=ve();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new et(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},et=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return re.comparator(e.key,t.key)||Re(e.wr,t.wr)}static Ar(e,t){return Re(e.wr,t.wr)||re.comparator(e.key,t.key)}};var pg=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new It(et.Er)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Km(s,t,r,i);this.mutationQueue.push(o);for(let c of i)this.br=this.br.add(new et(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,t){return q.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new et(t,0),i=new et(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let c=this.Dr(o.wr);s.push(c)}),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new It(Re);return t.forEach(i=>{let s=new et(i,0),o=new et(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],c=>{r=r.add(c.wr)})}),q.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;re.isDocumentKey(s)||(s=s.child(""));let o=new et(new re(s),0),c=new It(Re);return this.br.forEachWhile(l=>{let f=l.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(c=c.add(l.wr)),!0)},o),q.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){De(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return q.forEach(t.mutations,i=>{let s=new et(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new et(t,0),i=this.br.firstAfterOrEqual(r);return q.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var mg=class{constructor(e){this.Mr=e,this.docs=function(){return new qe(re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return q.resolve(r?r.document.mutableCopy():pn.newInvalidDocument(t))}getEntries(e,t){let r=gr();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():pn.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=gr(),o=t.path,c=new re(o.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:f,value:{document:_}}=l.getNext();if(!o.isPrefixOf(f.path))break;f.path.length>o.length+1||Bx(Ux(_),r)<=0||(i.has(_.key)||$d(t,_))&&(s=s.insert(_.key,_.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ce()}Or(e,t){return q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new gg(this)}getSize(e){return q.resolve(this.size)}},gg=class extends cg{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),q.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var _g=class{constructor(e){this.persistence=e,this.Nr=new di(t=>c_(t),l_),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.Lr=0,this.Br=new wc,this.targetCount=0,this.kr=vc.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),q.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new vc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.Kn(t),q.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),q.waitFor(s).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return q.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),q.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),q.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),q.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return q.resolve(r)}containsKey(e,t){return q.resolve(this.Br.containsKey(t))}};var yg=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Sb(0),this.Kr=!1,this.Kr=!0,this.$r=new fg,this.referenceDelegate=e(this),this.Ur=new _g(this),this.indexManager=new og,this.remoteDocumentCache=function(i){return new mg(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new sg(t),this.Gr=new dg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hg,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new pg(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){X("MemoryPersistence","Starting transaction:",e);let i=new vg(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return q.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},vg=class extends xm{constructor(e){super(),this.currentSequenceNumber=e}},wg=class n{constructor(e){this.persistence=e,this.Jr=new wc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw ce()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),q.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),q.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Xr,r=>{let i=re.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,de.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return q.or([()=>q.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var bg=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ve(),i=ve();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var Eg=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Ig=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Ew()?8:$x(ht())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Eg;return this.Xi(e,t,o).next(c=>{if(s.result=c,this.zi)return this.es(e,t,o,c.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(cc()<=ye.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",so(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),q.resolve()):(cc()<=ye.DEBUG&&X("QueryEngine","Query:",so(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(cc()<=ye.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",so(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Un(t))):q.resolve())}Yi(e,t){if(rb(t))return q.resolve(null);let r=Un(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Gm(t,null,"F"),r=Un(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ve(...s);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(l=>{let f=this.ts(t,c);return this.ns(t,f,o,l.readTime)?this.Yi(e,Gm(t,null,"F")):this.rs(e,f,t,l)}))})))}Zi(e,t,r,i){return rb(t)||i.isEqual(de.min())?q.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?q.resolve(null):(cc()<=ye.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),so(t)),this.rs(e,o,t,Lx(i,-1)).next(c=>c))})}ts(e,t){let r=new It(Bb(e));return t.forEach((i,s)=>{$d(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return cc()<=ye.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",so(t)),this.Ji.getDocumentsMatchingQuery(e,t,is.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Tg=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new qe(Re),this._s=new di(s=>c_(s),l_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ug(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function kD(n,e,t,r){return new Tg(n,e,t,r)}function sE(n,e){return E(this,null,function*(){let t=le(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],c=[],l=ve();for(let f of i){o.push(f.batchId);for(let _ of f.mutations)l=l.add(_.key)}for(let f of s){c.push(f.batchId);for(let _ of f.mutations)l=l.add(_.key)}return t.localDocuments.getDocuments(r,l).next(f=>({hs:f,removedBatchIds:o,addedBatchIds:c}))})})})}function OD(n,e){let t=le(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,l,f,_){let g=f.batch,C=g.keys(),k=q.resolve();return C.forEach(F=>{k=k.next(()=>_.getEntry(l,F)).next(U=>{let M=f.docVersions.get(F);De(M!==null),U.version.compareTo(M)<0&&(g.applyToRemoteDocument(U,f),U.isValidDocument()&&(U.setReadTime(f.commitVersion),_.addEntry(U)))})}),k.next(()=>c.mutationQueue.removeMutationBatch(l,g))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let l=ve();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(l=l.add(c.batch.mutations[f].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function oE(n){let e=le(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function ND(n,e){let t=le(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let c=[];e.targetChanges.forEach((_,g)=>{let C=i.get(g);if(!C)return;c.push(t.Ur.removeMatchingKeys(s,_.removedDocuments,g).next(()=>t.Ur.addMatchingKeys(s,_.addedDocuments,g)));let k=C.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?k=k.withResumeToken(Tt.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):_.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(_.resumeToken,r)),i=i.insert(g,k),function(U,M,J){return U.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0}(C,k,_)&&c.push(t.Ur.updateTargetData(s,k))});let l=gr(),f=ve();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,_))}),c.push(MD(s,o,e.documentUpdates).next(_=>{l=_.Ps,f=_.Is})),!r.isEqual(de.min())){let _=t.Ur.getLastRemoteSnapshotVersion(s).next(g=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(_)}return q.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,f)).next(()=>l)}).then(s=>(t.os=i,s))}function MD(n,e,t){let r=ve(),i=ve();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=gr();return t.forEach((c,l)=>{let f=s.get(c);l.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(c)),l.isNoDocument()&&l.version.isEqual(de.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!f.isValidDocument()||l.version.compareTo(f.version)>0||l.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):X("LocalStore","Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function VD(n,e){let t=le(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function FD(n,e){let t=le(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,q.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new yc(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Cg(n,e,t){return E(this,null,function*(){let r=le(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Sc(o))throw o;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function pb(n,e,t){let r=le(n),i=de.min(),s=ve();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,f,_){let g=le(l),C=g._s.get(_);return C!==void 0?q.resolve(g.os.get(C)):g.Ur.getTargetData(f,_)}(r,o,Un(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:de.min(),t?s:ve())).next(c=>(LD(r,Zx(e),c),{documents:c,Ts:s})))}function LD(n,e,t){let r=n.us.get(e)||de.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var Td=class{constructor(){this.activeTargetIds=sD()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Ag=class{constructor(){this.so=new Td,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Td,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Sg=class{_o(e){}shutdown(){}};var Cd=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ad=null;function vm(){return ad===null?ad=function(){return 268435456+Math.round(2147483648*Math.random())}():ad++,"0x"+ad.toString(16)}var UD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Rg=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Et="WebChannelConnection",Pg=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let c=vm(),l=this.xo(t,r.toUriEncodedString());X("RestConnection",`Sending RPC '${t}' ${c}:`,l,i);let f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,s,o),this.No(t,l,f,i).then(_=>(X("RestConnection",`Received RPC '${t}' ${c}: `,_),_),_=>{throw fo("RestConnection",`RPC '${t}' ${c} failed with error: `,_,"url: ",l,"request:",i),_})}Lo(t,r,i,s,o,c){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Po}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=UD[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=vm();return new Promise((o,c)=>{let l=new fm;l.setWithCredentials(!0),l.listenOnce(pm.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ac.NO_ERROR:let _=l.getResponseJson();X(Et,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(_)),o(_);break;case ac.TIMEOUT:X(Et,`RPC '${e}' ${s} timed out`),c(new Q(L.DEADLINE_EXCEEDED,"Request time out"));break;case ac.HTTP_ERROR:let g=l.getStatus();if(X(Et,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let C=l.getResponseJson();Array.isArray(C)&&(C=C[0]);let k=C?.error;if(k&&k.status&&k.message){let F=function(M){let J=M.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(J)>=0?J:L.UNKNOWN}(k.status);c(new Q(F,k.message))}else c(new Q(L.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new Q(L.UNAVAILABLE,"Connection failed."));break;default:ce()}}finally{X(Et,`RPC '${e}' ${s} completed.`)}});let f=JSON.stringify(i);X(Et,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",f,r,15)})}Bo(e,t,r){let i=vm(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=_m(),c=gm(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(l.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let _=s.join("");X(Et,`Creating RPC '${e}' stream ${i}: ${_}`,l);let g=o.createWebChannel(_,l),C=!1,k=!1,F=new Rg({Io:M=>{k?X(Et,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(C||(X(Et,`Opening RPC '${e}' stream ${i} transport.`),g.open(),C=!0),X(Et,`RPC '${e}' stream ${i} sending:`,M),g.send(M))},To:()=>g.close()}),U=(M,J,ee)=>{M.listen(J,W=>{try{ee(W)}catch(se){setTimeout(()=>{throw se},0)}})};return U(g,io.EventType.OPEN,()=>{k||(X(Et,`RPC '${e}' stream ${i} transport opened.`),F.yo())}),U(g,io.EventType.CLOSE,()=>{k||(k=!0,X(Et,`RPC '${e}' stream ${i} transport closed`),F.So())}),U(g,io.EventType.ERROR,M=>{k||(k=!0,fo(Et,`RPC '${e}' stream ${i} transport errored:`,M),F.So(new Q(L.UNAVAILABLE,"The operation could not be completed")))}),U(g,io.EventType.MESSAGE,M=>{var J;if(!k){let ee=M.data[0];De(!!ee);let W=ee,se=W.error||((J=W[0])===null||J===void 0?void 0:J.error);if(se){X(Et,`RPC '${e}' stream ${i} received error:`,se);let Ie=se.status,ue=function(I){let S=Ze[I];if(S!==void 0)return Yb(S)}(Ie),P=se.message;ue===void 0&&(ue=L.INTERNAL,P="Unknown error status: "+Ie+" with message "+se.message),k=!0,F.So(new Q(ue,P)),g.close()}else X(Et,`RPC '${e}' stream ${i} received:`,ee),F.bo(ee)}}),U(c,mm.STAT_EVENT,M=>{M.stat===sd.PROXY?X(Et,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===sd.NOPROXY&&X(Et,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{F.wo()},0),F}};function wm(){return typeof document<"u"?document:null}function qd(n){return new eg(n,!0)}var Ad=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&X("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Sd=class{constructor(e,t,r,i,s,o,c,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ad(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return E(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return E(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return E(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===L.RESOURCE_EXHAUSTED?(pr(t.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new Q(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>E(this,null,function*(){this.state=0,this.start()}))}I_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},xg=class extends Sd{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=wD(this.serializer,e),r=function(s){if(!("targetChange"in s))return de.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?de.min():o.readTime?Bn(o.readTime):de.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=ig(this.serializer),t.addTarget=function(s,o){let c,l=o.target;if(c=qm(l)?{documents:ID(s,l)}:{query:TD(s,l)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=Xb(s,o.resumeToken);let f=tg(s,o.expectedCount);f!==null&&(c.expectedCount=f)}else if(o.snapshotVersion.compareTo(de.min())>0){c.readTime=Ed(s,o.snapshotVersion.toTimestamp());let f=tg(s,o.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,e);let r=AD(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=ig(this.serializer),t.removeTarget=e,this.a_(t)}},Dg=class extends Sd{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return De(!!e.streamToken),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=ED(e.writeResults,e.commitTime),r=Bn(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=ig(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>bD(this.serializer,r))};this.a_(t)}};var kg=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Q(L.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,ng(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(L.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,ng(t,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(L.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Og=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(pr(t),this.D_=!1):X("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Ng=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>E(this,null,function*(){ds(this)&&(X("RemoteStore","Restarting streams for network reachability change."),yield function(l){return E(this,null,function*(){let f=le(l);f.L_.add(4),yield Rc(f),f.q_.set("Unknown"),f.L_.delete(4),yield zd(f)})}(this))}))}),this.q_=new Og(r,i)}};function zd(n){return E(this,null,function*(){if(ds(n))for(let e of n.B_)yield e(!0)})}function Rc(n){return E(this,null,function*(){for(let e of n.B_)yield e(!1)})}function aE(n,e){let t=le(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),m_(t)?p_(t):xo(t).r_()&&f_(t,e))}function h_(n,e){let t=le(n),r=xo(t);t.N_.delete(e),r.r_()&&cE(t,e),t.N_.size===0&&(r.r_()?r.o_():ds(t)&&t.q_.set("Unknown"))}function f_(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}xo(n).A_(e)}function cE(n,e){n.Q_.xe(e),xo(n).R_(e)}function p_(n){n.Q_=new Zm({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),xo(n).start(),n.q_.v_()}function m_(n){return ds(n)&&!xo(n).n_()&&n.N_.size>0}function ds(n){return le(n).L_.size===0}function lE(n){n.Q_=void 0}function BD(n){return E(this,null,function*(){n.q_.set("Online")})}function jD(n){return E(this,null,function*(){n.N_.forEach((e,t)=>{f_(n,e)})})}function $D(n,e){return E(this,null,function*(){lE(n),m_(n)?(n.q_.M_(e),p_(n)):n.q_.set("Unknown")})}function qD(n,e,t){return E(this,null,function*(){if(n.q_.set("Online"),e instanceof wd&&e.state===2&&e.cause)try{yield function(i,s){return E(this,null,function*(){let o=s.cause;for(let c of s.targetIds)i.N_.has(c)&&(yield i.remoteSyncer.rejectListen(c,o),i.N_.delete(c),i.Q_.removeTarget(c))})}(n,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Rd(n,r)}else if(e instanceof uo?n.Q_.Ke(e):e instanceof vd?n.Q_.He(e):n.Q_.We(e),!t.isEqual(de.min()))try{let r=yield oE(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let c=s.Q_.rt(o);return c.targetChanges.forEach((l,f)=>{if(l.resumeToken.approximateByteSize()>0){let _=s.N_.get(f);_&&s.N_.set(f,_.withResumeToken(l.resumeToken,o))}}),c.targetMismatches.forEach((l,f)=>{let _=s.N_.get(l);if(!_)return;s.N_.set(l,_.withResumeToken(Tt.EMPTY_BYTE_STRING,_.snapshotVersion)),cE(s,l);let g=new yc(_.target,l,f,_.sequenceNumber);f_(s,g)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){X("RemoteStore","Failed to raise snapshot:",r),yield Rd(n,r)}})}function Rd(n,e,t){return E(this,null,function*(){if(!Sc(e))throw e;n.L_.add(1),yield Rc(n),n.q_.set("Offline"),t||(t=()=>oE(n.localStore)),n.asyncQueue.enqueueRetryable(()=>E(this,null,function*(){X("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield zd(n)}))})}function uE(n,e){return e().catch(t=>Rd(n,t,e))}function Gd(n){return E(this,null,function*(){let e=le(n),t=hi(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;zD(e);)try{let i=yield VD(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,GD(e,i)}catch(i){yield Rd(e,i)}dE(e)&&hE(e)})}function zD(n){return ds(n)&&n.O_.length<10}function GD(n,e){n.O_.push(e);let t=hi(n);t.r_()&&t.V_&&t.m_(e.mutations)}function dE(n){return ds(n)&&!hi(n).n_()&&n.O_.length>0}function hE(n){hi(n).start()}function HD(n){return E(this,null,function*(){hi(n).p_()})}function WD(n){return E(this,null,function*(){let e=hi(n);for(let t of n.O_)e.m_(t.mutations)})}function KD(n,e,t){return E(this,null,function*(){let r=n.O_.shift(),i=Qm.from(r,e,t);yield uE(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Gd(n)})}function QD(n,e){return E(this,null,function*(){e&&hi(n).V_&&(yield function(r,i){return E(this,null,function*(){if(function(o){return hD(o)&&o!==L.ABORTED}(i.code)){let s=r.O_.shift();hi(r).s_(),yield uE(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Gd(r)}})}(n,e)),dE(n)&&hE(n)})}function mb(n,e){return E(this,null,function*(){let t=le(n);t.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");let r=ds(t);t.L_.add(3),yield Rc(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield zd(t)})}function JD(n,e){return E(this,null,function*(){let t=le(n);e?(t.L_.delete(2),yield zd(t)):e||(t.L_.add(2),yield Rc(t),t.q_.set("Unknown"))})}function xo(n){return n.K_||(n.K_=function(t,r,i){let s=le(t);return s.w_(),new xg(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:BD.bind(null,n),Ro:jD.bind(null,n),mo:$D.bind(null,n),d_:qD.bind(null,n)}),n.B_.push(e=>E(this,null,function*(){e?(n.K_.s_(),m_(n)?p_(n):n.q_.set("Unknown")):(yield n.K_.stop(),lE(n))}))),n.K_}function hi(n){return n.U_||(n.U_=function(t,r,i){let s=le(t);return s.w_(),new Dg(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:HD.bind(null,n),mo:QD.bind(null,n),f_:WD.bind(null,n),g_:KD.bind(null,n)}),n.B_.push(e=>E(this,null,function*(){e?(n.U_.s_(),yield Gd(n)):(yield n.U_.stop(),n.O_.length>0&&(X("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Mg=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Fn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,c=new n(e,t,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function g_(n,e){if(pr("AsyncQueue",`${e}: ${n}`),Sc(n))return new Q(L.UNAVAILABLE,`${e}: ${n}`);throw n}var Pd=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||re.comparator(t.key,r.key):(t,r)=>re.comparator(t.key,r.key),this.keyedMap=lc(),this.sortedSet=new qe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var xd=class{constructor(){this.W_=new qe(re.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ce():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Io=class n{constructor(e,t,r,i,s,o,c,l,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new n(e,t,Pd.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Vg=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Fg=class{constructor(){this.queries=gb(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=le(t),s=i.queries;i.queries=gb(),s.forEach((o,c)=>{for(let l of c.j_)l.onError(r)})})(this,new Q(L.ABORTED,"Firestore shutting down"))}};function gb(){return new di(n=>Ub(n),jd)}function YD(n,e){return E(this,null,function*(){let t=le(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new Vg,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let c=g_(o,`Initialization of query '${so(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&__(t)})}function XD(n,e){return E(this,null,function*(){let t=le(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function ZD(n,e){let t=le(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let c of o.j_)c.X_(i)&&(r=!0);o.z_=i}}r&&__(t)}function ek(n,e,t){let r=le(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function __(n){n.Y_.forEach(e=>{e.next()})}var Lg,_b;(_b=Lg||(Lg={})).ea="default",_b.Cache="cache";var Ug=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Io(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Io.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Lg.Cache}};var Dd=class{constructor(e){this.key=e}},kd=class{constructor(e){this.key=e}},Bg=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ve(),this.mutatedKeys=ve(),this.Aa=Bb(e),this.Ra=new Pd(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new xd,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,c=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((_,g)=>{let C=i.get(_),k=$d(this.query,g)?g:null,F=!!C&&this.mutatedKeys.has(C.key),U=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations),M=!1;C&&k?C.data.isEqual(k.data)?F!==U&&(r.track({type:3,doc:k}),M=!0):this.ga(C,k)||(r.track({type:2,doc:k}),M=!0,(l&&this.Aa(k,l)>0||f&&this.Aa(k,f)<0)&&(c=!0)):!C&&k?(r.track({type:0,doc:k}),M=!0):C&&!k&&(r.track({type:1,doc:C}),M=!0,(l||f)&&(c=!0)),M&&(k?(o=o.add(k),s=U?s.add(_):s.delete(_)):(o=o.delete(_),s=s.delete(_)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let _=this.query.limitType==="F"?o.last():o.first();o=o.delete(_.key),s=s.delete(_.key),r.track({type:1,doc:_})}return{Ra:o,fa:r,ns:c,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((_,g)=>function(k,F){let U=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ce()}};return U(k)-U(F)}(_.type,g.type)||this.Aa(_.doc,g.doc)),this.pa(r),i=i!=null&&i;let c=t&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,f=l!==this.Ea;return this.Ea=l,o.length!==0||f?{snapshot:new Io(this.query,e.Ra,s,o,e.mutatedKeys,l===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new xd,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ve(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new kd(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Dd(r))}),t}ba(e){this.Ta=e.Ts,this.da=ve();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Io.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},jg=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},$g=class{constructor(e){this.key=e,this.va=!1}},qg=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new di(c=>Ub(c),jd),this.Ma=new Map,this.xa=new Set,this.Oa=new qe(re.comparator),this.Na=new Map,this.La=new wc,this.Ba={},this.ka=new Map,this.qa=vc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function tk(n,e,t=!0){return E(this,null,function*(){let r=yE(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield fE(r,e,t,!0),i})}function nk(n,e){return E(this,null,function*(){let t=yE(n);yield fE(t,e,!0,!1)})}function fE(n,e,t,r){return E(this,null,function*(){let i=yield FD(n.localStore,Un(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),c;return r&&(c=yield rk(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&aE(n.remoteStore,i),c})}function rk(n,e,t,r,i){return E(this,null,function*(){n.Ka=(g,C,k)=>function(U,M,J,ee){return E(this,null,function*(){let W=M.view.ma(J);W.ns&&(W=yield pb(U.localStore,M.query,!1).then(({documents:P})=>M.view.ma(P,W)));let se=ee&&ee.targetChanges.get(M.targetId),Ie=ee&&ee.targetMismatches.get(M.targetId)!=null,ue=M.view.applyChanges(W,U.isPrimaryClient,se,Ie);return vb(U,M.targetId,ue.wa),ue.snapshot})}(n,g,C,k);let s=yield pb(n.localStore,e,!0),o=new Bg(e,s.Ts),c=o.ma(s.documents),l=_c.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=o.applyChanges(c,n.isPrimaryClient,l);vb(n,t,f.wa);let _=new jg(e,t,o);return n.Fa.set(e,_),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),f.snapshot})}function ik(n,e,t){return E(this,null,function*(){let r=le(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!jd(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Cg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&h_(r.remoteStore,i.targetId),zg(r,i.targetId)}).catch(Ac))):(zg(r,i.targetId),yield Cg(r.localStore,i.targetId,!0))})}function sk(n,e){return E(this,null,function*(){let t=le(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),h_(t.remoteStore,r.targetId))})}function ok(n,e,t){return E(this,null,function*(){let r=fk(n);try{let i=yield function(o,c){let l=le(o),f=yt.now(),_=c.reduce((k,F)=>k.add(F.key),ve()),g,C;return l.persistence.runTransaction("Locally write mutations","readwrite",k=>{let F=gr(),U=ve();return l.cs.getEntries(k,_).next(M=>{F=M,F.forEach((J,ee)=>{ee.isValidDocument()||(U=U.add(J))})}).next(()=>l.localDocuments.getOverlayedDocuments(k,F)).next(M=>{g=M;let J=[];for(let ee of c){let W=dD(ee,g.get(ee.key).overlayedDocument);W!=null&&J.push(new $n(ee.key,W,Db(W.value.mapValue),ci.exists(!0)))}return l.mutationQueue.addMutationBatch(k,f,J,c)}).next(M=>{C=M;let J=M.applyToLocalDocumentSet(g,U);return l.documentOverlayCache.saveOverlays(k,M.batchId,J)})}).then(()=>({batchId:C.batchId,changes:$b(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,l){let f=o.Ba[o.currentUser.toKey()];f||(f=new qe(Re)),f=f.insert(c,l),o.Ba[o.currentUser.toKey()]=f}(r,i.batchId,t),yield Pc(r,i.changes),yield Gd(r.remoteStore)}catch(i){let s=g_(i,"Failed to persist write");t.reject(s)}})}function pE(n,e){return E(this,null,function*(){let t=le(n);try{let r=yield ND(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(De(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?De(o.va):i.removedDocuments.size>0&&(De(o.va),o.va=!1))}),yield Pc(t,r,e)}catch(r){yield Ac(r)}})}function yb(n,e,t){let r=le(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let c=o.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){let l=le(o);l.onlineState=c;let f=!1;l.queries.forEach((_,g)=>{for(let C of g.j_)C.Z_(c)&&(f=!0)}),f&&__(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ak(n,e,t){return E(this,null,function*(){let r=le(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new qe(re.comparator);o=o.insert(s,pn.newNoDocument(s,de.min()));let c=ve().add(s),l=new yd(de.min(),new Map,new qe(Re),o,c);yield pE(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),y_(r)}else yield Cg(r.localStore,e,!1).then(()=>zg(r,e,t)).catch(Ac)})}function ck(n,e){return E(this,null,function*(){let t=le(n),r=e.batch.batchId;try{let i=yield OD(t.localStore,e);gE(t,r,null),mE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Pc(t,i)}catch(i){yield Ac(i)}})}function lk(n,e,t){return E(this,null,function*(){let r=le(n);try{let i=yield function(o,c){let l=le(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let _;return l.mutationQueue.lookupMutationBatch(f,c).next(g=>(De(g!==null),_=g.keys(),l.mutationQueue.removeMutationBatch(f,g))).next(()=>l.mutationQueue.performConsistencyCheck(f)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(f,_,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,_)).next(()=>l.localDocuments.getDocuments(f,_))})}(r.localStore,e);gE(r,e,t),mE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Pc(r,i)}catch(i){yield Ac(i)}})}function mE(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function gE(n,e,t){let r=le(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function zg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||_E(n,r)})}function _E(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(h_(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),y_(n))}function vb(n,e,t){for(let r of t)r instanceof Dd?(n.La.addReference(r.key,e),uk(n,r)):r instanceof kd?(X("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||_E(n,r.key)):ce()}function uk(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(X("SyncEngine","New document in limbo: "+t),n.xa.add(r),y_(n))}function y_(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new re(je.fromString(e)),r=n.qa.next();n.Na.set(r,new $g(t)),n.Oa=n.Oa.insert(t,r),aE(n.remoteStore,new yc(Un(Fb(t.path)),r,"TargetPurposeLimboResolution",Sb.oe))}}function Pc(n,e,t){return E(this,null,function*(){let r=le(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,l)=>{o.push(r.Ka(l,e,t).then(f=>{var _;if((f||t)&&r.isPrimaryClient){let g=f?!f.fromCache:(_=t?.targetChanges.get(l.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(l.targetId,g?"current":"not-current")}if(f){i.push(f);let g=bg.Wi(l.targetId,f);s.push(g)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(l,f){return E(this,null,function*(){let _=le(l);try{yield _.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>q.forEach(f,C=>q.forEach(C.$i,k=>_.persistence.referenceDelegate.addReference(g,C.targetId,k)).next(()=>q.forEach(C.Ui,k=>_.persistence.referenceDelegate.removeReference(g,C.targetId,k)))))}catch(g){if(!Sc(g))throw g;X("LocalStore","Failed to update sequence numbers: "+g)}for(let g of f){let C=g.targetId;if(!g.fromCache){let k=_.os.get(C),F=k.snapshotVersion,U=k.withLastLimboFreeSnapshotVersion(F);_.os=_.os.insert(C,U)}}})}(r.localStore,s))})}function dk(n,e){return E(this,null,function*(){let t=le(n);if(!t.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());let r=yield sE(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(c=>{c.forEach(l=>{l.reject(new Q(L.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Pc(t,r.hs)}})}function hk(n,e){let t=le(n),r=t.Na.get(e);if(r&&r.va)return ve().add(r.key);{let i=ve(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let c=t.Fa.get(o);i=i.unionWith(c.view.Va)}return i}}function yE(n){let e=le(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=pE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ak.bind(null,e),e.Ca.d_=ZD.bind(null,e.eventManager),e.Ca.$a=ek.bind(null,e.eventManager),e}function fk(n){let e=le(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ck.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lk.bind(null,e),e}var wb=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return E(this,null,function*(){this.serializer=qd(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return kD(this.persistence,new Ig,t.initialUser,this.serializer)}Ga(t){return new yg(wg.Zr,this.serializer)}Wa(t){return new Ag}terminate(){return E(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var pk=(()=>{class n{initialize(t,r){return E(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>yb(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=dk.bind(null,this.syncEngine),yield JD(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Fg}()}createDatastore(t){let r=qd(t.databaseInfo.databaseId),i=function(o){return new Pg(o)}(t.databaseInfo);return function(o,c,l,f){return new kg(o,c,l,f)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,c,l){return new Ng(i,s,o,c,l)}(this.localStore,this.datastore,t.asyncQueue,r=>yb(this.syncEngine,r,0),function(){return Cd.D()?new Cd:new Sg}())}createSyncEngine(t,r){return function(s,o,c,l,f,_,g){let C=new qg(s,o,c,l,f,_);return g&&(C.Qa=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return E(this,null,function*(){var t,r;yield function(s){return E(this,null,function*(){let o=le(s);X("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Rc(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Gg=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Hg=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ft.UNAUTHENTICATED,this.clientId=dd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>E(this,null,function*(){X("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(X("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Fn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=g_(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function bm(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>E(this,null,function*(){r.isEqual(i)||(yield sE(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function bb(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield mk(n);X("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>mb(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>mb(e.remoteStore,i)),n._onlineComponents=e})}function mk(n){return E(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{yield bm(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===L.FAILED_PRECONDITION||i.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;fo("Error using user provided cache. Falling back to memory cache: "+t),yield bm(n,new wb)}}else X("FirestoreClient","Using default OfflineComponentProvider"),yield bm(n,new wb);return n._offlineComponents})}function vE(n){return E(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),yield bb(n,n._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),yield bb(n,new pk))),n._onlineComponents})}function gk(n){return vE(n).then(e=>e.syncEngine)}function _k(n){return E(this,null,function*(){let e=yield vE(n),t=e.eventManager;return t.onListen=tk.bind(null,e.syncEngine),t.onUnlisten=ik.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=nk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=sk.bind(null,e.syncEngine),t})}function yk(n,e,t={}){let r=new Fn;return n.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return function(s,o,c,l,f){let _=new Gg({next:C=>{_.Za(),o.enqueueAndForget(()=>XD(s,g)),C.fromCache&&l.source==="server"?f.reject(new Q(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(C)},error:C=>f.reject(C)}),g=new Ug(c,_,{includeMetadataChanges:!0,_a:!0});return YD(s,g)}(yield _k(n),n.asyncQueue,e,t,r)})),r.promise}function wE(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Eb=new Map;function bE(n,e,t){if(!t)throw new Q(L.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function vk(n,e,t,r){if(e===!0&&r===!0)throw new Q(L.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ib(n){if(!re.isDocumentKey(n))throw new Q(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Tb(n){if(re.isDocumentKey(n))throw new Q(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Hd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ce()}function To(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Q(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Hd(n);throw new Q(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Od=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Co=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Od({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Od(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Em;switch(r.type){case"firstParty":return new Am(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return E(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=Eb.get(t);r&&(X("ComponentProvider","Removing Datastore"),Eb.delete(t),r.terminate())}(this),Promise.resolve()}};function EE(n,e,t,r={}){var i;let s=(n=To(n,Co))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let c,l;if(typeof r.mockUserToken=="string")c=r.mockUserToken,l=ft.MOCK_USER;else{c=Du(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Q(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ft(f)}n._authCredentials=new Im(new ud(c,l))}}var Ao=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},$t=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new li(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},li=class n extends Ao{constructor(e,t,r){super(e,t,Fb(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new re(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function IE(n,e,...t){if(n=Me(n),bE("collection","path",e),n instanceof Co){let r=je.fromString(e,...t);return Tb(r),new li(n,null,r)}{if(!(n instanceof $t||n instanceof li))throw new Q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(je.fromString(e,...t));return Tb(r),new li(n.firestore,null,r)}}function v_(n,e,...t){if(n=Me(n),arguments.length===1&&(e=dd.newId()),bE("doc","path",e),n instanceof Co){let r=je.fromString(e,...t);return Ib(r),new $t(n,null,new re(r))}{if(!(n instanceof $t||n instanceof li))throw new Q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(je.fromString(e,...t));return Ib(r),new $t(n.firestore,n instanceof li?n.converter:null,new re(r))}}var Nd=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Ad(this,"async_queue_retry"),this.Vu=()=>{let r=wm();r&&X("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=wm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=wm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Fn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return E(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Sc(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw pr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=Mg.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ce()}verifyOperationInProgress(){}wu(){return E(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var So=class extends Co{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Nd,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return E(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Nd(e),this._firestoreClient=void 0,yield e}})}};function TE(n,e){let t=typeof n=="object"?n:ni(),r=typeof n=="string"?n:e||"(default)",i=Hi(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=xu("firestore");s&&EE(i,...s)}return i}function CE(n){if(n._terminated)throw new Q(L.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||wk(n),n._firestoreClient}function wk(n){var e,t,r;let i=n._freezeSettings(),s=function(c,l,f,_){return new Dm(c,l,f,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,wE(_.experimentalLongPollingOptions),_.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Hg(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(c){let l=c?._online.build();return{_offline:c?._offline.build(l),_online:l}}(n._componentsProvider))}var bc=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Tt.fromBase64String(e))}catch(t){throw new Q(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ro=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Q(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ec=class{constructor(e){this._methodName=e}};var Ic=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Q(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Q(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}};var Tc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var bk=/^__.*__$/,Wg=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new $n(e,this.data,this.fieldMask,t,this.fieldTransforms):new ls(e,this.data,t,this.fieldTransforms)}},Md=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new $n(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function AE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ce()}}var Kg=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Fd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(AE(this.Cu)&&bk.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Qg=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||qd(e)}Qu(e,t,r,i=!1){return new Kg({Cu:e,methodName:t,qu:r,path:jt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function w_(n){let e=n._freezeSettings(),t=qd(n._databaseId);return new Qg(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ek(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);b_("Data must be an object, but it was:",o,r);let c=SE(r,o),l,f;if(s.merge)l=new Zt(o.fieldMask),f=o.fieldTransforms;else if(s.mergeFields){let _=[];for(let g of s.mergeFields){let C=Jg(e,g,t);if(!o.contains(C))throw new Q(L.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);PE(_,C)||_.push(C)}l=new Zt(_),f=o.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,f=o.fieldTransforms;return new Wg(new Bt(c),l,f)}var Vd=class n extends Ec{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Ik(n,e,t,r){let i=n.Qu(1,e,t);b_("Data must be an object, but it was:",i,r);let s=[],o=Bt.empty();us(r,(l,f)=>{let _=E_(e,l,t);f=Me(f);let g=i.Nu(_);if(f instanceof Vd)s.push(_);else{let C=xc(f,g);C!=null&&(s.push(_),o.set(_,C))}});let c=new Zt(s);return new Md(o,c,i.fieldTransforms)}function Tk(n,e,t,r,i,s){let o=n.Qu(1,e,t),c=[Jg(e,r,t)],l=[i];if(s.length%2!=0)throw new Q(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<s.length;C+=2)c.push(Jg(e,s[C])),l.push(s[C+1]);let f=[],_=Bt.empty();for(let C=c.length-1;C>=0;--C)if(!PE(f,c[C])){let k=c[C],F=l[C];F=Me(F);let U=o.Nu(k);if(F instanceof Vd)f.push(k);else{let M=xc(F,U);M!=null&&(f.push(k),_.set(k,M))}}let g=new Zt(f);return new Md(_,g,o.fieldTransforms)}function Ck(n,e,t,r=!1){return xc(t,n.Qu(r?4:3,e))}function xc(n,e){if(RE(n=Me(n)))return b_("Unsupported field value:",e,n),SE(n,e);if(n instanceof Ec)return function(r,i){if(!AE(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let c of r){let l=xc(c,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Me(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=yt.fromDate(r);return{timestampValue:Ed(i.serializer,s)}}if(r instanceof yt){let s=new yt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ed(i.serializer,s)}}if(r instanceof Ic)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bc)return{bytesValue:Xb(i.serializer,r._byteString)};if(r instanceof $t){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:d_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Tc)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw c.Bu("VectorValues must only contain numeric values.");return u_(c.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Hd(r)}`)}(n,e)}function SE(n,e){let t={};return Rb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):us(n,(r,i)=>{let s=xc(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function RE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof yt||n instanceof Ic||n instanceof bc||n instanceof $t||n instanceof Ec||n instanceof Tc)}function b_(n,e,t){if(!RE(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Hd(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Jg(n,e,t){if((e=Me(e))instanceof Ro)return e._internalPath;if(typeof e=="string")return E_(n,e);throw Fd("Field path arguments must be of type string or ",n,!1,void 0,t)}var Ak=new RegExp("[~\\*/\\[\\]]");function E_(n,e,t){if(e.search(Ak)>=0)throw Fd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ro(...e.split("."))._internalPath}catch{throw Fd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Fd(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Q(L.INVALID_ARGUMENT,c+n+l)}function PE(n,e){return n.some(t=>t.isEqual(e))}var Ld=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Yg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(I_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Yg=class extends Ld{data(){return super.data()}};function I_(n,e){return typeof e=="string"?E_(n,e):e instanceof Ro?e._internalPath:e._delegate._internalPath}function Sk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Q(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Cc=class{},Xg=class extends Cc{};function xE(n,e,...t){let r=[];e instanceof Cc&&r.push(e),r=r.concat(t),function(s){let o=s.filter(l=>l instanceof Zg).length,c=s.filter(l=>l instanceof Ud).length;if(o>1||o>0&&c>0)throw new Q(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Ud=class n extends Xg{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return kE(e._query,t),new Ao(e.firestore,e.converter,zm(e._query,t))}_parse(e){let t=w_(e.firestore);return function(s,o,c,l,f,_,g){let C;if(f.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new Q(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Ab(g,_);let k=[];for(let F of g)k.push(Cb(l,s,F));C={arrayValue:{values:k}}}else C=Cb(l,s,g)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Ab(g,_),C=Ck(c,o,g,_==="in"||_==="not-in");return tt.create(f,_,C)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function DE(n,e,t){let r=e,i=I_("where",n);return Ud._create(i,r,t)}var Zg=class n extends Cc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:mn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,c=s.getFlattenedFilters();for(let l of c)kE(o,l),o=zm(o,l)}(e._query,t),new Ao(e.firestore,e.converter,zm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function Cb(n,e,t){if(typeof(t=Me(t))=="string"){if(t==="")throw new Q(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Lb(e)&&t.indexOf("/")!==-1)throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(je.fromString(t));if(!re.isDocumentKey(r))throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Y0(n,new re(r))}if(t instanceof $t)return Y0(n,t._key);throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hd(t)}.`)}function Ab(n,e){if(!Array.isArray(n)||n.length===0)throw new Q(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kE(n,e){let t=function(i,s){for(let o of i)for(let c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Q(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var e_=class{convertValue(e,t="none"){switch(ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ui(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ce()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return us(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ue(o.doubleValue));return new Tc(s)}convertGeoPoint(e){return new Ic(Ue(e.latitude),Ue(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=o_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(mc(e));default:return null}}convertTimestamp(e){let t=mr(e);return new yt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=je.fromString(e);De(iE(r));let i=new md(r.get(1),r.get(3)),s=new re(r.popFirst(5));return i.isEqual(t)||pr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function Rk(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var lo=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},t_=class extends Ld{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ho(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(I_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},ho=class extends t_{data(e={}){return super.data(e)}},n_=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new lo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ho(this._firestore,this._userDataWriter,r.key,r,new lo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Q(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{let l=new ho(i._firestore,i._userDataWriter,c.doc.key,c.doc,new lo(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let l=new ho(i._firestore,i._userDataWriter,c.doc.key,c.doc,new lo(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),f=-1,_=-1;return c.type!==0&&(f=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),_=o.indexOf(c.doc.key)),{type:Pk(c.type),doc:l,oldIndex:f,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function Pk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ce()}}var r_=class extends e_{constructor(e){super(),this.firestore=e}convertBytes(e){return new bc(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,t)}};function OE(n){n=To(n,Ao);let e=To(n.firestore,So),t=CE(e),r=new r_(e);return Sk(n._query),yk(t,n._query).then(i=>new n_(e,r,n,i))}function NE(n,e,t,...r){n=To(n,$t);let i=To(n.firestore,So),s=w_(i),o;return o=typeof(e=Me(e))=="string"||e instanceof Ro?Tk(s,"updateDoc",n._key,e,t,r):Ik(s,"updateDoc",n._key,e),VE(i,[o.toMutation(n._key,ci.exists(!0))])}function ME(n,e){let t=To(n.firestore,So),r=v_(n),i=Rk(n.converter,e);return VE(t,[Ek(w_(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ci.exists(!1))]).then(()=>r)}function VE(n,e){return function(r,i){let s=new Fn;return r.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return ok(yield gk(r),i,s)})),s.promise}(CE(n),e)}(function(e,t=!0){(function(i){Po=i})(On),kn(new kt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),c=new So(new Tm(r.getProvider("auth-internal")),new Rm(r.getProvider("app-check-internal")),function(f,_){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Q(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new md(f.options.projectId,_)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Le(W0,"4.7.3",e),Le(W0,"4.7.3","esm2017")})();var qt=class{constructor(e){return e}},FE="firestore",T_=class{constructor(){return Ki(FE)}};var C_=new me("angularfire2.firestore-instances");function xk(n,e){let t=to(FE,n,e);return t&&new qt(t)}function Dk(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new qt(r)}}var kk={provide:T_,deps:[[new ot,C_]]},Ok={provide:qt,useFactory:xk,deps:[[new ot,C_],fn]};function LE(n,...e){return Le("angularfire",or.full,"fst"),Ct([Ok,kk,{provide:C_,useFactory:Dk(n),multi:!0,deps:[Ye,ln,ii,ar,[new ot,es],[new ot,ri],...e]}])}var hs=Xe(ME,!0);var gn=Xe(IE,!0);var UE=Xe(v_,!0);var Wd=Xe(OE,!0);var BE=Xe(TE,!0);var jE=Xe(xE,!0);var $E=Xe(NE,!0);var qE=Xe(DE,!0);var JE="firebasestorage.googleapis.com",YE="storageBucket",Nk=2*60*1e3,Mk=10*60*1e3;var ze=class n extends At{constructor(e,t,r=0){super(A_(e),`Firebase Storage: ${t} (${A_(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return A_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},We=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(We||{});function A_(n){return"storage/"+n}function k_(){let n="An unknown error occurred, please check the error payload for server response.";return new ze(We.UNKNOWN,n)}function Vk(n){return new ze(We.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function Fk(n){return new ze(We.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Lk(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ze(We.UNAUTHENTICATED,n)}function Uk(){return new ze(We.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Bk(n){return new ze(We.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function jk(){return new ze(We.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function $k(){return new ze(We.CANCELED,"User canceled the upload/download.")}function qk(n){return new ze(We.INVALID_URL,"Invalid URL '"+n+"'.")}function zk(n){return new ze(We.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Gk(){return new ze(We.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+YE+"' property when initializing the app?")}function Hk(){return new ze(We.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Wk(){return new ze(We.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Kk(n){return new ze(We.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function S_(n){return new ze(We.INVALID_ARGUMENT,n)}function XE(){return new ze(We.APP_DELETED,"The Firebase app was deleted.")}function Qk(n){return new ze(We.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function kc(n,e){return new ze(We.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Dc(n){throw new ze(We.INTERNAL_ERROR,"Internal error: "+n)}var _n=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw zk(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(se){se.path.charAt(se.path.length-1)==="/"&&(se.path_=se.path_.slice(0,-1))}let o="(/(.*))?$",c=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function f(se){se.path_=decodeURIComponent(se.path)}let _="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),C="(/([^?#]*).*)?$",k=new RegExp(`^https?://${g}/${_}/b/${i}/o${C}`,"i"),F={bucket:1,path:3},U=t===JE?"(?:storage.googleapis.com|storage.cloud.google.com)":t,M="([^?#]*)",J=new RegExp(`^https?://${U}/${i}/${M}`,"i"),W=[{regex:c,indices:l,postModify:s},{regex:k,indices:F,postModify:f},{regex:J,indices:{bucket:1,path:2},postModify:f}];for(let se=0;se<W.length;se++){let Ie=W[se],ue=Ie.regex.exec(e);if(ue){let P=ue[Ie.indices.bucket],w=ue[Ie.indices.path];w||(w=""),r=new n(P,w),Ie.postModify(r);break}}if(r==null)throw qk(e);return r}},R_=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function Jk(n,e,t){let r=1,i=null,s=null,o=!1,c=0;function l(){return c===2}let f=!1;function _(...M){f||(f=!0,e.apply(null,M))}function g(M){i=setTimeout(()=>{i=null,n(k,l())},M)}function C(){s&&clearTimeout(s)}function k(M,...J){if(f){C();return}if(M){C(),_.call(null,M,...J);return}if(l()||o){C(),_.call(null,M,...J);return}r<64&&(r*=2);let W;c===1?(c=2,W=0):W=(r+Math.random())*1e3,g(W)}let F=!1;function U(M){F||(F=!0,C(),!f&&(i!==null?(M||(c=2),clearTimeout(i),g(0)):M||(c=1)))}return g(0),s=setTimeout(()=>{o=!0,U(!0)},t),U}function Yk(n){n(!1)}function Xk(n){return n!==void 0}function Zk(n){return typeof n=="object"&&!Array.isArray(n)}function O_(n){return typeof n=="string"||n instanceof String}function zE(n){return N_()&&n instanceof Blob}function N_(){return typeof Blob<"u"}function GE(n,e,t,r){if(r<e)throw S_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw S_(`Invalid value for '${n}'. Expected ${t} or less.`)}function M_(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function ZE(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var ko=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(ko||{});function eO(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}var P_=class{constructor(e,t,r,i,s,o,c,l,f,_,g,C=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=l,this.timeout_=f,this.progressCallback_=_,this.connectionFactory_=g,this.retry=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,F)=>{this.resolve_=k,this.reject_=F,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Do(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=c=>{let l=c.loaded,f=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,f)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let c=s.getErrorCode()===ko.NO_ERROR,l=s.getStatus();if(!c||eO(l,this.additionalRetryCodes_)&&this.retry){let _=s.getErrorCode()===ko.ABORT;r(!1,new Do(!1,null,_));return}let f=this.successCodes_.indexOf(l)!==-1;r(!0,new Do(f,s))})},t=(r,i)=>{let s=this.resolve_,o=this.reject_,c=i.connection;if(i.wasSuccessCode)try{let l=this.callback_(c,c.getResponse());Xk(l)?s(l):s()}catch(l){o(l)}else if(c!==null){let l=k_();l.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,l)):o(l)}else if(i.canceled){let l=this.appDelete_?XE():$k();o(l)}else{let l=jk();o(l)}};this.canceled_?t(!1,new Do(!1,null,!0)):this.backoffId_=Jk(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Yk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Do=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function tO(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function nO(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rO(n,e){e&&(n["X-Firebase-GMPID"]=e)}function iO(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function sO(n,e,t,r,i,s,o=!0){let c=ZE(n.urlParams),l=n.url+c,f=Object.assign({},n.headers);return rO(f,e),tO(f,t),nO(f,s),iO(f,r),new P_(l,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}function oO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function aO(...n){let e=oO();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(N_())return new Blob(n);throw new ze(We.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function cO(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function lO(n){if(typeof atob>"u")throw Kk("base-64");return atob(n)}var yn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Oc=class{constructor(e,t){this.data=e,this.contentType=t||null}};function eI(n,e){switch(n){case yn.RAW:return new Oc(tI(e));case yn.BASE64:case yn.BASE64URL:return new Oc(nI(n,e));case yn.DATA_URL:return new Oc(dO(e),hO(e))}throw k_()}function tI(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let s=r,o=n.charCodeAt(++t);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function uO(n){let e;try{e=decodeURIComponent(n)}catch{throw kc(yn.DATA_URL,"Malformed data URL.")}return tI(e)}function nI(n,e){switch(n){case yn.BASE64:{let i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw kc(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case yn.BASE64URL:{let i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw kc(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=lO(e)}catch(i){throw i.message.includes("polyfill")?i:kc(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}var Jd=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw kc(yn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=fO(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function dO(n){let e=new Jd(n);return e.base64?nI(yn.BASE64,e.rest):uO(e.rest)}function hO(n){return new Jd(n).contentType}function fO(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var Yd=class n{constructor(e,t){let r=0,i="";zE(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(zE(this.data_)){let r=this.data_,i=cO(r,e,t);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(N_()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(aO.apply(null,t))}else{let t=e.map(o=>O_(o)?eI(yn.RAW,o).data:o.data_),r=0;t.forEach(o=>{r+=o.byteLength});let i=new Uint8Array(r),s=0;return t.forEach(o=>{for(let c=0;c<o.length;c++)i[s++]=o[c]}),new n(i,!0)}}uploadData(){return this.data_}};function rI(n){let e;try{e=JSON.parse(n)}catch{return null}return Zk(e)?e:null}function pO(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function mO(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function iI(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function gO(n,e){return e}var vt=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||gO}},Qd=null;function _O(n){return!O_(n)||n.length<2?n:iI(n)}function sI(){if(Qd)return Qd;let n=[];n.push(new vt("bucket")),n.push(new vt("generation")),n.push(new vt("metageneration")),n.push(new vt("name","fullPath",!0));function e(s,o){return _O(o)}let t=new vt("name");t.xform=e,n.push(t);function r(s,o){return o!==void 0?Number(o):o}let i=new vt("size");return i.xform=r,n.push(i),n.push(new vt("timeCreated")),n.push(new vt("updated")),n.push(new vt("md5Hash",null,!0)),n.push(new vt("cacheControl",null,!0)),n.push(new vt("contentDisposition",null,!0)),n.push(new vt("contentEncoding",null,!0)),n.push(new vt("contentLanguage",null,!0)),n.push(new vt("contentType",null,!0)),n.push(new vt("metadata","customMetadata",!0)),Qd=n,Qd}function yO(n,e){function t(){let r=n.bucket,i=n.fullPath,s=new _n(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function vO(n,e,t){let r={};r.type="file";let i=t.length;for(let s=0;s<i;s++){let o=t[s];r[o.local]=o.xform(r,e[o.server])}return yO(r,n),r}function oI(n,e,t){let r=rI(e);return r===null?null:vO(n,r,t)}function wO(n,e,t,r){let i=rI(e);if(i===null||!O_(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(f=>{let _=n.bucket,g=n.fullPath,C="/b/"+o(_)+"/o/"+o(g),k=M_(C,t,r),F=ZE({alt:"media",token:f});return k+F})[0]}function bO(n,e){let t={},r=e.length;for(let i=0;i<r;i++){let s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}var Xd=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function aI(n){if(!n)throw k_()}function EO(n,e){function t(r,i){let s=oI(n,i,e);return aI(s!==null),s}return t}function IO(n,e){function t(r,i){let s=oI(n,i,e);return aI(s!==null),wO(s,i,n.host,n._protocol)}return t}function cI(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=Uk():i=Lk():t.getStatus()===402?i=Fk(n.bucket):t.getStatus()===403?i=Bk(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function TO(n){let e=cI(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=Vk(n.path)),s.serverResponse=i.serverResponse,s}return t}function CO(n,e,t){let r=e.fullServerUrl(),i=M_(r,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,c=new Xd(i,s,IO(n,t),o);return c.errorHandler=TO(e),c}function AO(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function SO(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=AO(null,e)),r}function RO(n,e,t,r,i){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let W="";for(let se=0;se<2;se++)W=W+Math.random().toString().slice(2);return W}let l=c();o["Content-Type"]="multipart/related; boundary="+l;let f=SO(e,r,i),_=bO(f,t),g="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+l+`\r
Content-Type: `+f.contentType+`\r
\r
`,C=`\r
--`+l+"--",k=Yd.getBlob(g,r,C);if(k===null)throw Hk();let F={name:f.fullPath},U=M_(s,n.host,n._protocol),M="POST",J=n.maxUploadRetryTime,ee=new Xd(U,M,EO(n,t),J);return ee.urlParams=F,ee.headers=o,ee.body=k.uploadData(),ee.errorHandler=cI(e),ee}var EU=256*1024;var HE=null,x_=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ko.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ko.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ko.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Dc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(let s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Dc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Dc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Dc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Dc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},D_=class extends x_{initXhr(){this.xhr_.responseType="text"}};function lI(){return HE?HE():new D_}var Oo=class n{constructor(e,t){this._service=e,t instanceof _n?this._location=t:this._location=_n.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new _n(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return iI(this._location.path)}get storage(){return this._service}get parent(){let e=pO(this._location.path);if(e===null)return null;let t=new _n(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Qk(e)}};function PO(n,e,t){n._throwIfRoot("uploadBytes");let r=RO(n.storage,n._location,sI(),new Yd(e,!0),t);return n.storage.makeRequestWithTokens(r,lI).then(i=>({metadata:i,ref:n}))}function xO(n,e,t=yn.RAW,r){n._throwIfRoot("uploadString");let i=eI(t,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),PO(n,i.data,s)}function DO(n){n._throwIfRoot("getDownloadURL");let e=CO(n.storage,n._location,sI());return n.storage.makeRequestWithTokens(e,lI).then(t=>{if(t===null)throw Wk();return t})}function kO(n,e){let t=mO(n._location.path,e),r=new _n(n._location.bucket,t);return new Oo(n.storage,r)}function OO(n){return/^[A-Za-z]+:\/\//.test(n)}function NO(n,e){return new Oo(n,e)}function uI(n,e){if(n instanceof Nc){let t=n;if(t._bucket==null)throw Gk();let r=new Oo(t,t._bucket);return e!=null?uI(r,e):r}else return e!==void 0?kO(n,e):n}function MO(n,e){if(e&&OO(e)){if(n instanceof Nc)return NO(n,e);throw S_("To use ref(service, url), the first argument must be a Storage instance.")}else return uI(n,e)}function WE(n,e){let t=e?.[YE];return t==null?null:_n.makeFromBucketSpec(t,n)}function VO(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:Du(i,n.app.options.projectId))}var Nc=class{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=JE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Nk,this._maxUploadRetryTime=Mk,this._requests=new Set,i!=null?this._bucket=_n.makeFromBucketSpec(i,this._host):this._bucket=WE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=_n.makeFromBucketSpec(this._url,e):this._bucket=WE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){GE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){GE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return E(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return E(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Oo(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new R_(XE());{let o=sO(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){return E(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},KE="@firebase/storage",QE="0.13.2";var dI="storage";function qn(n,e,t,r){return n=Me(n),xO(n,e,t,r)}function zn(n){return n=Me(n),DO(n)}function Gn(n,e){return n=Me(n),MO(n,e)}function _r(n=ni(),e){n=Me(n);let r=Hi(n,dI).getImmediate({identifier:e}),i=xu("storage");return i&&hI(r,...i),r}function hI(n,e,t,r={}){VO(n,e,t,r)}function FO(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Nc(t,r,i,e,On)}function LO(){kn(new kt(dI,FO,"PUBLIC").setMultipleInstances(!0)),Le(KE,QE,""),Le(KE,QE,"esm2017")}LO();var Mc=ca(No());var Ot=class n{constructor(e){this.auth=e}tipoUsuario;mailUsuario;nombreUsuario;login(e,t){return E(this,null,function*(){try{let i=(yield z0(this.auth,e,t)).user;if(i&&i.emailVerified)return i;if(e=="especialista@prueba.com"||e=="administrador@prueba.com"||e=="paciente@prueba.com")return i;throw yield rd(this.auth),new Error("Por favor, verifica tu correo electr\xF3nico antes de iniciar sesi\xF3n.")}catch{throw new Error("El usuario o contrase\xF1a son incorrectos")}})}register(e,t){return E(this,null,function*(){let i=(yield j0(this.auth,e,t)).user;return i&&(yield q0(i),yield rd(this.auth)),i})}logout(){return rd(this.auth)}isLoggedIn(){return B0(this.auth)}getUserEmail(){return this.isLoggedIn().pipe(he(e=>e?e.email:null))}static \u0275fac=function(t){return new(t||n)(Ce(Zi))};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})};var yr=class{constructor(e){return e}},fI="storage",F_=class{constructor(){return Ki(fI)}};var L_=new me("angularfire2.storage-instances");function UO(n,e){let t=to(fI,n,e);return t&&new yr(t)}function BO(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new yr(r)}}var jO={provide:F_,deps:[[new ot,L_]]},$O={provide:yr,useFactory:UO,deps:[[new ot,L_],fn]};function pI(n,...e){return Le("angularfire",or.full,"gcs"),Ct([$O,jO,{provide:L_,useFactory:BO(n),multi:!0,deps:[Ye,ln,ii,ar,[new ot,es],[new ot,ri],...e]}])}var mI=Xe(_r,!0);function qO(n,e){n&1&&(A(0,"div",40),O(1," Se requiere un nombre v\xE1lido. "),b())}function zO(n,e){n&1&&(A(0,"div",40),O(1," Se requiere un apellido v\xE1lido. "),b())}function GO(n,e){n&1&&(A(0,"div",40),O(1," Ingrese una edad valida (mayor a 21 y menor a 125 a\xF1os). "),b())}function HO(n,e){n&1&&(A(0,"div",40),O(1," El documento es requerido y debe ser num\xE9rico (8 caracteres). "),b())}function WO(n,e){n&1&&(A(0,"p"),O(1,"El correo es requerido."),b())}function KO(n,e){n&1&&(A(0,"p"),O(1,"El formato del correo no es v\xE1lido."),b())}function QO(n,e){if(n&1&&(A(0,"div",40),K(1,WO,2,0,"p",32)(2,KO,2,0,"p",32),b()),n&2){let t,r,i=te(2);B(),$("ngIf",(t=i.especialistaForm.get("email"))==null||t.errors==null?null:t.errors.required),B(),$("ngIf",(r=i.especialistaForm.get("email"))==null||r.errors==null?null:r.errors.email)}}function JO(n,e){n&1&&(A(0,"div",40),O(1," La contrase\xF1a es requerida y debe tener m\xEDnimo 6 caracteres. "),b())}function YO(n,e){n&1&&(A(0,"div")(1,"small",40),O(2,"Debe seleccionar al menos una opci\xF3n."),b()())}function XO(n,e){n&1&&(A(0,"div",40),O(1," Ingrese una especialidad v\xE1lida. "),b())}function ZO(n,e){if(n&1&&(A(0,"div",41)(1,"label",42),O(2,"Especialidad adicional:"),b(),oe(3,"input",43),K(4,XO,2,0,"div",12),b()),n&2){let t,r=te(2);B(4),$("ngIf",((t=r.especialistaForm.get("especialidadadicional"))==null?null:t.invalid)&&(((t=r.especialistaForm.get("especialidadadicional"))==null?null:t.touched)||((t=r.especialistaForm.get("especialidadadicional"))==null?null:t.dirty)))}}function eN(n,e){n&1&&(A(0,"div",40),O(1," Debe seleccionar exactamente 1 im\xE1gen. "),b())}function tN(n,e){if(n&1){let t=Yt();A(0,"form",6),ne("ngSubmit",function(){Ae(t);let i=te();return Se(i.onSubmitEspecialista())}),A(1,"div",7)(2,"div",8)(3,"div",9)(4,"label",10),O(5,"Nombre/s:"),b(),oe(6,"input",11),K(7,qO,2,0,"div",12),b(),A(8,"div",9)(9,"label",13),O(10,"Apellido:"),b(),oe(11,"input",14),K(12,zO,2,0,"div",12),b(),A(13,"div",9)(14,"label",15),O(15,"Edad:"),b(),oe(16,"input",16),K(17,GO,2,0,"div",12),b(),A(18,"div",9)(19,"label",17),O(20,"DNI:"),b(),oe(21,"input",18),K(22,HO,2,0,"div",12),b()(),A(23,"div",19)(24,"div",9)(25,"label",20),O(26,"Email:"),b(),oe(27,"input",21),K(28,QO,3,2,"div",12),b(),A(29,"div",9)(30,"label",22),O(31,"Contrase\xF1a:"),b(),oe(32,"input",23),K(33,JO,2,0,"div",12),b(),A(34,"div",24)(35,"label",25),O(36,"Especialidad:"),b(),A(37,"label")(38,"input",26),ne("change",function(){Ae(t);let i=te();return Se(i.onCheckboxChange("Pediatria"))}),b(),O(39,"Pediatria "),b(),A(40,"label")(41,"input",27),ne("change",function(){Ae(t);let i=te();return Se(i.onCheckboxChange("Oftalmologia"))}),b(),O(42,"Oftalmologia "),b(),A(43,"label")(44,"input",28),ne("change",function(){Ae(t);let i=te();return Se(i.onCheckboxChange("Cardiologia"))}),b(),O(45,"Cardiologia "),b(),A(46,"label")(47,"input",29),ne("change",function(){Ae(t);let i=te();return Se(i.onCheckboxChange("Cirugia"))}),b(),O(48,"Cirugia "),b(),A(49,"label")(50,"input",30),ne("change",function(){Ae(t);let i=te();return Se(i.onCheckboxChange("General"))}),b(),O(51,"General "),b(),A(52,"label")(53,"input",31),ne("change",function(){Ae(t);let i=te();return Se(i.onCheckboxChange("Otra"))}),b(),O(54,"Otra "),b(),K(55,YO,3,0,"div",32),b(),K(56,ZO,5,1,"div",33),A(57,"div",9)(58,"label",34),O(59,"Subir im\xE1gen de perfil:"),b(),A(60,"input",35),ne("change",function(i){Ae(t);let s=te();return Se(s.onFileChange(i))}),b(),K(61,eN,2,0,"div",12),b()()(),A(62,"div",36)(63,"button",37),O(64,"Registrarse"),b()(),A(65,"div",38),O(66," Ya posees una cuenta? "),A(67,"a",39),ne("click",function(){Ae(t);let i=te();return Se(i.goToLogin())}),O(68," Inicia sesi\xF3n"),b()()()}if(n&2){let t,r,i,s,o,c,l,f=te();$("formGroup",f.especialistaForm),B(7),$("ngIf",((t=f.especialistaForm.get("nombre"))==null?null:t.invalid)&&(((t=f.especialistaForm.get("nombre"))==null?null:t.touched)||((t=f.especialistaForm.get("nombre"))==null?null:t.dirty))),B(5),$("ngIf",((r=f.especialistaForm.get("apellido"))==null?null:r.invalid)&&(((r=f.especialistaForm.get("apellido"))==null?null:r.touched)||((r=f.especialistaForm.get("apellido"))==null?null:r.dirty))),B(5),$("ngIf",((i=f.especialistaForm.get("edad"))==null?null:i.invalid)&&(((i=f.especialistaForm.get("edad"))==null?null:i.touched)||((i=f.especialistaForm.get("edad"))==null?null:i.dirty))),B(5),$("ngIf",((s=f.especialistaForm.get("dni"))==null?null:s.invalid)&&(((s=f.especialistaForm.get("dni"))==null?null:s.touched)||((s=f.especialistaForm.get("dni"))==null?null:s.dirty))),B(6),$("ngIf",((o=f.especialistaForm.get("email"))==null?null:o.invalid)&&((o=f.especialistaForm.get("email"))==null?null:o.touched)),B(5),$("ngIf",((c=f.especialistaForm.get("contrase\xF1a"))==null?null:c.invalid)&&(((c=f.especialistaForm.get("contrase\xF1a"))==null?null:c.touched)||((c=f.especialistaForm.get("contrase\xF1a"))==null?null:c.dirty))),B(22),$("ngIf",(l=f.especialistaForm.get("especialidad"))==null?null:l.invalid),B(),$("ngIf",f.otra),B(5),$("ngIf",f.imagenesInvalidEspecialista),B(2),$("disabled",f.especialistaForm.invalid)}}function nN(n,e){n&1&&(A(0,"div",40),O(1," Se requiere un nombre v\xE1lido. "),b())}function rN(n,e){n&1&&(A(0,"div",40),O(1," Se requiere un apellido v\xE1lido. "),b())}function iN(n,e){n&1&&(A(0,"div",40),O(1," Ingrese una edad valida (menor a 125 a\xF1os). "),b())}function sN(n,e){n&1&&(A(0,"div",40),O(1," El documento es requerido y debe ser num\xE9rico (8 caracteres). "),b())}function oN(n,e){n&1&&(A(0,"p"),O(1,"El correo es requerido."),b())}function aN(n,e){n&1&&(A(0,"p"),O(1,"El formato del correo no es v\xE1lido."),b())}function cN(n,e){if(n&1&&(A(0,"div",40),K(1,oN,2,0,"p",32)(2,aN,2,0,"p",32),b()),n&2){let t,r,i=te(2);B(),$("ngIf",(t=i.usuarioForm.get("email"))==null||t.errors==null?null:t.errors.required),B(),$("ngIf",(r=i.usuarioForm.get("email"))==null||r.errors==null?null:r.errors.email)}}function lN(n,e){n&1&&(A(0,"div",40),O(1," La contrase\xF1a es requerida y debe tener m\xEDnimo 6 caracteres. "),b())}function uN(n,e){n&1&&(A(0,"div",40),O(1," Ingrese una obra social v\xE1lida. "),b())}function dN(n,e){n&1&&(A(0,"div",40),O(1," Debe seleccionar exactamente 2 im\xE1genes. "),b())}function hN(n,e){if(n&1){let t=Yt();A(0,"form",6),ne("ngSubmit",function(){Ae(t);let i=te();return Se(i.onSubmit())}),A(1,"div",7)(2,"div",8)(3,"div",9)(4,"label",10),O(5,"Nombre/s:"),b(),oe(6,"input",11),K(7,nN,2,0,"div",12),b(),A(8,"div",9)(9,"label",13),O(10,"Apellido:"),b(),oe(11,"input",14),K(12,rN,2,0,"div",12),b(),A(13,"div",9)(14,"label",15),O(15,"Edad:"),b(),oe(16,"input",16),K(17,iN,2,0,"div",12),b(),A(18,"div",9)(19,"label",17),O(20,"DNI:"),b(),oe(21,"input",18),K(22,sN,2,0,"div",12),b()(),A(23,"div",19)(24,"div",9)(25,"label",20),O(26,"Email:"),b(),oe(27,"input",21),K(28,cN,3,2,"div",12),b(),A(29,"div",9)(30,"label",22),O(31,"Contrase\xF1a:"),b(),oe(32,"input",23),K(33,lN,2,0,"div",12),b(),A(34,"div",9)(35,"label",44),O(36,"Obra Social:"),b(),oe(37,"input",45),K(38,uN,2,0,"div",12),b(),A(39,"div",9)(40,"label",34),O(41,"Subir im\xE1genes (debe seleccionar 2): "),b(),A(42,"input",46),ne("change",function(i){Ae(t);let s=te();return Se(s.onFileChange(i))}),b(),K(43,dN,2,0,"div",12),b()()(),A(44,"div",36)(45,"button",37),O(46,"Registrarse"),b()(),A(47,"div",38),O(48," Ya posees una cuenta? "),A(49,"a",39),ne("click",function(){Ae(t);let i=te();return Se(i.goToLogin())}),O(50," Inicia sesi\xF3n"),b()()()}if(n&2){let t,r,i,s,o,c,l,f=te();$("formGroup",f.usuarioForm),B(7),$("ngIf",((t=f.usuarioForm.get("nombre"))==null?null:t.invalid)&&(((t=f.usuarioForm.get("nombre"))==null?null:t.touched)||((t=f.usuarioForm.get("nombre"))==null?null:t.dirty))),B(5),$("ngIf",((r=f.usuarioForm.get("apellido"))==null?null:r.invalid)&&(((r=f.usuarioForm.get("apellido"))==null?null:r.touched)||((r=f.usuarioForm.get("apellido"))==null?null:r.dirty))),B(5),$("ngIf",((i=f.usuarioForm.get("edad"))==null?null:i.invalid)&&(((i=f.usuarioForm.get("edad"))==null?null:i.touched)||((i=f.usuarioForm.get("edad"))==null?null:i.dirty))),B(5),$("ngIf",((s=f.usuarioForm.get("dni"))==null?null:s.invalid)&&(((s=f.usuarioForm.get("dni"))==null?null:s.touched)||((s=f.usuarioForm.get("dni"))==null?null:s.dirty))),B(6),$("ngIf",((o=f.usuarioForm.get("email"))==null?null:o.invalid)&&((o=f.usuarioForm.get("email"))==null?null:o.touched)),B(5),$("ngIf",((c=f.usuarioForm.get("contrase\xF1a"))==null?null:c.invalid)&&(((c=f.usuarioForm.get("contrase\xF1a"))==null?null:c.touched)||((c=f.usuarioForm.get("contrase\xF1a"))==null?null:c.dirty))),B(5),$("ngIf",((l=f.usuarioForm.get("obrasocial"))==null?null:l.invalid)&&(((l=f.usuarioForm.get("obrasocial"))==null?null:l.touched)||((l=f.usuarioForm.get("obrasocial"))==null?null:l.dirty))),B(5),$("ngIf",f.imagenesInvalid),B(2),$("disabled",f.usuarioForm.invalid)}}var eh=class n{constructor(e,t,r,i,s){this.firestore=e;this.router=t;this.authService=r;this.fb=i;this.storage=s}especialista=!1;otra=!1;especialidades=[];imagenesInvalid=!1;imagenesInvalidEspecialista=!1;usuarioForm;especialistaForm;ngOnInit(){this.usuarioForm=this.fb.group({nombre:["",[j.required,j.pattern("^(?!\\s*$)[a-zA-Z\xE1\xE9\xED\xF3\xFA\xC1\xC9\xCD\xD3\xDA\xF1\xD1\\s]+$")]],apellido:["",[j.required,j.pattern("^(?!\\s*$)[a-zA-Z\xE1\xE9\xED\xF3\xFA\xC1\xC9\xCD\xD3\xDA\xF1\xD1\\s]+$")]],dni:["",[j.required,j.pattern("^[0-9]*$"),j.maxLength(8),j.minLength(8)]],edad:[[],[j.required,j.pattern("^[0-9]*$"),j.max(125)]],email:["",[j.required,j.email]],contrase\u00F1a:["",[j.required,j.minLength(6)]],obrasocial:["",[j.required,j.pattern("^(?!\\s*$)[a-zA-Z\xE1\xE9\xED\xF3\xFA\xC1\xC9\xCD\xD3\xDA\xF1\xD10-9\\s]+$")]],imagenes:[null,this.imageValidator.bind(this)]}),this.especialistaForm=this.fb.group({nombre:["",[j.required,j.pattern("^(?!\\s*$)[a-zA-Z\xE1\xE9\xED\xF3\xFA\xC1\xC9\xCD\xD3\xDA\xF1\xD1\\s]+$")]],apellido:["",[j.required,j.pattern("^(?!\\s*$)[a-zA-Z\xE1\xE9\xED\xF3\xFA\xC1\xC9\xCD\xD3\xDA\xF1\xD1\\s]+$")]],dni:["",[j.required,j.pattern("^[0-9]*$"),j.maxLength(8),j.minLength(8)]],edad:[[],[j.required,j.pattern("^[0-9]*$"),j.min(21),j.max(125)]],email:["",[j.required,j.email]],contrase\u00F1a:["",[j.required,j.minLength(6)]],especialidad:[[],[j.required]],especialidadadicional:[""],imagenes:[null,this.imageValidator.bind(this)]}),this.especialistaForm.get("especialidadadicional")?.clearValidators(),this.especialistaForm.get("especialidadadicional")?.updateValueAndValidity()}imageValidator(e){if(this.especialista){if(!e.value||e.value.length!==1)return{required:!0}}else if(!e.value||e.value.length!==2)return{required:!0};return null}onFileChange(e){let t=e.target.files;if(this.especialista&&t.length===1||!this.especialista&&t.length===2){let r=Array.from(t),i=[];r.forEach((s,o)=>{let c=new FileReader;c.onload=()=>{i.push({dataUrl:c.result}),i.length===r.length&&(this.especialista?(this.especialistaForm.patchValue({imagenes:i}),this.imagenesInvalidEspecialista=!1):(this.usuarioForm.patchValue({imagenes:i}),this.imagenesInvalid=!1))},c.readAsDataURL(s)})}else this.especialista?this.imagenesInvalidEspecialista=!0:this.imagenesInvalid=!0;this.especialistaForm.get("imagenes")?.updateValueAndValidity(),this.usuarioForm.get("imagenes")?.updateValueAndValidity()}toggleEspecialista(){this.usuarioForm.reset(),this.especialistaForm.reset(),this.otra=!1,this.especialista=!this.especialista}onCheckboxChange(e){let t=this.especialidades.indexOf(e);t===-1?(this.especialidades.push(e),e=="Otra"&&(this.otra=!this.otra,this.especialistaForm.patchValue({especialidad:this.especialidades}),this.especialistaForm.get("especialidadadicional")?.setValidators([j.required,j.pattern("^(?!\\s*$)[a-zA-Z\xE1\xE9\xED\xF3\xFA\xC1\xC9\xCD\xD3\xDA\xF1\xD1\\s]+$")]))):(this.especialidades.splice(t,1),e=="Otra"&&(this.otra=!this.otra,this.especialistaForm.patchValue({especialidad:this.especialidades}),this.especialistaForm.get("especialidadadicional")?.clearValidators())),this.especialistaForm.patchValue({especialidad:this.especialidades}),this.especialistaForm.get("especialidadadicional")?.updateValueAndValidity()}onSubmit(){return E(this,null,function*(){let e=this.usuarioForm.get("nombre")?.value,t=this.usuarioForm.get("apellido")?.value,r=this.usuarioForm.get("dni")?.value,i=this.usuarioForm.get("edad")?.value,s=this.usuarioForm.get("email")?.value,o=this.usuarioForm.get("contrase\xF1a")?.value,c=this.usuarioForm.get("obrasocial")?.value;try{yield this.authService.register(s,o);let l=_r(),f=this.usuarioForm.get("imagenes")?.value,_=Gn(l,`usuarios/${s}_1`),g=Gn(l,`usuarios/${s}_2`);yield qn(_,f[0].dataUrl,"data_url");let C=yield zn(_);yield qn(g,f[1].dataUrl,"data_url");let k=yield zn(g),F=gn(this.firestore,"usuarios");yield hs(F,{email:s,dni:r,nombre:e,apellido:t,edad:i,obrasocial:c,foto1:C,foto2:k,tipo:"paciente"}),Mc.default.fire({title:"Usuario creado",text:"El usuario fue creado correctamente. Se envi\xF3 un email para validar la cuenta antes de poder ingresar",icon:"success",confirmButtonColor:"#4CAF50",background:"#f2f2f2",heightAuto:!1}),this.router.navigate(["login"])}catch{Mc.default.fire({title:"Error!",text:"El usuario ya se encuentra en uso",icon:"error",confirmButtonColor:"#4CAF50",background:"#f2f2f2",heightAuto:!1})}})}onSubmitEspecialista(){return E(this,null,function*(){let e=this.especialistaForm.get("nombre")?.value,t=this.especialistaForm.get("apellido")?.value,r=this.especialistaForm.get("dni")?.value,i=this.especialistaForm.get("edad")?.value,s=this.especialistaForm.get("email")?.value,o=this.especialistaForm.get("contrase\xF1a")?.value,l=(this.especialistaForm.get("especialidad")?.value).map(f=>f==="Otra"?this.especialistaForm.get("especialidadadicional")?.value:f);try{yield this.authService.register(s,o);let f=_r(),_=this.especialistaForm.get("imagenes")?.value,g=Gn(f,`usuarios/${s}_1`);yield qn(g,_[0].dataUrl,"data_url");let C=yield zn(g),k=gn(this.firestore,"usuarios");yield hs(k,{email:s,dni:r,nombre:e,apellido:t,edad:i,especialidades:l,foto1:C,tipo:"especialista",estado:"pendiente"}),Mc.default.fire({title:"Usuario creado",text:"El usuario fue creado correctamente. Se envi\xF3 un email para validar la cuenta antes de poder ingresar. Tenga en cuenta que su usuario tambi\xE9n deber\xE1 ser aprobado por un administrador",icon:"success",confirmButtonColor:"#4CAF50",background:"#f2f2f2",heightAuto:!1}),this.router.navigate(["login"])}catch{Mc.default.fire({title:"Error!",text:"El usuario ya se encuentra en uso",icon:"error",confirmButtonColor:"#4CAF50",background:"#f2f2f2",heightAuto:!1})}})}goToLogin(){this.router.navigate(["login"])}static \u0275fac=function(t){return new(t||n)(Y(qt),Y(Dt),Y(Ot),Y(Js),Y(yr))};static \u0275cmp=ut({type:n,selectors:[["app-registro"]],standalone:!0,features:[dt],decls:10,vars:2,consts:[[1,"wrapper"],[1,"signup-section"],[1,"toggle-group"],["for","clinic-staff"],["type","checkbox","id","clinic-staff","name","clinic-staff",3,"click"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"left-column"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","name","nombre","formControlName","nombre","required",""],["class","error",4,"ngIf"],["for","apellido"],["type","text","id","apellido","name","apellido","formControlName","apellido","required",""],["for","edad"],["type","number","id","edad","name","edad","formControlName","edad","required",""],["for","dni"],["type","text","id","dni","name","dni","formControlName","dni","required",""],[1,"right-column"],["for","email"],["type","email","id","email","name","email","formControlName","email","required",""],["for","contrase\xF1a"],["type","password","id","contrase\xF1a","name","contrase\xF1a","formControlName","contrase\xF1a","required",""],["id","especialidad",1,"especialidad-form-group"],["for","especialidad"],["type","checkbox","value","Pediatria",3,"change"],["type","checkbox","value","Oftalmologia",3,"change"],["type","checkbox","value","Cardiologia",3,"change"],["type","checkbox","value","Cirugia",3,"change"],["type","checkbox","value","General",3,"change"],["type","checkbox","value","Otra",3,"change"],[4,"ngIf"],["class","form-group","style","margin-top: 42px;",4,"ngIf"],["for","imagenes"],["type","file","id","imagenes","name","imagenes","accept","image/*","required","",3,"change"],[1,"button-container"],["type","submit",1,"submit-btn",3,"disabled"],[1,"a-container"],[1,"login-link",3,"click"],[1,"error"],[1,"form-group",2,"margin-top","42px"],["for","especialidadadicional"],["type","text","id","especialidadadicional","name","especialidadadicional","formControlName","especialidadadicional"],["for","obrasocial"],["type","text","id","obrasocial","name","obrasocial","formControlName","obrasocial","required",""],["type","file","id","imagenes","name","imagenes","accept","image/*","multiple","","required","",3,"change"]],template:function(t,r){t&1&&(A(0,"div",0)(1,"div",1)(2,"h1"),O(3,"Reg\xEDstrate"),b(),A(4,"div",2)(5,"label",3)(6,"input",4),ne("click",function(){return r.toggleEspecialista()}),b(),O(7," \xBFEres personal de la cl\xEDnica? "),b()(),K(8,tN,69,11,"form",5)(9,hN,51,10,"form",5),b()()),t&2&&(B(8),$("ngIf",r.especialista),B(),$("ngIf",!r.especialista))},dependencies:[un,Pn,Zr,Qs,Yr,Ka,Xr,Ks,qi,ji,$i,Ys],styles:['@charset "UTF-8";.wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:92.3vh;width:100vw;background-color:#292952;background-image:url("./media/background-O36KHK4D.jpg");background-size:cover;background-position:center;background-repeat:no-repeat}.signup-section[_ngcontent-%COMP%]{background-color:#e6edf7;padding:20px 40px;border-radius:10px;box-shadow:0 4px 20px #0000001a;width:50%;min-width:50%;min-height:30%}.signup-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2em;color:#686868;margin-bottom:20px;text-align:center}.form-grid[_ngcontent-%COMP%]{display:flex;gap:50px}.left-column[_ngcontent-%COMP%], .right-column[_ngcontent-%COMP%]{flex:1}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.especialidad-form-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:flex-start;margin-bottom:20px}.especialidad-form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:10px}label[_ngcontent-%COMP%]{font-size:1em;color:#666}input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #718199;border-radius:5px;font-size:15px;background-color:#edf4ff}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.a-container[_ngcontent-%COMP%]{margin-top:8px;display:flex;justify-content:center;color:#686868}.login-link[_ngcontent-%COMP%]{color:#007bff;cursor:pointer;text-decoration:underline;margin-left:2px}.login-link[_ngcontent-%COMP%]:hover{text-decoration:none}.submit-btn[_ngcontent-%COMP%]{padding:10px 20px;font-size:1.4em;border:none;border-radius:5px;background-color:#3262ff;color:#fff;cursor:pointer;transition:background-color .3s;width:20%}.submit-btn[_ngcontent-%COMP%]:disabled{background-color:#ccc;color:#666;cursor:not-allowed}.submit-btn[_ngcontent-%COMP%]:disabled:hover{background-color:#ccc;color:#666;cursor:not-allowed}.submit-btn[_ngcontent-%COMP%]:hover{background-color:#134aff}.toggle-group[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px}.toggle-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:10px}.toggle-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:40px;height:20px;background-color:#ccc;border-radius:20px;position:relative;cursor:pointer;outline:none}.toggle-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked{background-color:#3262ff}.toggle-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked:after{left:20px}.toggle-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:after{content:"";position:absolute;width:16px;height:16px;border-radius:50%;background-color:#fff;top:2px;transition:.3s}.error[_ngcontent-%COMP%]{color:red;font-size:.9rem;margin-top:5px}.imagenes[_ngcontent-%COMP%]{background-color:#3262ff;color:#fff}']})};var _I=ca(No());function fN(n,e){n&1&&(A(0,"p"),O(1,"Ingrese su correo."),b())}function pN(n,e){n&1&&(A(0,"p"),O(1,"El formato del correo no es v\xE1lido."),b())}function mN(n,e){if(n&1&&(A(0,"div",19),K(1,fN,2,0,"p",20)(2,pN,2,0,"p",20),b()),n&2){let t,r,i=te();B(),$("ngIf",(t=i.form.get("email"))==null||t.errors==null?null:t.errors.required),B(),$("ngIf",(r=i.form.get("email"))==null||r.errors==null?null:r.errors.email)}}function gN(n,e){n&1&&(A(0,"p"),O(1,"Ingrese su contrase\xF1a."),b())}function _N(n,e){n&1&&(A(0,"p"),O(1,"La contrase\xF1a es muy corta."),b())}function yN(n,e){if(n&1&&(A(0,"div",19),K(1,gN,2,0,"p",20)(2,_N,2,0,"p",20),b()),n&2){let t,r,i=te();B(),$("ngIf",(t=i.form.get("contrase\xF1a"))==null||t.errors==null?null:t.errors.required),B(),$("ngIf",(r=i.form.get("contrase\xF1a"))==null||r.errors==null?null:r.errors.minlength)}}var th=class n{constructor(e,t,r,i){this.fb=e;this.router=t;this.auth=r;this.firestore=i}form;email1="paciente@prueba.com";email2="especialista@prueba.com";email3="administrador@prueba.com";password="test123";ngOnInit(){this.form=this.fb.group({email:["",[j.required,j.email]],contrase\u00F1a:["",[j.required,j.minLength(6)]]})}onLogin(){return E(this,null,function*(){try{let e=yield this.auth.login(this.form.get("email")?.value,this.form.get("contrase\xF1a")?.value),t=gn(this.firestore,"usuarios"),r=jE(t,qE("email","==",e.email)),s=(yield Wd(r)).docs.map(o=>H({id:o.id},o.data()));switch(this.auth.mailUsuario=s[0].email,this.auth.tipoUsuario=s[0].tipo,this.auth.nombreUsuario=s[0].nombre,this.auth.tipoUsuario){case"paciente":this.router.navigate(["perfil"]);break;case"admin":this.router.navigate(["usuarios"]);break;case"especialista":this.router.navigate(["perfil"]);break;default:this.router.navigate(["perfil"])}}catch(e){e instanceof Error&&_I.default.fire({title:"Error!",text:e.message,icon:"error",confirmButtonColor:"#4CAF50",background:"#f2f2f2",heightAuto:!1})}})}goToRegister(){this.router.navigate(["registro"])}onSubmit(){}completarAccesoRapido(e,t){this.form.patchValue({email:e,contrase\u00F1a:t})}static \u0275fac=function(t){return new(t||n)(Y(Js),Y(Dt),Y(Ot),Y(qt))};static \u0275cmp=ut({type:n,selectors:[["app-login"]],standalone:!0,features:[dt],decls:33,vars:4,consts:[[1,"wrapper"],[1,"signup-section"],[3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","formControlName","email","required",""],["class","error",4,"ngIf"],["for","contrase\xF1a"],["type","password","id","contrase\xF1a","name","contrase\xF1a","formControlName","contrase\xF1a","required",""],[1,"button-container"],["type","submit",1,"submit-btn",3,"disabled"],[1,"quick-login-section"],[1,"quick-login-buttons"],[1,"quick-login-btn","paciente",3,"click"],[1,"quick-login-btn","especialista",3,"click"],[1,"quick-login-btn","administrador",3,"click"],[1,"a-container"],[1,"login-link",3,"click"],[1,"error"],[4,"ngIf"]],template:function(t,r){if(t&1&&(A(0,"div",0)(1,"div",1)(2,"h1"),O(3,"Iniciar sesi\xF3n"),b(),A(4,"form",2),ne("ngSubmit",function(){return r.onLogin()}),A(5,"div",3)(6,"div",4)(7,"label",5),O(8,"Email:"),b(),oe(9,"input",6),K(10,mN,3,2,"div",7),b(),A(11,"div",4)(12,"label",8),O(13,"Contrase\xF1a:"),b(),oe(14,"input",9),K(15,yN,3,2,"div",7),b()(),A(16,"div",10)(17,"button",11),O(18,"Iniciar sesi\xF3n"),b()()(),A(19,"div",12)(20,"h3"),O(21,"Inicio de sesi\xF3n r\xE1pido"),b(),A(22,"div",13)(23,"button",14),ne("click",function(){return r.completarAccesoRapido(r.email1,r.password)}),O(24,"Completar datos paciente"),b(),A(25,"button",15),ne("click",function(){return r.completarAccesoRapido(r.email2,r.password)}),O(26,"Completar datos especialista"),b(),A(27,"button",16),ne("click",function(){return r.completarAccesoRapido(r.email3,r.password)}),O(28,"Completar datos administrador"),b()()(),A(29,"div",17),O(30," No posees una cuenta a\xFAn? "),A(31,"a",18),ne("click",function(){return r.goToRegister()}),O(32," Registrarse"),b()()()()),t&2){let i,s;B(4),$("formGroup",r.form),B(6),$("ngIf",((i=r.form.get("email"))==null?null:i.invalid)&&((i=r.form.get("email"))==null?null:i.touched)),B(5),$("ngIf",((s=r.form.get("contrase\xF1a"))==null?null:s.invalid)&&(((s=r.form.get("contrase\xF1a"))==null?null:s.touched)||((s=r.form.get("contrase\xF1a"))==null?null:s.dirty))),B(2),$("disabled",r.form.invalid)}},dependencies:[un,Pn,Zr,Qs,Yr,Xr,Ks,qi,ji,$i],styles:['@charset "UTF-8";.wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:92.3vh;width:100vw;background-color:#292952;background-image:url("./media/background-O36KHK4D.jpg");background-size:cover;background-position:center;background-repeat:no-repeat}.signup-section[_ngcontent-%COMP%]{background-color:#e6edf7;padding:20px 40px;border-radius:10px;box-shadow:0 4px 20px #0000001a;width:40%;min-width:300px;max-width:600px}.signup-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2em;color:#686868;margin-bottom:20px;text-align:center}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}label[_ngcontent-%COMP%]{font-size:1em;color:#666}input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #718199;border-radius:5px;font-size:15px;background-color:#edf4ff}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:10px}.a-container[_ngcontent-%COMP%]{margin-top:8px;display:flex;justify-content:center;color:#686868}.login-link[_ngcontent-%COMP%]{color:#007bff;cursor:pointer;text-decoration:underline;margin-left:2px}.login-link[_ngcontent-%COMP%]:hover{text-decoration:none}.submit-btn[_ngcontent-%COMP%]{padding:10px 20px;font-size:1.4em;border:none;border-radius:5px;background-color:#3262ff;color:#fff;cursor:pointer;transition:background-color .3s;width:auto;margin-top:10px}.submit-btn[_ngcontent-%COMP%]:disabled{background-color:#ccc;color:#666;cursor:not-allowed}.submit-btn[_ngcontent-%COMP%]:hover{background-color:#134aff}.error[_ngcontent-%COMP%]{color:red;font-size:.9rem;margin-top:5px}.quick-login-section[_ngcontent-%COMP%]{margin-top:20px;text-align:center}.quick-login-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em;color:#686868;margin-bottom:15px}.quick-login-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px;margin-top:10px}.quick-login-btn[_ngcontent-%COMP%]{padding:10px 20px;font-size:1em;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s;color:#fff}.paciente[_ngcontent-%COMP%]{background-color:#db4437}.especialista[_ngcontent-%COMP%]{background-color:#4267b2}.administrador[_ngcontent-%COMP%]{background-color:#1da1f2}.quick-login-btn[_ngcontent-%COMP%]:hover{opacity:.9}']})};var nh=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ut({type:n,selectors:[["app-perfil"]],standalone:!0,features:[dt],decls:4,vars:0,consts:[[1,"wrapper"],[1,"perfil-section"]],template:function(t,r){t&1&&(A(0,"div",0)(1,"div",1)(2,"h1"),O(3," Mi Perfil "),b()()())},styles:['@charset "UTF-8";.wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:92.3vh;width:100vw;background-color:#292952;background-image:url("./media/background-O36KHK4D.jpg");background-size:cover;background-position:center;background-repeat:no-repeat}.perfil-section[_ngcontent-%COMP%]{background-color:#e6edf7;padding:20px 40px;border-radius:10px;box-shadow:0 4px 20px #0000001a;width:85%;min-width:85%;min-height:700px}.perfil-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2em;color:#686868;margin-bottom:20px;text-align:center}']})};var fs=ca(No());function vN(n,e){n&1&&(A(0,"div",38),O(1," Se requiere un nombre v\xE1lido. "),b())}function wN(n,e){n&1&&(A(0,"div",38),O(1," Se requiere un apellido v\xE1lido. "),b())}function bN(n,e){n&1&&(A(0,"div",38),O(1," Ingrese una edad valida (mayor a 21 y menor a 125 a\xF1os). "),b())}function EN(n,e){n&1&&(A(0,"div",38),O(1," El documento es requerido y debe ser num\xE9rico (8 caracteres). "),b())}function IN(n,e){n&1&&(A(0,"p"),O(1,"El correo es requerido."),b())}function TN(n,e){n&1&&(A(0,"p"),O(1,"El formato del correo no es v\xE1lido."),b())}function CN(n,e){if(n&1&&(A(0,"div",38),K(1,IN,2,0,"p",32)(2,TN,2,0,"p",32),b()),n&2){let t,r,i=te(2);B(),$("ngIf",(t=i.especialistaForm.get("email"))==null||t.errors==null?null:t.errors.required),B(),$("ngIf",(r=i.especialistaForm.get("email"))==null||r.errors==null?null:r.errors.email)}}function AN(n,e){n&1&&(A(0,"div",38),O(1," La contrase\xF1a es requerida y debe tener m\xEDnimo 6 caracteres. "),b())}function SN(n,e){n&1&&(A(0,"div")(1,"small",38),O(2,"Debe seleccionar al menos una opci\xF3n."),b()())}function RN(n,e){n&1&&(A(0,"div",38),O(1," Ingrese una especialidad v\xE1lida. "),b())}function PN(n,e){if(n&1&&(A(0,"div",39)(1,"label",40),O(2,"Especialidad adicional:"),b(),oe(3,"input",41),K(4,RN,2,0,"div",12),b()),n&2){let t,r=te(2);B(4),$("ngIf",((t=r.especialistaForm.get("especialidadadicional"))==null?null:t.invalid)&&(((t=r.especialistaForm.get("especialidadadicional"))==null?null:t.touched)||((t=r.especialistaForm.get("especialidadadicional"))==null?null:t.dirty)))}}function xN(n,e){n&1&&(A(0,"div",38),O(1," Debe seleccionar exactamente 1 im\xE1gen. "),b())}function DN(n,e){if(n&1){let t=Yt();A(0,"form",6),ne("ngSubmit",function(){Ae(t);let i=te();return Se(i.onSubmitEspecialista())}),A(1,"div",7)(2,"div",8)(3,"div",9)(4,"label",10),O(5,"Nombre/s:"),b(),oe(6,"input",11),K(7,vN,2,0,"div",12),b(),A(8,"div",9)(9,"label",13),O(10,"Apellido:"),b(),oe(11,"input",14),K(12,wN,2,0,"div",12),b(),A(13,"div",9)(14,"label",15),O(15,"Edad:"),b(),oe(16,"input",16),K(17,bN,2,0,"div",12),b(),A(18,"div",9)(19,"label",17),O(20,"DNI:"),b(),oe(21,"input",18),K(22,EN,2,0,"div",12),b()(),A(23,"div",19)(24,"div",9)(25,"label",20),O(26,"Email:"),b(),oe(27,"input",21),K(28,CN,3,2,"div",12),b(),A(29,"div",9)(30,"label",22),O(31,"Contrase\xF1a:"),b(),oe(32,"input",23),K(33,AN,2,0,"div",12),b(),A(34,"div",24)(35,"label",25),O(36,"Especialidad:"),b(),A(37,"label")(38,"input",26),ne("change",function(){Ae(t);let i=te();return Se(i.onCheckboxChange("Pediatria"))}),b(),O(39,"Pediatria "),b(),A(40,"label")(41,"input",27),ne("change",function(){Ae(t);let i=te();return Se(i.onCheckboxChange("Oftalmologia"))}),b(),O(42,"Oftalmologia "),b(),A(43,"label")(44,"input",28),ne("change",function(){Ae(t);let i=te();return Se(i.onCheckboxChange("Cardiologia"))}),b(),O(45,"Cardiologia "),b(),A(46,"label")(47,"input",29),ne("change",function(){Ae(t);let i=te();return Se(i.onCheckboxChange("Cirugia"))}),b(),O(48,"Cirugia "),b(),A(49,"label")(50,"input",30),ne("change",function(){Ae(t);let i=te();return Se(i.onCheckboxChange("General"))}),b(),O(51,"General "),b(),A(52,"label")(53,"input",31),ne("change",function(){Ae(t);let i=te();return Se(i.onCheckboxChange("Otra"))}),b(),O(54,"Otra "),b(),K(55,SN,3,0,"div",32),b(),K(56,PN,5,1,"div",33),A(57,"div",9)(58,"label",34),O(59,"Subir im\xE1gen de perfil:"),b(),A(60,"input",35),ne("change",function(i){Ae(t);let s=te();return Se(s.onFileChange(i))}),b(),K(61,xN,2,0,"div",12),b()()(),A(62,"div",36)(63,"button",37),O(64,"Crear Cuenta"),b()()()}if(n&2){let t,r,i,s,o,c,l,f=te();$("formGroup",f.especialistaForm),B(7),$("ngIf",((t=f.especialistaForm.get("nombre"))==null?null:t.invalid)&&(((t=f.especialistaForm.get("nombre"))==null?null:t.touched)||((t=f.especialistaForm.get("nombre"))==null?null:t.dirty))),B(5),$("ngIf",((r=f.especialistaForm.get("apellido"))==null?null:r.invalid)&&(((r=f.especialistaForm.get("apellido"))==null?null:r.touched)||((r=f.especialistaForm.get("apellido"))==null?null:r.dirty))),B(5),$("ngIf",((i=f.especialistaForm.get("edad"))==null?null:i.invalid)&&(((i=f.especialistaForm.get("edad"))==null?null:i.touched)||((i=f.especialistaForm.get("edad"))==null?null:i.dirty))),B(5),$("ngIf",((s=f.especialistaForm.get("dni"))==null?null:s.invalid)&&(((s=f.especialistaForm.get("dni"))==null?null:s.touched)||((s=f.especialistaForm.get("dni"))==null?null:s.dirty))),B(6),$("ngIf",((o=f.especialistaForm.get("email"))==null?null:o.invalid)&&((o=f.especialistaForm.get("email"))==null?null:o.touched)),B(5),$("ngIf",((c=f.especialistaForm.get("contrase\xF1a"))==null?null:c.invalid)&&(((c=f.especialistaForm.get("contrase\xF1a"))==null?null:c.touched)||((c=f.especialistaForm.get("contrase\xF1a"))==null?null:c.dirty))),B(22),$("ngIf",(l=f.especialistaForm.get("especialidad"))==null?null:l.invalid),B(),$("ngIf",f.otra),B(5),$("ngIf",f.imagenesInvalidEspecialista),B(2),$("disabled",f.especialistaForm.invalid)}}function kN(n,e){n&1&&(A(0,"div",38),O(1," Se requiere un nombre v\xE1lido. "),b())}function ON(n,e){n&1&&(A(0,"div",38),O(1," Se requiere un apellido v\xE1lido. "),b())}function NN(n,e){n&1&&(A(0,"div",38),O(1," Ingrese una edad valida (menor a 125 a\xF1os). "),b())}function MN(n,e){n&1&&(A(0,"div",38),O(1," El documento es requerido y debe ser num\xE9rico (8 caracteres). "),b())}function VN(n,e){n&1&&(A(0,"p"),O(1,"El correo es requerido."),b())}function FN(n,e){n&1&&(A(0,"p"),O(1,"El formato del correo no es v\xE1lido."),b())}function LN(n,e){if(n&1&&(A(0,"div",38),K(1,VN,2,0,"p",32)(2,FN,2,0,"p",32),b()),n&2){let t,r,i=te(2);B(),$("ngIf",(t=i.usuarioForm.get("email"))==null||t.errors==null?null:t.errors.required),B(),$("ngIf",(r=i.usuarioForm.get("email"))==null||r.errors==null?null:r.errors.email)}}function UN(n,e){n&1&&(A(0,"div",38),O(1," La contrase\xF1a es requerida y debe tener m\xEDnimo 6 caracteres. "),b())}function BN(n,e){n&1&&(A(0,"div",38),O(1," Ingrese una obra social v\xE1lida. "),b())}function jN(n,e){n&1&&(A(0,"div",38),O(1," Debe seleccionar exactamente 2 im\xE1genes. "),b())}function $N(n,e){if(n&1){let t=Yt();A(0,"form",6),ne("ngSubmit",function(){Ae(t);let i=te();return Se(i.onSubmit())}),A(1,"div",7)(2,"div",8)(3,"div",9)(4,"label",10),O(5,"Nombre/s:"),b(),oe(6,"input",11),K(7,kN,2,0,"div",12),b(),A(8,"div",9)(9,"label",13),O(10,"Apellido:"),b(),oe(11,"input",14),K(12,ON,2,0,"div",12),b(),A(13,"div",9)(14,"label",15),O(15,"Edad:"),b(),oe(16,"input",16),K(17,NN,2,0,"div",12),b(),A(18,"div",9)(19,"label",17),O(20,"DNI:"),b(),oe(21,"input",18),K(22,MN,2,0,"div",12),b()(),A(23,"div",19)(24,"div",9)(25,"label",20),O(26,"Email:"),b(),oe(27,"input",21),K(28,LN,3,2,"div",12),b(),A(29,"div",9)(30,"label",22),O(31,"Contrase\xF1a:"),b(),oe(32,"input",23),K(33,UN,2,0,"div",12),b(),A(34,"div",9)(35,"label",42),O(36,"Obra Social:"),b(),oe(37,"input",43),K(38,BN,2,0,"div",12),b(),A(39,"div",9)(40,"label",34),O(41,"Subir im\xE1genes (debe seleccionar 2): "),b(),A(42,"input",44),ne("change",function(i){Ae(t);let s=te();return Se(s.onFileChange(i))}),b(),K(43,jN,2,0,"div",12),b()()(),A(44,"div",36)(45,"button",37),O(46,"Crear Cuenta"),b()()()}if(n&2){let t,r,i,s,o,c,l,f=te();$("formGroup",f.usuarioForm),B(7),$("ngIf",((t=f.usuarioForm.get("nombre"))==null?null:t.invalid)&&(((t=f.usuarioForm.get("nombre"))==null?null:t.touched)||((t=f.usuarioForm.get("nombre"))==null?null:t.dirty))),B(5),$("ngIf",((r=f.usuarioForm.get("apellido"))==null?null:r.invalid)&&(((r=f.usuarioForm.get("apellido"))==null?null:r.touched)||((r=f.usuarioForm.get("apellido"))==null?null:r.dirty))),B(5),$("ngIf",((i=f.usuarioForm.get("edad"))==null?null:i.invalid)&&(((i=f.usuarioForm.get("edad"))==null?null:i.touched)||((i=f.usuarioForm.get("edad"))==null?null:i.dirty))),B(5),$("ngIf",((s=f.usuarioForm.get("dni"))==null?null:s.invalid)&&(((s=f.usuarioForm.get("dni"))==null?null:s.touched)||((s=f.usuarioForm.get("dni"))==null?null:s.dirty))),B(6),$("ngIf",((o=f.usuarioForm.get("email"))==null?null:o.invalid)&&((o=f.usuarioForm.get("email"))==null?null:o.touched)),B(5),$("ngIf",((c=f.usuarioForm.get("contrase\xF1a"))==null?null:c.invalid)&&(((c=f.usuarioForm.get("contrase\xF1a"))==null?null:c.touched)||((c=f.usuarioForm.get("contrase\xF1a"))==null?null:c.dirty))),B(5),$("ngIf",((l=f.usuarioForm.get("obrasocial"))==null?null:l.invalid)&&(((l=f.usuarioForm.get("obrasocial"))==null?null:l.touched)||((l=f.usuarioForm.get("obrasocial"))==null?null:l.dirty))),B(5),$("ngIf",f.imagenesInvalid),B(2),$("disabled",f.usuarioForm.invalid)}}function qN(n,e){n&1&&(A(0,"div",38),O(1," Se requiere un nombre v\xE1lido. "),b())}function zN(n,e){n&1&&(A(0,"div",38),O(1," Se requiere un apellido v\xE1lido. "),b())}function GN(n,e){n&1&&(A(0,"div",38),O(1," Ingrese una edad valida (mayor a 21 y menor a 125 a\xF1os). "),b())}function HN(n,e){n&1&&(A(0,"div",38),O(1," El documento es requerido y debe ser num\xE9rico (8 caracteres). "),b())}function WN(n,e){n&1&&(A(0,"p"),O(1,"El correo es requerido."),b())}function KN(n,e){n&1&&(A(0,"p"),O(1,"El formato del correo no es v\xE1lido."),b())}function QN(n,e){if(n&1&&(A(0,"div",38),K(1,WN,2,0,"p",32)(2,KN,2,0,"p",32),b()),n&2){let t,r,i=te(2);B(),$("ngIf",(t=i.adminForm.get("email"))==null||t.errors==null?null:t.errors.required),B(),$("ngIf",(r=i.adminForm.get("email"))==null||r.errors==null?null:r.errors.email)}}function JN(n,e){n&1&&(A(0,"div",38),O(1," La contrase\xF1a es requerida y debe tener m\xEDnimo 6 caracteres. "),b())}function YN(n,e){n&1&&(A(0,"div",38),O(1," Debe seleccionar exactamente 1 im\xE1gen. "),b())}function XN(n,e){if(n&1){let t=Yt();A(0,"form",6),ne("ngSubmit",function(){Ae(t);let i=te();return Se(i.onSubmitAdministrador())}),A(1,"div",7)(2,"div",8)(3,"div",9)(4,"label",10),O(5,"Nombre/s:"),b(),oe(6,"input",11),K(7,qN,2,0,"div",12),b(),A(8,"div",9)(9,"label",13),O(10,"Apellido:"),b(),oe(11,"input",14),K(12,zN,2,0,"div",12),b(),A(13,"div",9)(14,"label",15),O(15,"Edad:"),b(),oe(16,"input",16),K(17,GN,2,0,"div",12),b(),A(18,"div",9)(19,"label",17),O(20,"DNI:"),b(),oe(21,"input",18),K(22,HN,2,0,"div",12),b()(),A(23,"div",19)(24,"div",9)(25,"label",20),O(26,"Email:"),b(),oe(27,"input",21),K(28,QN,3,2,"div",12),b(),A(29,"div",9)(30,"label",22),O(31,"Contrase\xF1a:"),b(),oe(32,"input",23),K(33,JN,2,0,"div",12),b(),A(34,"div",9)(35,"label",34),O(36,"Subir im\xE1gen de perfil:"),b(),A(37,"input",35),ne("change",function(i){Ae(t);let s=te();return Se(s.onFileChange(i))}),b(),K(38,YN,2,0,"div",12),b()()(),A(39,"div",36)(40,"button",37),O(41,"Crear Cuenta"),b()()()}if(n&2){let t,r,i,s,o,c,l=te();$("formGroup",l.adminForm),B(7),$("ngIf",((t=l.adminForm.get("nombre"))==null?null:t.invalid)&&(((t=l.adminForm.get("nombre"))==null?null:t.touched)||((t=l.adminForm.get("nombre"))==null?null:t.dirty))),B(5),$("ngIf",((r=l.adminForm.get("apellido"))==null?null:r.invalid)&&(((r=l.adminForm.get("apellido"))==null?null:r.touched)||((r=l.adminForm.get("apellido"))==null?null:r.dirty))),B(5),$("ngIf",((i=l.adminForm.get("edad"))==null?null:i.invalid)&&(((i=l.adminForm.get("edad"))==null?null:i.touched)||((i=l.adminForm.get("edad"))==null?null:i.dirty))),B(5),$("ngIf",((s=l.adminForm.get("dni"))==null?null:s.invalid)&&(((s=l.adminForm.get("dni"))==null?null:s.touched)||((s=l.adminForm.get("dni"))==null?null:s.dirty))),B(6),$("ngIf",((o=l.adminForm.get("email"))==null?null:o.invalid)&&((o=l.adminForm.get("email"))==null?null:o.touched)),B(5),$("ngIf",((c=l.adminForm.get("contrase\xF1a"))==null?null:c.invalid)&&(((c=l.adminForm.get("contrase\xF1a"))==null?null:c.touched)||((c=l.adminForm.get("contrase\xF1a"))==null?null:c.dirty))),B(5),$("ngIf",l.imagenesInvalidEspecialista),B(2),$("disabled",l.adminForm.invalid)}}var rh=class n{constructor(e,t,r,i,s){this.firestore=e;this.router=t;this.authService=r;this.fb=i;this.storage=s}especialista=!1;otra=!1;especialidades=[];imagenesInvalid=!1;imagenesInvalidEspecialista=!1;selectedUserType="administrador";usuarioForm;especialistaForm;adminForm;ngOnInit(){this.usuarioForm=this.fb.group({nombre:["",[j.required,j.pattern("^(?!\\s*$)[a-zA-Z\xE1\xE9\xED\xF3\xFA\xC1\xC9\xCD\xD3\xDA\xF1\xD1\\s]+$")]],apellido:["",[j.required,j.pattern("^(?!\\s*$)[a-zA-Z\xE1\xE9\xED\xF3\xFA\xC1\xC9\xCD\xD3\xDA\xF1\xD1\\s]+$")]],dni:["",[j.required,j.pattern("^[0-9]*$"),j.maxLength(8),j.minLength(8)]],edad:[[],[j.required,j.pattern("^[0-9]*$"),j.max(125)]],email:["",[j.required,j.email]],contrase\u00F1a:["",[j.required,j.minLength(6)]],obrasocial:["",[j.required,j.pattern("^(?!\\s*$)[a-zA-Z\xE1\xE9\xED\xF3\xFA\xC1\xC9\xCD\xD3\xDA\xF1\xD10-9\\s]+$")]],imagenes:[null,this.imageValidator.bind(this)]}),this.especialistaForm=this.fb.group({nombre:["",[j.required,j.pattern("^(?!\\s*$)[a-zA-Z\xE1\xE9\xED\xF3\xFA\xC1\xC9\xCD\xD3\xDA\xF1\xD1\\s]+$")]],apellido:["",[j.required,j.pattern("^(?!\\s*$)[a-zA-Z\xE1\xE9\xED\xF3\xFA\xC1\xC9\xCD\xD3\xDA\xF1\xD1\\s]+$")]],dni:["",[j.required,j.pattern("^[0-9]*$"),j.maxLength(8),j.minLength(8)]],edad:[[],[j.required,j.pattern("^[0-9]*$"),j.min(21),j.max(125)]],email:["",[j.required,j.email]],contrase\u00F1a:["",[j.required,j.minLength(6)]],especialidad:[[],[j.required]],especialidadadicional:[""],imagenes:[null,this.imageValidator.bind(this)]}),this.adminForm=this.fb.group({nombre:["",[j.required,j.pattern("^(?!\\s*$)[a-zA-Z\xE1\xE9\xED\xF3\xFA\xC1\xC9\xCD\xD3\xDA\xF1\xD1\\s]+$")]],apellido:["",[j.required,j.pattern("^(?!\\s*$)[a-zA-Z\xE1\xE9\xED\xF3\xFA\xC1\xC9\xCD\xD3\xDA\xF1\xD1\\s]+$")]],dni:["",[j.required,j.pattern("^[0-9]*$"),j.maxLength(8),j.minLength(8)]],edad:[[],[j.required,j.pattern("^[0-9]*$"),j.min(21),j.max(125)]],email:["",[j.required,j.email]],contrase\u00F1a:["",[j.required,j.minLength(6)]],imagenes:[null,this.imageValidator.bind(this)]}),this.especialistaForm.get("especialidadadicional")?.clearValidators(),this.especialistaForm.get("especialidadadicional")?.updateValueAndValidity()}imageValidator(e){if(this.selectedUserType=="especialista"){if(!e.value||e.value.length!==1)return{required:!0}}else if(!e.value||e.value.length!==2)return{required:!0};return null}onFileChange(e){let t=e.target.files;if(this.selectedUserType=="especialista"&&t.length===1||this.selectedUserType=="paciente"&&t.length===2||this.selectedUserType=="administrador"&&t.length===1){let r=Array.from(t),i=[];r.forEach((s,o)=>{let c=new FileReader;c.onload=()=>{i.push({dataUrl:c.result}),i.length===r.length&&(this.selectedUserType=="especialista"?(this.especialistaForm.patchValue({imagenes:i}),this.imagenesInvalidEspecialista=!1):(this.usuarioForm.patchValue({imagenes:i}),this.imagenesInvalid=!1))},c.readAsDataURL(s)})}else this.selectedUserType=="especialista"?this.imagenesInvalidEspecialista=!0:this.imagenesInvalid=!0;this.especialistaForm.get("imagenes")?.updateValueAndValidity(),this.usuarioForm.get("imagenes")?.updateValueAndValidity()}toggleEspecialista(){this.usuarioForm.reset(),this.especialistaForm.reset(),this.otra=!1,this.especialista=!this.especialista}onCheckboxChange(e){let t=this.especialidades.indexOf(e);t===-1?(this.especialidades.push(e),e=="Otra"&&(this.otra=!this.otra,this.especialistaForm.patchValue({especialidad:this.especialidades}),this.especialistaForm.get("especialidadadicional")?.setValidators([j.required,j.pattern("^(?!\\s*$)[a-zA-Z\xE1\xE9\xED\xF3\xFA\xC1\xC9\xCD\xD3\xDA\xF1\xD1\\s]+$")]))):(this.especialidades.splice(t,1),e=="Otra"&&(this.otra=!this.otra,this.especialistaForm.patchValue({especialidad:this.especialidades}),this.especialistaForm.get("especialidadadicional")?.clearValidators())),this.especialistaForm.patchValue({especialidad:this.especialidades}),this.especialistaForm.get("especialidadadicional")?.updateValueAndValidity()}onSubmit(){return E(this,null,function*(){let e=this.usuarioForm.get("nombre")?.value,t=this.usuarioForm.get("apellido")?.value,r=this.usuarioForm.get("dni")?.value,i=this.usuarioForm.get("edad")?.value,s=this.usuarioForm.get("email")?.value,o=this.usuarioForm.get("contrase\xF1a")?.value,c=this.usuarioForm.get("obrasocial")?.value;try{yield this.authService.register(s,o);let l=_r(),f=this.usuarioForm.get("imagenes")?.value,_=Gn(l,`usuarios/${s}_1`),g=Gn(l,`usuarios/${s}_2`);yield qn(_,f[0].dataUrl,"data_url");let C=yield zn(_);yield qn(g,f[1].dataUrl,"data_url");let k=yield zn(g),F=gn(this.firestore,"usuarios");yield hs(F,{email:s,dni:r,nombre:e,apellido:t,edad:i,obrasocial:c,foto1:C,foto2:k,tipo:"paciente"}),fs.default.fire({title:"Usuario creado",text:"El usuario fue creado correctamente. Se envi\xF3 un email para validar la cuenta antes de poder ingresar",icon:"success",confirmButtonColor:"#4CAF50",background:"#f2f2f2",heightAuto:!1})}catch{fs.default.fire({title:"Error!",text:"El usuario ya se encuentra en uso",icon:"error",confirmButtonColor:"#4CAF50",background:"#f2f2f2",heightAuto:!1})}})}onSubmitEspecialista(){return E(this,null,function*(){let e=this.especialistaForm.get("nombre")?.value,t=this.especialistaForm.get("apellido")?.value,r=this.especialistaForm.get("dni")?.value,i=this.especialistaForm.get("edad")?.value,s=this.especialistaForm.get("email")?.value,o=this.especialistaForm.get("contrase\xF1a")?.value,l=(this.especialistaForm.get("especialidad")?.value).map(f=>f==="Otra"?this.especialistaForm.get("especialidadadicional")?.value:f);try{yield this.authService.register(s,o);let f=_r(),_=this.especialistaForm.get("imagenes")?.value,g=Gn(f,`usuarios/${s}_1`);yield qn(g,_[0].dataUrl,"data_url");let C=yield zn(g),k=gn(this.firestore,"usuarios");yield hs(k,{email:s,dni:r,nombre:e,apellido:t,edad:i,especialidades:l,foto1:C,tipo:"especialista",estado:"pendiente"}),fs.default.fire({title:"Usuario creado",text:"El usuario fue creado correctamente. Se envi\xF3 un email para validar la cuenta antes de poder ingresar. Tenga en cuenta que su usuario tambi\xE9n deber\xE1 ser aprobado por un administrador",icon:"success",confirmButtonColor:"#4CAF50",background:"#f2f2f2",heightAuto:!1})}catch{fs.default.fire({title:"Error!",text:"El usuario ya se encuentra en uso",icon:"error",confirmButtonColor:"#4CAF50",background:"#f2f2f2",heightAuto:!1})}})}onUserTypeChange(e){let t=e.target;this.selectedUserType=t.value,console.log("Tipo de usuario seleccionado:",this.selectedUserType)}onSubmitAdministrador(){return E(this,null,function*(){let e=this.especialistaForm.get("nombre")?.value,t=this.especialistaForm.get("apellido")?.value,r=this.especialistaForm.get("dni")?.value,i=this.especialistaForm.get("edad")?.value,s=this.especialistaForm.get("email")?.value,o=this.especialistaForm.get("contrase\xF1a")?.value,l=(this.especialistaForm.get("especialidad")?.value).map(f=>f==="Otra"?this.especialistaForm.get("especialidadadicional")?.value:f);try{yield this.authService.register(s,o);let f=_r(),_=this.especialistaForm.get("imagenes")?.value,g=Gn(f,`usuarios/${s}_1`);yield qn(g,_[0].dataUrl,"data_url");let C=yield zn(g),k=gn(this.firestore,"usuarios");yield hs(k,{email:s,dni:r,nombre:e,apellido:t,edad:i,especialidades:l,foto1:C,tipo:"especialista",estado:"pendiente"}),fs.default.fire({title:"Usuario creado",text:"El usuario fue creado correctamente. Se envi\xF3 un email para validar la cuenta antes de poder ingresar. Tenga en cuenta que su usuario tambi\xE9n deber\xE1 ser aprobado por un administrador",icon:"success",confirmButtonColor:"#4CAF50",background:"#f2f2f2",heightAuto:!1})}catch{fs.default.fire({title:"Error!",text:"El usuario ya se encuentra en uso",icon:"error",confirmButtonColor:"#4CAF50",background:"#f2f2f2",heightAuto:!1})}})}static \u0275fac=function(t){return new(t||n)(Y(qt),Y(Dt),Y(Ot),Y(Js),Y(yr))};static \u0275cmp=ut({type:n,selectors:[["app-alta"]],standalone:!0,features:[dt],decls:12,vars:3,consts:[["for","userType"],["id","userType",2,"margin-left","4px","font-size","medium",3,"change"],["value","administrador"],["value","especialista"],["value","paciente"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"left-column"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","name","nombre","formControlName","nombre","required",""],["class","error",4,"ngIf"],["for","apellido"],["type","text","id","apellido","name","apellido","formControlName","apellido","required",""],["for","edad"],["type","number","id","edad","name","edad","formControlName","edad","required",""],["for","dni"],["type","text","id","dni","name","dni","formControlName","dni","required",""],[1,"right-column"],["for","email"],["type","email","id","email","name","email","formControlName","email","required",""],["for","contrase\xF1a"],["type","password","id","contrase\xF1a","name","contrase\xF1a","formControlName","contrase\xF1a","required",""],["id","especialidad",1,"especialidad-form-group"],["for","especialidad"],["type","checkbox","value","Pediatria",3,"change"],["type","checkbox","value","Oftalmologia",3,"change"],["type","checkbox","value","Cardiologia",3,"change"],["type","checkbox","value","Cirugia",3,"change"],["type","checkbox","value","General",3,"change"],["type","checkbox","value","Otra",3,"change"],[4,"ngIf"],["class","form-group","style","margin-top: 42px;",4,"ngIf"],["for","imagenes"],["type","file","id","imagenes","name","imagenes","accept","image/*","required","",3,"change"],[1,"button-container"],["type","submit",1,"submit-btn",3,"disabled"],[1,"error"],[1,"form-group",2,"margin-top","42px"],["for","especialidadadicional"],["type","text","id","especialidadadicional","name","especialidadadicional","formControlName","especialidadadicional"],["for","obrasocial"],["type","text","id","obrasocial","name","obrasocial","formControlName","obrasocial","required",""],["type","file","id","imagenes","name","imagenes","accept","image/*","multiple","","required","",3,"change"]],template:function(t,r){t&1&&(A(0,"label",0),O(1,"Tipo de usuario:"),b(),A(2,"select",1),ne("change",function(s){return r.onUserTypeChange(s)}),A(3,"option",2),O(4,"Administrador"),b(),A(5,"option",3),O(6,"Especialista"),b(),A(7,"option",4),O(8,"Paciente"),b()(),K(9,DN,65,11,"form",5)(10,$N,47,10,"form",5)(11,XN,42,9,"form",5)),t&2&&(B(9),$("ngIf",r.selectedUserType=="especialista"),B(),$("ngIf",r.selectedUserType=="paciente"),B(),$("ngIf",r.selectedUserType=="administrador"))},dependencies:[un,Pn,Zr,Qs,Cu,Au,Yr,Ka,Xr,Ks,qi,ji,$i,Ys],styles:['@charset "UTF-8";.signup-section[_ngcontent-%COMP%]{background-color:#e6edf7;padding:20px 40px;border-radius:10px;box-shadow:0 4px 20px #0000001a;width:50%;min-width:50%;min-height:30%}.signup-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2em;color:#686868;margin-bottom:20px;text-align:center}.form-grid[_ngcontent-%COMP%]{display:flex;gap:50px}.left-column[_ngcontent-%COMP%], .right-column[_ngcontent-%COMP%]{flex:1}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.especialidad-form-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:flex-start;margin-bottom:20px}.especialidad-form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:10px}label[_ngcontent-%COMP%]{font-size:1em;color:#666}input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #718199;border-radius:5px;font-size:15px;background-color:#edf4ff}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.a-container[_ngcontent-%COMP%]{margin-top:8px;display:flex;justify-content:center;color:#686868}.login-link[_ngcontent-%COMP%]{color:#007bff;cursor:pointer;text-decoration:underline;margin-left:2px}.login-link[_ngcontent-%COMP%]:hover{text-decoration:none}.submit-btn[_ngcontent-%COMP%]{padding:10px 20px;font-size:1.4em;border:none;border-radius:5px;background-color:#3262ff;color:#fff;cursor:pointer;transition:background-color .3s;width:20%}.submit-btn[_ngcontent-%COMP%]:disabled{background-color:#ccc;color:#666;cursor:not-allowed}.submit-btn[_ngcontent-%COMP%]:disabled:hover{background-color:#ccc;color:#666;cursor:not-allowed}.submit-btn[_ngcontent-%COMP%]:hover{background-color:#134aff}.toggle-group[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px}.toggle-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:10px}.toggle-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:40px;height:20px;background-color:#ccc;border-radius:20px;position:relative;cursor:pointer;outline:none}.toggle-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked{background-color:#3262ff}.toggle-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked:after{left:20px}.toggle-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:after{content:"";position:absolute;width:16px;height:16px;border-radius:50%;background-color:#fff;top:2px;transition:.3s}.error[_ngcontent-%COMP%]{color:red;font-size:.9rem;margin-top:5px}.imagenes[_ngcontent-%COMP%]{background-color:#3262ff;color:#fff}']})};var yI=n=>({"active-tab":n});function ZN(n,e){n&1&&(A(0,"div"),oe(1,"app-alta"),b())}function e2(n,e){n&1&&(fa(0),A(1,"th"),O(2,"Activo"),b(),pa())}function t2(n,e){n&1&&(fa(0),A(1,"th"),O(2,"Obra Social"),b(),pa())}function n2(n,e){if(n&1){let t=Yt();fa(0),A(1,"input",14),ne("change",function(i){Ae(t);let s=te().$implicit,o=te(3);return Se(o.toggleEstado(s,i))}),b(),pa()}if(n&2){let t=te().$implicit;B(),$("checked",t.estado==="aprobado")}}function r2(n,e){if(n&1&&(fa(0),A(1,"td"),O(2),b(),pa()),n&2){let t=te().$implicit;B(2),ma(t.obrasocial)}}function i2(n,e){if(n&1&&(A(0,"tr")(1,"td"),O(2),b(),A(3,"td"),O(4),b(),A(5,"td"),O(6),b(),A(7,"td"),O(8),b(),K(9,n2,2,1,"ng-container",6)(10,r2,3,1,"ng-container",6),b()),n&2){let t=e.$implicit,r=te(3);B(2),by("",t.nombre," ",t.apellido,""),B(2),ma(t.dni),B(2),ma(t.edad),B(2),ma(t.email),B(),$("ngIf",r.selectedUserType=="especialista"),B(),$("ngIf",r.selectedUserType=="paciente")}}function s2(n,e){if(n&1&&(A(0,"div")(1,"table")(2,"thead")(3,"tr")(4,"th"),O(5,"Nombre Completo"),b(),A(6,"th"),O(7,"DNI"),b(),A(8,"th"),O(9,"Edad"),b(),A(10,"th"),O(11,"Email"),b(),K(12,e2,3,0,"ng-container",6)(13,t2,3,0,"ng-container",6),b()(),A(14,"tbody"),K(15,i2,11,7,"tr",13),b()()()),n&2){let t=te(2);B(12),$("ngIf",t.selectedUserType=="especialista"),B(),$("ngIf",t.selectedUserType=="paciente"),B(2),$("ngForOf",t.usuariosFiltrados)}}function o2(n,e){if(n&1){let t=Yt();A(0,"div")(1,"div",7)(2,"label",8),O(3,"Filtrar por tipo de usuario:"),b(),A(4,"select",9),Ty("ngModelChange",function(i){Ae(t);let s=te();return Iy(s.selectedUserType,i)||(s.selectedUserType=i),Se(i)}),ne("change",function(){Ae(t);let i=te();return Se(i.filterUsers())}),A(5,"option",10),O(6,"Administrador"),b(),A(7,"option",11),O(8,"Especialista"),b(),A(9,"option",12),O(10,"Paciente"),b()()(),K(11,s2,16,3,"div",6),b()}if(n&2){let t=te();B(4),Ey("ngModel",t.selectedUserType),B(7),$("ngIf",t.usuarios.length>0)}}var ih=class n{constructor(e){this.firestore=e}activeTab="alta";usuarios=[];usuariosFiltrados=[];selectedUserType="especialista";ngOnInit(){return E(this,null,function*(){yield this.obtenerUsuarios(),this.filterUsers()})}obtenerUsuarios(){return E(this,null,function*(){let e=gn(this.firestore,"usuarios"),t=yield Wd(e);this.usuarios=t.docs.map(r=>H({id:r.id},r.data()))})}filterUsers(){this.usuariosFiltrados=this.usuarios.filter(e=>e.tipo===this.selectedUserType)}toggleEstado(e,t){return E(this,null,function*(){let r=t.target.checked?"aprobado":"pendiente";try{let i=UE(this.firestore,`usuarios/${e.id}`);yield $E(i,{estado:r}),e.estado=r,console.log(`Usuario ${e.nombre} actualizado a estado: ${r}`)}catch(i){console.error("Error actualizando el estado:",i)}})}static \u0275fac=function(t){return new(t||n)(Y(qt))};static \u0275cmp=ut({type:n,selectors:[["app-usuarios"]],standalone:!0,features:[dt],decls:13,vars:8,consts:[[1,"wrapper"],[1,"usuarios-section"],[1,"tabs-container"],[1,"tabs"],[3,"click","ngClass"],[1,"tab-content"],[4,"ngIf"],[1,"filter-container"],["for","userType"],["id","userType",2,"margin-left","4px","font-size","medium",3,"ngModelChange","change","ngModel"],["value","admin"],["value","especialista"],["value","paciente"],[4,"ngFor","ngForOf"],["type","checkbox",1,"checkboxActivo",3,"change","checked"]],template:function(t,r){t&1&&(A(0,"div",0)(1,"div",1)(2,"h1"),O(3," Usuarios "),b(),A(4,"div",2)(5,"div",3)(6,"button",4),ne("click",function(){return r.activeTab="alta"}),O(7,"Alta Usuarios"),b(),A(8,"button",4),ne("click",function(){return r.activeTab="listado"}),O(9,"Listado Usuarios"),b()(),A(10,"div",5),K(11,ZN,2,0,"div",6)(12,o2,12,2,"div",6),b()()()()),t&2&&(B(6),$("ngClass",qh(4,yI,r.activeTab==="alta")),B(2),$("ngClass",qh(6,yI,r.activeTab==="listado")),B(3),$("ngIf",r.activeTab==="alta"),B(),$("ngIf",r.activeTab==="listado"))},dependencies:[un,xy,Dy,Pn,Zr,Cu,Au,Tu,Xr,Ys,tp,rh],styles:['@charset "UTF-8";.wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:92.3vh;width:100vw;background-color:#292952;background-image:url("./media/background-O36KHK4D.jpg");background-size:cover;background-position:center;background-repeat:no-repeat}.usuarios-section[_ngcontent-%COMP%]{background-color:#e6edf7;padding:20px 40px;border-radius:10px;box-shadow:0 4px 20px #0000001a;width:92%;min-width:85%;min-height:700px}.usuarios-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2em;color:#686868;margin-bottom:20px;text-align:center}.tabs-container[_ngcontent-%COMP%]{max-width:100%;margin:0 auto}.tabs[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:20px}.tabs[_ngcontent-%COMP%]   button.active-tab[_ngcontent-%COMP%]{background-color:#3262ff;color:#fff}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#6d8efa;border:none;padding:10px 20px;cursor:pointer;font-weight:700;color:#fcfcfc;border-radius:4px;margin:0 5px;font-size:15px;transition:background-color .3s}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%], .tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#3262ff;color:#fff}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:10px}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #ddd}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#3262ff;color:#fff;font-weight:700}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.no-users-message[_ngcontent-%COMP%]{text-align:center;color:#777;font-size:16px;margin-top:20px}.filter-container[_ngcontent-%COMP%]{margin-bottom:1rem}.checkboxActivo[_ngcontent-%COMP%]{margin-top:14px;margin-left:20px}']})};var vI=ca(No()),wI=(n,e)=>Z(Ot).getUserEmail().pipe(he(r=>r==="administrador@prueba.com"?(console.log("Puede pasar"),!0):(console.log("No puede pasar"),vI.default.fire({title:"Error!",text:"Debe iniciar sesi\xF3n como administrador para acceder a esta p\xE1gina",icon:"error",confirmButtonColor:"#4CAF50",background:"#f2f2f2",heightAuto:!1}),!1)));var bI=ca(No()),EI=(n,e)=>{let t=Z(Ot),r=Z(Dt);return t.isLoggedIn().pipe(he(i=>i?(console.log("Puede pasar"),!0):(console.log("No puede pasar"),bI.default.fire({title:"Error!",text:"Debe iniciar sesi\xF3n para acceder a esta p\xE1gina",icon:"error",confirmButtonColor:"#4CAF50",background:"#f2f2f2",heightAuto:!1}),!1)))};var II=[{path:"",redirectTo:"/bienvenida",pathMatch:"full"},{path:"bienvenida",component:lu},{path:"registro",component:eh},{path:"login",component:th},{path:"perfil",component:nh,canActivate:[EI]},{path:"usuarios",component:ih,canActivate:[wI]},{path:"**",redirectTo:"/bienvenida",pathMatch:"full"}];var TI={production:!1,firebaseConfig:{apiKey:"AIzaSyCwWDG1cU4cQb61olWScGill6G6z9wtJL0",authDomain:"sala-juegos-f7ba1.firebaseapp.com",projectId:"sala-juegos-f7ba1",storageBucket:"sala-juegos-f7ba1.appspot.com",messagingSenderId:"791990352942",appId:"1:791990352942:web:139b9d34b45f98c12033bf"}};var a2="@",c2=(()=>{class n{constructor(t,r,i,s,o){this.doc=t,this.delegate=r,this.zone=i,this.animationType=s,this.moduleImpl=o,this._rendererFactoryPromise=null,this.scheduler=Z(fy,{optional:!0}),this.loadingSchedulerFn=Z(l2,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-LZJWLMFO.js").then(i=>i),r;return this.loadingSchedulerFn?r=this.loadingSchedulerFn(t):r=t(),r.catch(i=>{throw new Ne(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:s})=>{this._engine=i(this.animationType,this.doc);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(t,r){let i=this.delegate.createRenderer(t,r);if(i.\u0275type===0)return i;typeof i.throwOnSyntheticProps=="boolean"&&(i.throwOnSyntheticProps=!1);let s=new U_(i);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(o=>{let c=o.createRenderer(t,r);s.use(c),this.scheduler?.notify(10)}).catch(o=>{s.use(i)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(r){Bh()}}static{this.\u0275prov=_e({token:n,factory:n.\u0275fac})}}return n})(),U_=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,r,i){this.delegate.insertBefore(e,t,r,i)}removeChild(e,t,r){this.delegate.removeChild(e,t,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){this.shouldReplay(t)&&this.replay.push(i=>i.setProperty(e,t,r)),this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.shouldReplay(t)&&this.replay.push(i=>i.listen(e,t,r)),this.delegate.listen(e,t,r)}shouldReplay(e){return this.replay!==null&&e.startsWith(a2)}},l2=new me("");function CI(n="animations"){return jh("NgAsyncAnimations"),Ct([{provide:Pl,useFactory:(e,t,r)=>new c2(e,t,r,n),deps:[Pt,ql,Ye]},{provide:dy,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var AI={providers:[Ay({eventCoalescing:!0}),Nv(II),Bw(()=>jw(TI.firebaseConfig)),U0(()=>$0()),LE(()=>BE()),pI(()=>mI()),qy(),CI()]};function u2(n,e){n&1&&(A(0,"a",6),O(1,"Inicio"),b())}function d2(n,e){n&1&&(A(0,"a",7),O(1,"Usuarios"),b())}function h2(n,e){n&1&&(A(0,"a",8),O(1,"Mi Perfil"),b())}function f2(n,e){if(n&1){let t=Yt();A(0,"a",9),ne("click",function(){Ae(t);let i=te();return Se(i.logout())}),O(1,"Cerrar Sesi\xF3n"),b()}}var sh=class n{constructor(e){this.auth=e}isLoggedIn=!1;userEmail;ngOnInit(){this.auth.isLoggedIn().pipe(he(e=>({loggedIn:!!e,email:e?e.email:null}))).subscribe(({loggedIn:e,email:t})=>{this.isLoggedIn=e,this.userEmail=t})}logout(){this.auth.logout(),this.auth.mailUsuario="",this.auth.tipoUsuario="",this.auth.nombreUsuario=""}static \u0275fac=function(t){return new(t||n)(Y(Ot))};static \u0275cmp=ut({type:n,selectors:[["app-header"]],standalone:!0,features:[dt],decls:13,vars:4,consts:[[1,"navbar"],["src","icon.png","alt","Icono",1,"icon-photo"],["routerLink","home","routerLinkActive","active-route",4,"ngIf"],["routerLink","usuarios",4,"ngIf"],["routerLink","perfil","routerLinkActive","active-route",4,"ngIf"],["routerLink","/login","routerLinkActive","active-route",3,"click",4,"ngIf"],["routerLink","home","routerLinkActive","active-route"],["routerLink","usuarios"],["routerLink","perfil","routerLinkActive","active-route"],["routerLink","/login","routerLinkActive","active-route",3,"click"]],template:function(t,r){t&1&&(A(0,"header")(1,"nav",0)(2,"ul")(3,"li"),oe(4,"img",1),b(),A(5,"li"),K(6,u2,2,0,"a",2),b(),A(7,"li"),K(8,d2,2,0,"a",3),b(),A(9,"li"),K(10,h2,2,0,"a",4),b(),A(11,"li"),K(12,f2,2,0,"a",5),b()()()()),t&2&&(B(6),$("ngIf",!r.isLoggedIn),B(2),$("ngIf",r.auth.tipoUsuario=="admin"),B(2),$("ngIf",r.isLoggedIn),B(2),$("ngIf",r.isLoggedIn))},dependencies:[su,Ov,un,Pn],styles:['@charset "UTF-8";nav[_ngcontent-%COMP%]   a.active-route[_ngcontent-%COMP%]{font-weight:700}header[_ngcontent-%COMP%]{padding:0 30px;box-shadow:0 4px 6px #0000001a;top:0;position:sticky;z-index:1000;display:flex;justify-content:flex-start;align-items:center;min-height:70px;background-color:#fff;border-radius:15px}nav[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;align-items:center;list-style-type:none;padding:0;margin:0 0 0 auto;height:100%}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-right:20px;display:flex;align-items:center;height:100%}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-right:0}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#333;font-weight:400;font-size:18px;padding:8px 15px;border-radius:5px;transition:background-color .3s,color .3s}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#f0f0f0;color:#007bff}nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;font-weight:600}.icon-photo[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;object-fit:cover;display:block}']})};var oh=class n{title="tp-clinica-online";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ut({type:n,selectors:[["app-root"]],standalone:!0,features:[dt],decls:2,vars:0,template:function(t,r){t&1&&oe(0,"app-header")(1,"router-outlet")},dependencies:[Uf,sh]})};Jy(oh,AI).catch(n=>console.error(n));
